{"version":3,"sources":["webpack:///media-browser.js","webpack:///webpack/bootstrap 3f426ae9e362a9473816","webpack:///./Browser.js","webpack:///external \"window._\"","webpack:///external \"window.m\"","webpack:///./BrowserView.js","webpack:///./components/folderTree.js","webpack:///./util/dragDrop.js","webpack:///./FileUpload.js","webpack:///./util/remote.js","webpack:///./actions/fileActions.js","webpack:///./actions/folderActions.js","webpack:///./components/folderClick.js","webpack:///./components/folderBreadcrumbs.js","webpack:///./components/folderView.js","webpack:///./components/button.js","webpack:///./components/emptyFolderView.js","webpack:///./components/responsiveUploadHint.js","webpack:///./components/file-icons.svg","webpack:///./components/gridFileView.js","webpack:///./components/wrapFileLink.js","webpack:///./util/getPickId.js","webpack:///./components/folderLink.js","webpack:///./components/images.js","webpack:///./components/default-thumbnail.svg","webpack:///./util/menuManager.js","webpack:///./util/offset.js","webpack:///./menus/fileContextMenu.js","webpack:///./menus/menuItem.js","webpack:///./components/listFileView.js","webpack:///external \"window.moment\"","webpack:///./util/findPathToFolder.js","webpack:///./menus/folderContextMenu.js"],"names":["MediaBrowser","modules","__webpack_require__","moduleId","installedModules","exports","module","id","loaded","call","m","c","p","init","config","arguments","length","undefined","controller","mount","document","getElementById","view","BrowserView","_","partial","navigateByHash","reloadFolderTree","dragDrop","disableIntraPageDragDrop","openFolderContextMenu","event","button","target","menuManager","open","folderContextMenu","setupUploadButton","element","input","createElement","type","multiple","style","display","addEventListener","FileUpload","enqueueMultiple","getUploadUrl","files","addQueueCompletionCallback","reloadFolderContentsSoon","processQueue","body","appendChild","click","preventDefault","__esModule","window","ctrl","folderTree","folderBreadcrumbs","folderView","this","currentFolderId","prop","currentFolderPath","rootFolder","folderData","viewMode","sortMode","isMenuDisabled","action","disabledMenus","indexOf","setFolder","newFolderId","_refreshCurrentFolderPath","reloadFolderContents","location","hash","findPathToFolder","remote","get","then","response","filter","handleResponseMessages","folder","folderId","uploadUrl","pathname","debounce","currentIdMatch","exec","_require","dropzoneConfig","folderActions","folderClick","walk","inPath","idsToCurrent","isCurrent","nameLink","href","onclick","name","childLis","map","children","push","key","bind","promptCreateFolder","gettext","className","current","in-path","has-children","fd-zone","pick","identity","keys","join","data-folder-id","folderPath","pluck","ignoreEvent","e","stopPropagation","Error","isInitialized","dataset","dataTransfer","dropEffect","classList","add","redraw","strategy","remove","data","JSON","parse","getData","exc","fileId","fileActions","moveFile","alert","supportsDnD","File","FileList","FormData","queueView","queue","all","file","status","progress","updateQueueView","queueStatusDiv","noop","handleFileXhrComplete","xhr","error","setTimeout","messageText","responseJson","responseText","message","console","log","Messages","beginUpload","formData","append","nativeFile","XMLHttpRequest","url","setRequestHeader","ShuupAdminConfig","csrf","onreadystatechange","readyState","updateQueueViewSoon","onerror","upload","onprogress","lengthComputable","total","send","enqueue","each","callback","queueCompleteCallbacks","any","nextFile","detect","cb","shift","post","request","method","tags","text","promptRenameFile","newName","trim","prompt","promptDeleteFile","confirm","interpolate","file_id","folder_id","parentFolderId","parent","newCurrentFolder","promptCreateFolderHere","promptRenameCurrentFolder","_controller$folderData","promptDeleteCurrentFolder","_controller$folderData2","items","index","pop","unshift","sortBySpec","sortString","sortBy","reverse","viewModeGroup","sortGroup","toolbar","folders","contents","uploadHint","emptyFolderView","gridFileView","listFileView","responsiveUploadHint","container","src","images","uploadIndicator","trust","value","label","title","active","NO_DND_UPLOAD_HINT","DND_UPLOAD_HINT","wrapFileLink","folderLink","fileContextMenu","folderItems","fileItems","draggable","ondragstart","effectAllowed","setData","stringify","dragIcon","thumbnail","defaultThumbnail","width","setDragImage","currentTarget","concat","getPickId","tag","content","attrs","pickId","opener","postMessage","object","pickMatch","search","isMenuVisible","currentMenuParent","menuContainer","reattachNow","parentCoords","offset","fallbackParentCoords","viewWidth","innerWidth","x","left","y","top","height","menuOffset","menuWidth","widthMargin","assign","position","zIndex","menuView","isArray","isFunction","initializeMenuContainer","reattachSoon","Date","currentMenuOpenTs","node","parentElement","close","currentMenuComponent","elem","getClientRects","rect","getBoundingClientRect","doc","ownerDocument","win","defaultView","docElem","documentElement","pageYOffset","clientTop","pageXOffset","clientLeft","menuItem","disabled","item","tagBits","moment","colspan","size","date","format","pathToFolder","isRoot"],"mappings":"AAAA,GAAIA,cACK,SAAUC,GCGnB,QAAAC,GAAAC,GAGA,GAAAC,EAAAD,GACA,MAAAC,GAAAD,GAAAE,OAGA,IAAAC,GAAAF,EAAAD,IACAE,WACAE,GAAAJ,EACAK,QAAA,EAUA,OANAP,GAAAE,GAAAM,KAAAH,EAAAD,QAAAC,IAAAD,QAAAH,GAGAI,EAAAE,QAAA,EAGAF,EAAAD,QAvBA,GAAAD,KAqCA,OATAF,GAAAQ,EAAAT,EAGAC,EAAAS,EAAAP,EAGAF,EAAAU,EAAA,GAGAV,EAAA,KDOM,SAASI,EAAQD,EAASH,GAW/B,YErCM,SAASW,KFsDX,GEtDgBC,GAAMC,UAAAC,QAAA,GAAAC,SAAAF,UAAA,MAAGA,UAAA,EACP,QAAfG,IAGJA,EAAaR,EAAES,MAAMC,SAASC,eAAe,gBACzCC,KAAMC,EAAYD,KAClBJ,WAAYM,EAAEC,QAAQF,EAAYL,WAAYJ,KAElDI,EAAWQ,iBACXR,EAAWS,mBAEXC,EAASC,4BAGN,QAASC,GAAsBC,GAClC,GAAMC,GAASD,EAAME,MACrBC,GAAYC,KAAKH,EAAQI,EAAkBlB,IAGxC,QAASmB,GAAkBC,GAC9B,GAAMC,GAAQnB,SAASoB,cAAc,QACrCD,GAAME,KAAO,OACbF,EAAMG,UAAW,EACjBH,EAAMI,MAAMC,QAAU,OACtBL,EAAMM,iBAAiB,SAAU,SAASd,GACtCe,EAAWC,gBAAgB7B,EAAW8B,eAAgBjB,EAAME,OAAOgB,OACnEH,EAAWI,2BAA2B,WAAQhC,EAAWiC,6BACzDL,EAAWM,iBAEfhC,SAASiC,KAAKC,YAAYf,GAC1BD,EAAQO,iBAAiB,QAAS,SAASd,GACvCQ,EAAMgB,QACNxB,EAAMyB,mBACP,GFMNnD,EAAQoD,YAAa,EACrBpD,EAAQQ,KAAOA,EACfR,EAAQyB,sBAAwBA,EAChCzB,EAAQgC,kBAAoBA,CEpD7B,IAAMb,GAAItB,EAAQ,GACZQ,EAAIR,EAAQ,GACZqB,EAAcrB,EAAQ,GACtB0B,EAAW1B,EAAQ,GACnB4C,EAAa5C,EAAQ,GACrBgC,EAAchC,EAAQ,IACtBkC,EAAoBlC,EAAQ,IAE9BgB,EAAa,MFiGX,SAASZ,EAAQD,GGlHvBC,EAAAD,QAAAqD,OAAAlC,GHwHM,SAASlB,EAAQD,GIxHvBC,EAAAD,QAAAqD,OAAAhD,GJ8HM,SAASJ,EAAQD,EAASH,GAY/B,YKvHM,SAASoB,GAAKqC,GACjB,MAAOjD,GAAE,uBACLA,EAAE,WACEA,EAAE,iDAAkDkD,EAAWD,IAC/DjD,EAAE,4BAA6BA,EAAE,qBAC7BA,EAAE,YAAamD,EAAkBF,IACjCjD,EAAE,cAAeoD,EAAWH,WAMrC,QAASzC,KL8HX,GK9HsBJ,GAAMC,UAAAC,QAAA,GAAAC,SAAAF,UAAA,MAAGA,UAAA,GAC1B4C,EAAOI,IACbJ,GAAKK,gBAAkBtD,EAAEuD,KAAK,MAC9BN,EAAKO,kBAAoBxD,EAAEuD,SAC3BN,EAAKQ,WAAazD,EAAEuD,SACpBN,EAAKS,WAAa1D,EAAEuD,SACpBN,EAAKU,SAAW3D,EAAEuD,KAAK,QACvBN,EAAKW,SAAW5D,EAAEuD,KAAK,SAEvBN,EAAKY,eAAiB,SAASC,GAC3B,OAAQ1D,EAAO2D,mBAAqBC,QAAQF,IAAW,GAE3Db,EAAKgB,UAAY,SAASC,GACtBA,EAAc,EAAIA,EACdjB,EAAKK,oBAAsBY,IAG/BjB,EAAKK,gBAAgB,EAAIY,GACzBjB,EAAKkB,4BACLlB,EAAKmB,uBACLC,SAASC,KAAO,QAAUJ,IAE9BjB,EAAKkB,0BAA4B,WAC7B,GAAMb,GAAkBL,EAAKK,iBACL,QAApBA,GAGJL,EAAKO,kBAAkBe,EAAiBtB,EAAKQ,aAAcH,KAE/DL,EAAKhC,iBAAmB,WACpBuD,EAAOC,KAAKX,OAAU,YAAYY,KAAK,SAASC,GAC5C1B,EAAKQ,WAAWkB,EAASlB,YACzBR,EAAKkB,+BAGblB,EAAKmB,qBAAuB,WACxB,GAAMvE,GAAK,EAAIoD,EAAKK,iBACpBkB,GAAOC,KAAKX,OAAU,SAAUjE,KAAI+E,OAAQxE,EAAOwE,SAASF,KAAK,SAASC,GACtEH,EAAOK,uBAAuBF,GAC9B1B,EAAKS,WAAWiB,EAASG,eAIjC7B,EAAKX,aAAe,SAASyC,GACzB,GAAMC,GAAYhC,OAAOqB,SAASY,QAElC,OADAF,GAAwBxE,SAAbwE,EAAyB9B,EAAKK,kBAAoByB,EACtDC,EAAY,4BAA8BD,GAErD9B,EAAKR,yBAA2B3B,EAAEoE,SAASjC,EAAKmB,qBAAsB,KAEtEnB,EAAKjC,eAAiB,WAClB,GAAMmE,GAAiB,aAAaC,KAAKf,SAASC,MAC5CJ,EAAciB,EAAiBA,EAAe,GAAK,CACzDlC,GAAKgB,UAAUC,IAGnBlB,OAAOb,iBAAiB,aAAc,WAClCc,EAAKjC,mBACN,GLmDNrB,EAAQoD,YAAa,EACrBpD,EAAQiB,KAAOA,EACfjB,EAAQa,WAAaA,CKpItB,IAAMR,GAAIR,EAAQ,GACZsB,EAAItB,EAAQ,GAEZ0D,EAAa1D,EAAQ,GACrB2D,EAAoB3D,EAAQ,IAC5B4D,EAAa5D,EAAQ,IACrB+E,EAAmB/E,EAAQ,IAC3BgF,EAAShF,EAAQ,IL4MjB,SAASI,EAAQD,EAASH,GAU/B,YAEAG,GAAQoD,YAAa,CMjOtB,IAAM/C,GAAIR,EAAQ,GACZsB,EAAItB,EAAQ,GNoOb6F,EMnOoB7F,EAAQ,GAA1B8F,EAAcD,EAAdC,eACDC,EAAgB/F,EAAQ,GACxBgG,EAAchG,EAAQ,GNwO3BG,GAAQ,WMtOM,SAASsD,GAKpB,QAASwC,GAAKX,GACV,GAAkBvE,SAAduE,EAAOjF,GAAX,CAGA,GAAM6F,GAAUC,EAAa3B,QAAQc,EAAOjF,IAAM,GAC5C+F,EAAatC,IAAoBwB,EAAOjF,GACxCgG,EAAW7F,EAAE,KAAM8F,KAAM,IAAKC,QAASP,EAAYvC,EAAM6B,KACjD9E,EAAT0F,EAAW,gCAAqC,kCACpC1F,EAAZ4F,EAAc,kCAAuC,8BACtD5F,EAAE,YAAa8E,EAAOkB,QAEpBC,EAAYP,EAAS5E,EAAEoF,IAAIpB,EAAOqB,SAAUV,KAC9CG,IACAK,EAASG,KAAKpG,EAAE,sBAAuBqG,IAAK,cAAerG,EAAE,KACzD8F,KAAM,IACNC,QAASjF,EAAEwF,KAAKf,EAAcgB,mBAAoB,KAAMtD,EAAM6B,EAAOjF,KACtEG,EAAE,gBAAiB,IAAMwG,QAAQ,gBAExC,IAAMC,GAAY3F,GACd4F,QAAWd,EACXe,UAAWjB,EACXkB,eAAiB9B,EAAOqB,SAAS7F,OAAS,EAC1CuG,WAAW,IACZC,KAAKhG,EAAEiG,UAAUC,OAAOC,KAAK,IAChC,OAAOjH,GAAE,MAEDqG,IAAOvB,EAAOjF,GACd4G,UAAaA,EACbS,iBAAkBpC,EAAOjF,GACzBO,OAAUkF,EAAerC,KAE5B4C,EAAWI,GAAYA,EAAS3F,OAASN,EAAE,KAAMiG,GAAY,QAnCtE,GAAM3C,GAAkBL,EAAKK,kBACvB6D,EAAalE,EAAKO,oBAClBmC,EAAe7E,EAAEsG,MAAMD,EAAY,KAqCzC,OAAOnH,GAAE,KAAMyF,EAAKxC,EAAKQ,gBNkO5B7D,EAAOD,QAAUA,EAAQ,YAIpB,SAASC,EAAQD,EAASH,GAU/B,YOxRD,SAAS6H,GAAYC,GACjBA,EAAIA,GAAKjG,MACTiG,EAAEC,kBACFD,EAAExE,iBAGC,QAASwC,GAAerC,GAC3B,IAAKA,EACD,KAAM,IAAIuE,OAAM,gBAEpB,OAAO,UAAS5F,EAAS6F,GACjBA,IAGJ7F,EAAQO,iBAAiB,WAAY,SAASmF,GAC1C,GAAMvC,GAAWnD,EAAQ8F,QAAQ3C,QAC5BA,KAGLsC,EAAYC,GACZA,EAAEK,aAAaC,WAAa,OAC5BhG,EAAQiG,UAAUC,IAAI,QACtB9H,EAAE+H,OAAOC,SAAS,WACnB,GACHpG,EAAQO,iBAAiB,YAAa,SAASmF,GAC3CD,EAAYC,GACZtH,EAAE+H,OAAOC,SAAS,UACnB,GACHpG,EAAQO,iBAAiB,YAAa,SAASmF,GAC3CD,EAAYC,GACZ1F,EAAQiG,UAAUI,OAAO,UAC1B,GACHrG,EAAQO,iBAAiB,OAAQ,SAASmF,GACtC,GAAMvC,GAAWnD,EAAQ8F,QAAQ3C,QACjCsC,GAAYC,GACZ1F,EAAQiG,UAAUI,OAAO,OACzB,IAAIC,GAAO,IACX,KACIA,EAAOC,KAAKC,MAAMd,EAAEK,aAAaU,QAAQ,SAC3C,MAAOC,IAGT,GAAa,OAATJ,GACA,GAAIA,EAAKK,OAEL,WADAC,GAAYC,SAASxF,EAAMiF,EAAKK,OAAQxD,OAGzC,CACH,GAAMxC,GAAQ+E,EAAEK,aAAapF,KAC7B,IAAIA,EAAMjC,OAAS,EAMf,MALA8B,GAAWC,gBAAgBY,EAAKX,aAAayC,GAAWxC,GACxDH,EAAWI,2BAA2B,WAClCS,EAAKR,iCAETL,GAAWM,eAInBgG,MAAM,4FAKX,QAASvH,KACZT,SAASyB,iBAAiB,YAAakF,GAAa,GACpD3G,SAASyB,iBAAiB,WAAY,SAASmF,GAC3CA,EAAEK,aAAaC,WAAa,OAC5BP,EAAYC,KACb,GACH5G,SAASyB,iBAAiB,OAAQkF,GAAa,GPqNlD1H,EAAQoD,YAAa,EACrBpD,EAAQ2F,eAAiBA,EACzB3F,EAAQwB,yBAA2BA,COlSpC,IAAMnB,GAAIR,EAAQ,GACZ4C,EAAa5C,EAAQ,GACrBgJ,EAAchJ,EAAQ,GAEfmJ,EAAe3F,OAAO4F,MAAQ5F,OAAO6F,UAAY7F,OAAO8F,QPqSpEnJ,GAAQgJ,YAAcA,GA2EjB,SAAS/I,EAAQD,EAASH,GAW/B,YQtXD,SAASuJ,KACL,GAAItC,GAAY,OAQhB,OAPIuC,GAAM1I,QAAU,IAChBmG,EACI3F,EAAEmI,IAAID,EAAO,SAACE,GRqYb,MQrYuC,SAAhBA,EAAKC,QAAqC,UAAhBD,EAAKC,SACnD,OAAS,QAIdnJ,EAAE,kBAAoByG,EAAW3F,EAAEoF,IAAI8C,EAAO,SAACE,GAClD,MAAOlJ,GAAE,kBAAoBkJ,EAAKC,QAC9BnJ,EAAE,cAAekJ,EAAKlD,MACtBhG,EAAE,mBAAoBiC,MAAO,WAAaiH,EAAKE,UAAY,GAAK,WAK5E,QAASC,KACL,GAAuB,OAAnBC,EAAyB,CACzB,GAAqB,IAAjBN,EAAM1I,OACN,MAEJgJ,GAAiB5I,SAASoB,cAAc,OACxCwH,EAAezJ,GAAK,mBACpBa,SAASiC,KAAKC,YAAY0G,GAI1BtJ,EAAES,MAAM6I,GAAiB1I,KAAMmI,EAAWvI,WAAYM,EAAEyI,OAE5DvJ,EAAE+H,SAKN,QAASyB,GAAsBC,EAAKP,EAAMQ,GAClCD,EAAIN,QAAU,MACdO,GAAQ,GAERA,EACAR,EAAKC,OAAS,SAGdD,EAAKC,OAAS,OACdD,EAAKE,SAAW,KAEpBO,WAAWjH,EAAc,GACzB,IAAIkH,GAAc,IAClB,KACI,GAAMC,GAAe1B,KAAKC,MAAMqB,EAAIK,aAChCD,IAAgBA,EAAaE,UAC7BH,EAAcC,EAAaE,SAEjC,MAAOzC,GAEL0C,QAAQC,IAAI3C,GAEhB,GAAItE,OAAOkH,SAAU,CACbR,IAAUE,IACVA,EAAcpD,QAAQ,2CAE1B,IAAM7B,IACF+E,MAAQA,EAAQlD,QAAQ,UAAY,IAAM0C,EAAKlD,KAAO,KAAO4D,EAAc,KAC3EG,QAAWL,EAAgE,KAAxDE,GAAepD,QAAQ,aAAe,IAAM0C,EAAKlD,KAExExB,GAAOK,uBAAuBF,IAItC,QAASwF,GAAYjB,GACjB,GAAoB,QAAhBA,EAAKC,OACL,OAAO,CAEXD,GAAKE,SAAW,EAChBF,EAAKC,OAAS,WAEd,IAAMiB,GAAW,GAAItB,SACrBsB,GAASC,OAAO,OAAQnB,EAAKoB,WAC7B,IAAMb,GAAM,GAAIc,eAChBd,GAAIhI,KAAK,OAAQyH,EAAKsB,KACtBf,EAAIgB,iBAAiB,cAAezH,OAAO0H,iBAAiBC,MAC5DlB,EAAImB,mBAAqB,WACE,IAAnBnB,EAAIoB,aAORrB,EAAsBC,EAAKP,GAAM,GACjC4B,MAEJrB,EAAIsB,QAAU,WACVvB,EAAsBC,EAAKP,GAAM,GACjC4B,KAEJrB,EAAIuB,OAAOC,WAAa,SAAS5J,GACzBA,EAAM6J,iBACNhC,EAAKE,SAAY/H,EAAMvB,OAASuB,EAAM8J,MAEtCjC,EAAKE,SAAWF,EAAKE,UAAY,IAAMF,EAAKE,UAAY,EAE5D0B,KAEJrB,EAAI2B,KAAKhB,GAGN,QAASiB,GAAQrG,EAAWkE,GAC/BF,EAAM5C,MACFoE,IAAKxF,EACLgB,KAAMkD,EAAKlD,KACXsE,WAAYpB,EACZC,OAAQ,MACRC,SAAU,IAIX,QAAS/G,GAAgB2C,EAAWzC,GACvCzB,EAAEwK,KAAK/I,EAAO,SAAC2G,GACXmC,EAAQrG,EAAWkE,KAIpB,QAAS1G,GAA2B+I,GACvCC,EAAuBpF,KAAKmF,GAGzB,QAAS7I,KACZ,IAAI5B,EAAE2K,IAAIzC,EAAO,SAACE,GRkYb,MQlYsC,cAAhBA,EAAKC,SAAhC,CAGA,GAAMuC,GAAW5K,EAAE6K,OAAO3C,EAAO,SAACE,GRoY7B,MQpYuD,QAAhBA,EAAKC,QAEjD,IADA2B,IACIY,EACAvB,EAAYuB,OAEZ,MAAOF,EAAuBlL,QAAQ,CAClC,GAAMsL,GAAKJ,EAAuBK,OAClCD,OR8OXjM,EAAQoD,YAAa,EACrBpD,EAAQ0L,QAAUA,EAClB1L,EAAQ0C,gBAAkBA,EAC1B1C,EAAQ6C,2BAA6BA,EACrC7C,EAAQ+C,aAAeA,CQpYxB,IAAM1C,GAAIR,EAAQ,GACZsB,EAAItB,EAAQ,GACZgF,EAAShF,EAAQ,GAEjBwJ,KACAwC,KACFlC,EAAiB,KAmCfwB,EAAsBhK,EAAEoE,SAASmE,EAAiB,KRqflD,SAASzJ,EAAQD,EAASH,GAU/B,YSviBM,SAASsM,GAAK5D,GACjB,MAAOlI,GAAE+L,SACLC,OAAQ,OACRxB,IAAKnG,SAASY,SACdiD,KAAMA,EACN9H,OAAQ,SAASqJ,GACbA,EAAIgB,iBAAiB,cAAezH,OAAO0H,iBAAiBC,SAKjE,QAASlG,GAAIyD,GAChB,MAAOlI,GAAE+L,SACLC,OAAQ,MACRxB,IAAKnG,SAASY,SACdiD,KAAMA,IAIP,QAASrD,GAAuBF,GACnC,GAAMuF,GAAWlH,OAAOkH,QACxB,IAAKA,EAAL,CAGA,GAAMH,GAAUpF,EAASoF,QACnBL,EAAQ/E,EAAS+E,KACnBA,IACAQ,EAASmB,SAASY,KAAM,QAASC,KAAMxC,IAEvCK,GACAG,EAASmB,SAASY,KAAM,OAAQC,KAAMnC,KT2gB7CpK,EAAQoD,YAAa,EACrBpD,EAAQmM,KAAOA,EACfnM,EAAQ8E,IAAMA,EACd9E,EAAQkF,uBAAyBA,CS9iBlC,IAAM7E,GAAIR,EAAQ,ITslBZ,SAASI,EAAQD,EAASH,GAU/B,YU7lBM,SAAS2M,GAAiB3L,EAAY0I,GVumBxC,GUtmBMrJ,GAAYqJ,EAAZrJ,GAAImG,EAAQkD,EAARlD,KACLoG,EAAUtL,EAAEuL,KAAKC,OAAO9F,QAAQ,kBAAmBR,IAAS,GAC9DoG,IAAWpG,IAASoG,GACpB5H,EAAOsH,MAAMhI,OAAQ,cAAejE,KAAImG,KAAMoG,IAAU1H,KAAK,SAASC,GAClEH,EAAOK,uBAAuBF,GAC9BnE,EAAW4D,yBAKhB,QAASmI,GAAiB/L,EAAY0I,GVymBxC,GUxmBMrJ,GAAYqJ,EAAZrJ,GAAImG,EAAQkD,EAARlD,IACPwG,SAAQC,YAAYjG,QAAQ,iDAAkDR,MAC9ExB,EAAOsH,MAAMhI,OAAQ,cAAejE,OAAK6E,KAAK,SAASC,GACnDH,EAAOK,uBAAuBF,GAC9BnE,EAAW4D,yBAKhB,QAASqE,GAASjI,EAAY+H,EAAQrE,GACzCM,EAAOsH,MAAMhI,OAAQ,YAAa4I,QAAWnE,EAAQoE,UAAazI,IAAcQ,KAAK,SAASC,GAC1FH,EAAOK,uBAAuBF,GAC9BnE,EAAW4D,yBVukBlBzE,EAAQoD,YAAa,EACrBpD,EAAQwM,iBAAmBA,EAC3BxM,EAAQ4M,iBAAmBA,EAC3B5M,EAAQ8I,SAAWA,CUrmBpB,IAAM3H,GAAItB,EAAQ,GACZgF,EAAShF,EAAQ,IV0oBjB,SAASI,EAAQD,EAASH,GAU/B,YWlpBM,SAAS+G,GAAmB/F,EAAYoM,GAC3C,GAAM5G,GAAOsG,OAAO9F,QAAQ,oBACvBR,IAGLxB,EAAOsH,MAAMhI,OAAQ,aAAc+I,OAAQD,EAAgB5G,SAAOtB,KAAK,SAASC,GAC5EH,EAAOK,uBAAuBF,EAC9B,IAAMmI,GAAmB,EAAInI,EAASG,OAAOjF,EAC7CW,GAAWyD,UAAU6I,GACrBtM,EAAWS,mBACXT,EAAW4D,yBAIZ,QAAS2I,GAAuBvM,GACnC,MAAO+F,GAAmB/F,EAAYA,EAAW8C,mBAG9C,QAAS0J,GAA0BxM,GX8pBrC,GAAIyM,GW7pBczM,EAAWkD,aAAvB7D,EAAEoN,EAAFpN,GAAImG,EAAIiH,EAAJjH,KACLoG,EAAUtL,EAAEuL,KAAKC,OAAO9F,QAAQ,oBAAqBR,IAAS,GAChEoG,IAAWpG,IAASoG,GACpB5H,EAAOsH,MAAMhI,OAAQ,gBAAiBjE,KAAImG,KAAMoG,IAAU1H,KAAK,SAASC,GACpEH,EAAOK,uBAAuBF,GAC9BnE,EAAWS,mBACXT,EAAW4D,yBAKhB,QAAS8I,GAA0B1M,GXkqBrC,GAAI2M,GWjqBc3M,EAAWkD,aAAvB7D,EAAEsN,EAAFtN,GAAImG,EAAImH,EAAJnH,IACPwG,SAAQC,YAAYjG,QAAQ,mDAAoDR,MAChFxB,EAAOsH,MAAMhI,OAAQ,gBAAiBjE,OAAK6E,KAAK,SAASC,GACrDH,EAAOK,uBAAuBF,EAC9B,IAAMmI,GAAmB,EAAInI,EAAST,WACtC1D,GAAWyD,UAAU6I,GACrBtM,EAAWS,mBACXT,EAAW4D,yBX8mBtBzE,EAAQoD,YAAa,EACrBpD,EAAQ4G,mBAAqBA,EAC7B5G,EAAQoN,uBAAyBA,EACjCpN,EAAQqN,0BAA4BA,EACpCrN,EAAQuN,0BAA4BA,CW3pBrC,IAAMpM,GAAItB,EAAQ,GACZgF,EAAShF,EAAQ,IXotBjB,SAASI,EAAQD,GAUtB,YAEAA,GAAQoD,YAAa,EAErBpD,EAAQ,WYnuBM,SAASsD,EAAM6B,GAC1B,MAAO,UAAqBzD,GAGxB,MAFA4B,GAAKgB,UAAUa,EAAOjF,IACtBwB,EAAMyB,kBACC,IZuuBdlD,EAAOD,QAAUA,EAAQ,YAIpB,SAASC,EAAQD,EAASH,GAU/B,YAEAG,GAAQoD,YAAa,Ca3vBtB,IAAM/C,GAAIR,EAAQ,GACZsB,EAAItB,EAAQ,GACZgG,EAAchG,EAAQ,Gb8vB3BG,GAAQ,Wa5vBM,SAASsD,GACpB,GAAMmK,MACAjG,EAAalE,EAAKO,mBAaxB,OAZA1C,GAAEwK,KAAKnE,EAAY,SAASrC,EAAQuI,GAChCD,EAAMhH,KACFpG,EAAE,qBAAuBqN,IAAUlG,EAAW7G,OAAS,EAAI,WAAa,KACpEwF,KAAM,IACNO,IAAKvB,EAAOjF,GACZkG,QAASP,EAAYvC,EAAM6B,IAC5BA,EAAOkB,OAEdoH,EAAMhH,KAAKpG,EAAE,0BAEjBoN,EAAME,MACNF,EAAMG,QAAQvN,EAAE,oCACToN,Gb6vBVxN,EAAOD,QAAUA,EAAQ,YAIpB,SAASC,EAAQD,EAASH,GAU/B,YcpxBD,SAASgO,GAAWtF,EAAMuF,GAMtB,MALAA,GAAa,eAAerI,KAAKqI,GAAc,SAC/CvF,EAAOpH,EAAE4M,OAAOxF,MAAYuF,EAAW,IACjB,MAAlBA,EAAW,KACXvF,EAAOA,EAAKyF,WAETzF,EAGI,QAAS9E,GAAWH,GAC/B,GAAMS,GAAaT,EAAKS,aAClBkK,EAAgB5N,EAAE,oCACpBsB,EAAO2B,EAAKU,SAAU,OAAQ3D,EAAE,cAAe,QAC/CsB,EAAO2B,EAAKU,SAAU,OAAQ3D,EAAE,mBAAoB,UAElD6N,EAAY7N,EAAE,8BAChBsB,EAAO2B,EAAKW,SAAU,QAAS,OAC/BtC,EAAO2B,EAAKW,SAAU,QAAS,OAC/BtC,EAAO2B,EAAKW,SAAU,QAAS4C,QAAQ,iBACvClF,EAAO2B,EAAKW,SAAU,QAAS4C,QAAQ,iBACvClF,EAAO2B,EAAKW,SAAU,QAAS4C,QAAQ,mBACvClF,EAAO2B,EAAKW,SAAU,QAAS4C,QAAQ,oBAEvCsH,EAAU9N,EAAE,mBAAoB4N,EAAeC,IAC7CtL,EAAQiL,EAAW9J,EAAWnB,UAAaU,EAAKW,YAChDmK,EAAUP,EAAW9J,EAAWqK,YAAe9K,EAAKW,YACtDoK,EAAW,KAAMC,EAAa,IAClC,IAAuB,IAAnBF,EAAQzN,QAAiC,IAAjBiC,EAAMjC,OAC9B0N,EAAWE,EAAgBjL,EAAMS,GACjCoK,EAAU,SACP,CACH,OAAQ7K,EAAKU,YACT,IAAK,OACDqK,EAAWG,EAAalL,EAAM8K,EAASxL,EACvC,MACJ,KAAK,OACDyL,EAAWI,EAAanL,EAAM8K,EAASxL,GAG/C0L,EAAajO,EAAE,kBAAmBqO,GAEtC,GAAMC,GAAYtO,EAAE,+BAChBkH,iBAAkBxD,EAAW7D,GAC7BO,OAAQkF,EAAerC,KAEvB+K,EACAC,EACAjO,EAAE,wBACEA,EAAE,YACEA,EAAE,OAAQuO,IAAKC,EAAOC,mBAE1BzO,EAAE,YACEA,EAAE0O,MAAMlI,QAAQ,8BAK5B,OAAOxG,GAAE,mBAAoB8N,EAASQ,Id6tBzC3O,EAAQoD,YAAa,EACrBpD,EAAQ,Wc9wBeyD,CAnBxB,IAAMpD,GAAIR,EAAQ,GACZ8B,EAAS9B,EAAQ,IACjBsB,EAAItB,EAAQ,GACZ0O,EAAkB1O,EAAQ,IAC1B2O,EAAe3O,EAAQ,IACvB4O,EAAe5O,EAAQ,IACvB6O,EAAuB7O,EAAQ,IdoyBhC6F,EcnyBoB7F,EAAQ,GAA1B8F,EAAcD,EAAdC,eACDkJ,EAAShP,EAAQ,Gdg1BtBI,GAAOD,QAAUA,EAAQ,YAIpB,SAASC,EAAQD,EAASH,GAU/B,YAEAG,GAAQoD,YAAa,Cex2BtB,IAAM/C,GAAIR,EAAQ,GACZsB,EAAItB,EAAQ,Ef22BjBG,GAAQ,Wez2BM,SAAS4D,EAAMoL,EAAOC,EAAOC,GACxC,GAAMC,GAAUvL,KAAUoL,CAC1B,OAAO3O,GAAE,0BAA4B8O,EAAS,UAAY,KACtD/M,KAAM,SACNgE,QAASjF,EAAEwF,KAAK/C,EAAM,KAAMoL,GAC5BE,MAAOA,GACRD,If42BNhP,EAAOD,QAAUA,EAAQ,YAIpB,SAASC,EAAQD,EAASH,GAU/B,YAEAG,GAAQoD,YAAa,CgBr4BtB,IAAM/C,GAAIR,EAAQ,GACZ6O,EAAuB7O,EAAQ,GhBw4BpCG,GAAQ,WgBt4BM,SAASsD,EAAM6B,GAC1B,MAAO9E,GAAE,oBACLA,EAAE,kBACEA,EAAE,OAAQuO,IAAK/O,EAAQ,OAE3BQ,EAAE,iBAAkBqO,MhBs4B3BzO,EAAOD,QAAUA,EAAQ,YAIpB,SAASC,EAAQD,EAASH,GAU/B,YAEAG,GAAQoD,YAAa,CiB95BtB,IAAM/C,GAAIR,EAAQ,GjBi6Bb6F,EiBh6BiB7F,EAAQ,GAAvBmJ,EAAWtD,EAAXsD,YAEDoG,EAAqBvI,QAAQ,6DAC7BwI,EACFrG,EACInC,QAAQ,sFACRuI,EAGFV,GACFrO,EAAE,4BAA6BA,EAAE0O,MAAMK,IACvC/O,EAAE,4BAA6BA,EAAE0O,MAAMM,IjB85B1CrP,GAAQ,WiB35BM0O,EjB45BdzO,EAAOD,QAAUA,EAAQ,YAIpB,SAASC,EAAQD,GkBv7BvBC,EAAAD,QAAA,0rIlB67BM,SAASC,EAAQD,EAASH,GAU/B,YAEAG,GAAQoD,YAAa,CmBj8BtB,IAAM/C,GAAIR,EAAQ,GACZsB,EAAItB,EAAQ,GACZyP,EAAezP,EAAQ,IACvB0P,EAAa1P,EAAQ,InBo8BtB6F,EmBn8BoB7F,EAAQ,GAA1B8F,EAAcD,EAAdC,eACDkJ,EAAShP,EAAQ,IACjBgC,EAAchC,EAAQ,IACtB2P,EAAkB3P,EAAQ,GnBw8B/BG,GAAQ,WmBt8BM,SAASsD,EAAM8K,EAASxL,GACnC,GAAM6M,GAActO,EAAEoF,IAAI6H,EAAS,SAASjJ,GACxC,MAAO9E,GAAE,sDACLqG,IAAK,UAAYvB,EAAOjF,GACxBqH,iBAAkBpC,EAAOjF,GACzBO,OAAQkF,EAAerC,KAEvBjD,EAAE,kBACE+F,QAAS,WAEL,MADA9C,GAAKgB,UAAUa,EAAOjF,KACf,GAEXiG,KAAM,KACP9F,EAAE,oCACLA,EAAE,gBAAiBkP,EAAWjM,EAAM6B,QAGtCuK,EAAYvO,EAAEoF,IAAI3D,EAAO,SAAS2G,GACpC,MAAOlJ,GACH,4CAEIqG,IAAK6C,EAAKrJ,GACVyP,WAAW,EACXC,YAAa,SAAClO,GACVA,EAAMkG,kBACNlG,EAAMsG,aAAa6H,cAAgB,WACnCnO,EAAMsG,aAAa8H,QAAQ,OAAQtH,KAAKuH,WAAWnH,OAAUW,EAAKrJ,KAClE,KACI,GAAM8P,GAAWjP,SAASoB,cAAc,MACxC6N,GAASpB,IAAMrF,EAAK0G,WAAapB,EAAOqB,iBACxCF,EAASG,MAAQ,IACjBzO,EAAMsG,aAAaoI,aAAaJ,EAAU,EAAG,GAC/C,MAAOrI,OAKjBtH,EAAE,8CACEqG,IAAK,UACLN,QAAS,SAAC1E,GACNG,EAAYC,KAAKJ,EAAM2O,cAAeb,EAAgBlM,EAAMiG,IAC5D7H,EAAMyB,mBAEX9C,EAAE,gBACLiP,EAAa/F,EAAM,kBACflJ,EAAE,sBAAuBuO,IAAKrF,EAAK0G,WAAapB,EAAOqB,mBACvD7P,EAAE,gBAAiBkJ,EAAKlD,UAIpC,OAAOhG,GAAE,UAAWoP,EAAYa,OAAOZ,KnB87B1CzP,EAAOD,QAAUA,EAAQ,YAIpB,SAASC,EAAQD,EAASH,GAU/B,YAEAG,GAAQoD,YAAa,CoBzgCtB,IAAM/C,GAAIR,EAAQ,GACZ0Q,EAAY1Q,EAAQ,GpB4gCzBG,GAAQ,WoB1gCM,SAASuJ,GpB2gCnB,GoB3gCyBiH,GAAG9P,UAAAC,QAAA,GAAAC,SAAAF,UAAA,GAAG,IAAGA,UAAA,GAAE+P,EAAO/P,UAAAC,QAAA,GAAAC,SAAAF,UAAA,GAAG6I,EAAKlD,KAAI3F,UAAA,EpB6gCvD,OAAO,YoB5gCR,GAAMgQ,IAASvK,KAAMoD,EAAKsB,IAAKjJ,OAAQ,UACjC+O,EAASJ,GAkBf,OAjBII,KACAD,EAAMtK,QAAU,SAAS1E,GAarB,MAZA2B,QAAOuN,OAAOC,aACV1J,MACIjH,GAAMyQ,EACNG,QACI5Q,GAAMqJ,EAAKrJ,GACXqM,KAAQhD,EAAKlD,KACbwE,IAAOtB,EAAKsB,IACZoF,UAAa1G,EAAK0G,aAG3B,KACHvO,EAAMyB,kBACC,IAGR9C,EAAEmQ,EAAKE,EAAOD,OpBihCxBxQ,EAAOD,QAAUA,EAAQ,YAIpB,SAASC,EAAQD,GAUtB,YAEAA,GAAQoD,YAAa,EAErBpD,EAAQ,WqB1jCM,WACX,GAAM+Q,GAAY,eAAetL,KAAKpC,OAAOqB,SAASsM,OACtD,OAAQD,GAAYA,EAAU,GAAK,MrB6jCtC9Q,EAAOD,QAAUA,EAAQ,YAIpB,SAASC,EAAQD,EAASH,GAU/B,YAEAG,GAAQoD,YAAa,CsB/kCtB,IAAM/C,GAAIR,EAAQ,EtBklCjBG,GAAQ,WsBhlCM,SAASsD,EAAM6B,GAC1B,MAAO9E,GAAE,KACL8F,KAAM,IAAKC,QAAS,WAEhB,MADA9C,GAAKgB,UAAUa,EAAOjF,KACf,IAEZiF,EAAOkB,OtBmlCbpG,EAAOD,QAAUA,EAAQ,YAIpB,SAASC,EAAQD,EAASH,GAU/B,YAEAG,GAAQoD,YAAa,CuB3mCf,IAAM0L,GAAkBjP,EAAQ,GvB6mCtCG,GAAQ8O,gBAAkBA,CuB5mCpB,IAAMoB,GAAmBrQ,EAAQ,GvB8mCvCG,GAAQkQ,iBAAmBA,GAItB,SAASjQ,EAAQD,GwB3nCvBC,EAAAD,QAAA,sgCxBioCM,SAASC,EAAQD,EAASH,GAU/B,YyBxnCM,SAASoR,KACZ,MAA8B,QAAtBC,GAAgD,OAAlBC,EAG1C,QAASC,KACL,GAAKH,IAAL,CAGA,GAAMI,GAAeC,EAAOJ,IAAsBK,CAClD,IAAqB,OAAjBF,EAAJ,CAGA,GAAMG,GAAYnO,OAAOoO,WACrBC,EAAIL,EAAaM,KACfC,EAAIP,EAAaQ,IAAMR,EAAaS,OAAS,EAC7CC,EAAaT,EAAOH,GACpBa,EAAYD,EAAaA,EAAW5B,MAAQ,CAC9CqB,IAAaE,EAAIM,EAAYR,EAAYS,IACzCP,EAAIA,EAAIL,EAAalB,MAAQ6B,GAGjC7Q,EAAE+Q,OAAOf,EAAc7O,OACnBC,QAAW,QACXoP,KAAWD,EAAC,KACZG,IAAUD,EAAC,KACXO,SAAY,WACZC,OAAU,QAMlB,QAASC,GAASpR,GACd,MAAO,YACH,GAAIwM,GAAQ,IAOZ,OANItM,GAAEmR,QAAQrR,KACVwM,EAAQxM,GAERE,EAAEoR,WAAWtR,KACbwM,EAAQxM,KAERE,EAAEmR,QAAQ7E,GACHpN,EACH,oBACCiC,MAAO,yDACRmL,GAGDA,GAIf,QAAS+E,KAwBL,MAvBsB,QAAlBrB,IACAA,EAAgBpQ,SAASoB,cAAc,OACvCpB,SAASiC,KAAKC,YAAYkO,GAC1B9N,OAAOb,iBAAiB,SAAUiQ,GAAc,GAChDpP,OAAOb,iBAAiB,SAAUiQ,GAAc,GAChD1R,SAASiC,KAAKR,iBAAiB,QAAS,SAASd,GAC7C,GAAKuP,QAGC,GAAIyB,MAASC,EAAqB,KAAxC,CAGA,GAAIC,GAAOlR,EAAME,MACjB,GACI,IAAIgR,IAASzB,EACT,OAAO,QAELyB,EAAOA,EAAKC,cACtBC,QACD,IAIA3B,EAGJ,QAASrP,GAAKoL,EAAQjM,GACzB,MAAIiQ,KAAsBhE,MACtB4F,MAGA5F,GACAsF,IAEJtB,EAAoBhE,EACpB6F,EAAwB9R,GAAQA,KAAMoR,EAASpR,GAAOJ,WAAYM,EAAEyI,MAAQ,KAC5E+I,GAAqB,GAAID,WACrBvB,IACA9Q,EAAES,MAAMqQ,EAAe4B,GACvBxB,EAAuBrE,EAASoE,EAAOpE,GAAU,KAC7CjM,IACAmQ,IACApH,WAAWyI,EAAc,SAK9B,QAASK,KACZhR,EAAK,KAAM,MzBqhCd9B,EAAQoD,YAAa,EACrBpD,EAAQiR,cAAgBA,EACxBjR,EAAQ8B,KAAOA,EACf9B,EAAQ8S,MAAQA,CyBxoCjB,IAAMzS,GAAIR,EAAQ,GACZsB,EAAItB,EAAQ,GACZyR,EAASzR,EAAQ,IAEnBqR,EAAoB,KACpB6B,EAAuB,KACvBxB,EAAuB,KACvBJ,EAAgB,KAChBwB,EAAoB,EAClBV,EAAc,GAgCdQ,EAAetR,EAAEoE,SAAS6L,EAAa,KzBotCvC,SAASnR,EAAQD,GAYtB,YAEAA,GAAQoD,YAAa,EAErBpD,EAAQ,W0B1wCM,SAASgT,GACpB,IAAKA,EAAKC,iBAAiBtS,OACvB,MAAO,KAGX,IAAMuS,GAAOF,EAAKG,uBAElB,KAAMD,EAAK/C,QAAS+C,EAAKpB,OACrB,MAAO,KAEX,IAAMsB,GAAMJ,EAAKK,cACXC,EAAMF,EAAIG,aAAelQ,OACzBmQ,EAAUJ,EAAIK,eAEpB,QACI5B,IAAKqB,EAAKrB,IAAMyB,EAAII,YAAcF,EAAQG,UAC1ChC,KAAMuB,EAAKvB,KAAO2B,EAAIM,YAAcJ,EAAQK,WAC5C1D,MAAO+C,EAAK/C,MACZ2B,OAAQoB,EAAKpB,S1B8wCpB7R,EAAOD,QAAUA,EAAQ,YAKpB,SAASC,EAAQD,EAASH,GAU/B,YAEAG,GAAQoD,YAAa,C2BpzCtB,IAAMyF,GAAchJ,EAAQ,GACtBiU,EAAWjU,EAAQ,G3BuzCxBG,GAAQ,W2BrzCM,SAASa,EAAY0I,GAChC,MAAO,YACH,OACIuK,EAASjN,QAAQ,eAAgB,WAC7BgC,EAAY2D,iBAAiB3L,EAAY0I,KACzCwK,SAAUlT,EAAWqD,eAAe,YACxC4P,EAASjN,QAAQ,eAAgB,WAC7BgC,EAAY+D,iBAAiB/L,EAAY0I,KACzCwK,SAAUlT,EAAWqD,eAAe,e3BuzCnDjE,EAAOD,QAAUA,EAAQ,YAIpB,SAASC,EAAQD,EAASH,GAU/B,Y4B50Cc,SAASmU,GAAK/E,EAAO9K,G5Bq1C/B,G4Br1CuCuM,GAAKhQ,UAAAC,QAAA,GAAAC,SAAAF,UAAA,MAAKA,UAAA,GAC5CuT,GAAW,KAKjB,OAJIvD,GAAMqD,WACN5P,EAAShD,EAAEyI,KACXqK,EAAQxN,KAAK,aAEVpG,EAAE4T,EAAQ3M,KAAK,KAAMjH,EAAE,KAC1B8F,KAAM,IAAKC,QAAS,SAAC1E,GACjBA,EAAMyB,iBACNgB,IACAtC,EAAYiR,UAEjB7D,I5Bk0CNjP,EAAQoD,YAAa,EACrBpD,EAAQ,W4B/0CegU,CAJxB,IAAM7S,GAAItB,EAAQ,GACZQ,EAAIR,EAAQ,GACZgC,EAAchC,EAAQ,G5Bu2C3BI,GAAOD,QAAUA,EAAQ,YAIpB,SAASC,EAAQD,EAASH,GAU/B,YAEAG,GAAQoD,YAAa,C6Bz3CtB,IAAMjC,GAAItB,EAAQ,GACZQ,EAAIR,EAAQ,GACZqU,EAASrU,EAAQ,IACjByP,EAAezP,EAAQ,IACvB0P,EAAa1P,EAAQ,IACrBgC,EAAchC,EAAQ,IACtB2P,EAAkB3P,EAAQ,G7B43C/BG,GAAQ,W6B13CM,SAASsD,EAAM8K,EAASxL,GACnC,GAAM6M,GAActO,EAAEoF,IAAI6H,EAAS,SAASjJ,GACxC,MAAO9E,GAAE,MAAOqG,IAAK,UAAYvB,EAAOjF,KACpCG,EAAE,MAAO8T,QAAS,IAAK9T,EAAE,8BAA+B,IAAKkP,EAAWjM,EAAM6B,SAGhFuK,EAAYvO,EAAEoF,IAAI3D,EAAO,SAAS2G,GACpC,MAAOlJ,GAAE,MAAOqG,IAAK6C,EAAKrJ,KACtBG,EAAE,KAAMiP,EAAa/F,IACrBlJ,EAAE,gBAAiBkJ,EAAK6K,MACxB/T,EAAE,gBAAiB6T,EAAO3K,EAAK8K,MAAMC,UACrCjU,EAAE,MAAOqG,IAAK,UACVN,QAAS,SAAC1E,GACNG,EAAYC,KAAKJ,EAAM2O,cAAeb,EAAgBlM,EAAMiG,IAC5D7H,EAAMyB,mBAEX9C,EAAE,mBAGb,OAAOA,GAAE,wBACLA,EAAE,4DACEA,EAAE,QAASA,EAAE,KAAMc,EAAEoF,KAAKM,QAAQ,QAASA,QAAQ,QAASA,QAAQ,QAASA,QAAQ,SAAU,SAASqI,GACpG,MAAO7O,GAAE,KAAM6O,OAEnB7O,EAAE,QAASoP,EAAYa,OAAOZ,S7Bm3CzCzP,EAAOD,QAAUA,EAAQ,YAIpB,SAASC,EAAQD,G8B/5CvBC,EAAAD,QAAAqD,OAAA6Q,Q9Bq6CM,SAASjU,EAAQD,EAASH,GAW/B,YAEAG,GAAQoD,YAAa,C+Bz6CtB,IAAMjC,GAAItB,EAAQ,E/B46CjBG,GAAQ,W+B16CM,SAAS8D,EAAYsB,GAGhC,QAASU,GAAKX,EAAQqC,GAClB,MAAIrC,GAAOjF,IAAMkF,OACbmP,EAAe/M,EAAW8I,QAAQnL,MAGtCqC,KAAgB8I,OAAO9I,GAAY8I,QAAQnL,QAC3ChE,GAAEwK,KAAKxG,EAAOqB,SAAU,SAASrB,GACxBoP,GACDzO,EAAKX,EAAQqC,MAVzB,GAAI+M,GAAe,IAgBnB,OADAzO,GAAKhC,MACEyQ,O/B66CVtU,EAAOD,QAAUA,EAAQ,YAIpB,SAASC,EAAQD,EAASH,GAW/B,YAEAG,GAAQoD,YAAa,CgCj9CtB,IAAMwC,GAAgB/F,EAAQ,GACxBiU,EAAWjU,EAAQ,GhCo9CxBG,GAAQ,WgCl9CM,SAASa,GACpB,MAAO,YACH,GAAM2T,GAAgD,KAAtC,EAAI3T,EAAW8C,kBAC/B,QACImQ,EAASjN,QAAQ,cAAe,WAC5BjB,EAAcwH,uBAAuBvM,KACrCkT,SAAUlT,EAAWqD,eAAe,SACxC4P,EAASjN,QAAQ,iBAAkB,WAC/BjB,EAAcyH,0BAA0BxM,KACxCkT,SAAUS,GAAU3T,EAAWqD,eAAe,YAClD4P,EAASjN,QAAQ,iBAAkB,WAC/BjB,EAAc2H,0BAA0B1M,KACxCkT,SAAUS,GAAU3T,EAAWqD,eAAe,ehCm9C7DjE,EAAOD,QAAUA,EAAQ","file":"media-browser.js","sourcesContent":["var MediaBrowser =\n/******/ (function(modules) { // webpackBootstrap\n/******/ \t// The module cache\n/******/ \tvar installedModules = {};\n/******/\n/******/ \t// The require function\n/******/ \tfunction __webpack_require__(moduleId) {\n/******/\n/******/ \t\t// Check if module is in cache\n/******/ \t\tif(installedModules[moduleId])\n/******/ \t\t\treturn installedModules[moduleId].exports;\n/******/\n/******/ \t\t// Create a new module (and put it into the cache)\n/******/ \t\tvar module = installedModules[moduleId] = {\n/******/ \t\t\texports: {},\n/******/ \t\t\tid: moduleId,\n/******/ \t\t\tloaded: false\n/******/ \t\t};\n/******/\n/******/ \t\t// Execute the module function\n/******/ \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n/******/\n/******/ \t\t// Flag the module as loaded\n/******/ \t\tmodule.loaded = true;\n/******/\n/******/ \t\t// Return the exports of the module\n/******/ \t\treturn module.exports;\n/******/ \t}\n/******/\n/******/\n/******/ \t// expose the modules object (__webpack_modules__)\n/******/ \t__webpack_require__.m = modules;\n/******/\n/******/ \t// expose the module cache\n/******/ \t__webpack_require__.c = installedModules;\n/******/\n/******/ \t// __webpack_public_path__\n/******/ \t__webpack_require__.p = \"\";\n/******/\n/******/ \t// Load entry module and return exports\n/******/ \treturn __webpack_require__(0);\n/******/ })\n/************************************************************************/\n/******/ ([\n/* 0 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t/**\n\t * This file is part of Shuup.\n\t *\n\t * Copyright (c) 2012-2017, Shoop Commerce Ltd. All rights reserved.\n\t *\n\t * This source code is licensed under the OSL-3.0 license found in the\n\t * LICENSE file in the root directory of this source tree.\n\t */\n\t\n\t\"use strict\";\n\t\n\texports.__esModule = true;\n\texports.init = init;\n\texports.openFolderContextMenu = openFolderContextMenu;\n\texports.setupUploadButton = setupUploadButton;\n\tvar _ = __webpack_require__(1);\n\tvar m = __webpack_require__(2);\n\tvar BrowserView = __webpack_require__(3);\n\tvar dragDrop = __webpack_require__(5);\n\tvar FileUpload = __webpack_require__(6);\n\tvar menuManager = __webpack_require__(23);\n\tvar folderContextMenu = __webpack_require__(30);\n\t\n\tvar controller = null;\n\t\n\tfunction init() {\n\t    var config = arguments.length <= 0 || arguments[0] === undefined ? {} : arguments[0];\n\t\n\t    if (controller !== null) {\n\t        return;\n\t    }\n\t    controller = m.mount(document.getElementById(\"BrowserView\"), {\n\t        view: BrowserView.view,\n\t        controller: _.partial(BrowserView.controller, config)\n\t    });\n\t    controller.navigateByHash();\n\t    controller.reloadFolderTree();\n\t\n\t    dragDrop.disableIntraPageDragDrop();\n\t}\n\t\n\tfunction openFolderContextMenu(event) {\n\t    var button = event.target;\n\t    menuManager.open(button, folderContextMenu(controller));\n\t}\n\t\n\tfunction setupUploadButton(element) {\n\t    var input = document.createElement(\"input\");\n\t    input.type = \"file\";\n\t    input.multiple = true;\n\t    input.style.display = \"none\";\n\t    input.addEventListener(\"change\", function (event) {\n\t        FileUpload.enqueueMultiple(controller.getUploadUrl(), event.target.files);\n\t        FileUpload.addQueueCompletionCallback(function () {\n\t            controller.reloadFolderContentsSoon();\n\t        });\n\t        FileUpload.processQueue();\n\t    });\n\t    document.body.appendChild(input);\n\t    element.addEventListener(\"click\", function (event) {\n\t        input.click();\n\t        event.preventDefault();\n\t    }, false);\n\t}\n\n/***/ },\n/* 1 */\n/***/ function(module, exports) {\n\n\tmodule.exports = window._;\n\n/***/ },\n/* 2 */\n/***/ function(module, exports) {\n\n\tmodule.exports = window.m;\n\n/***/ },\n/* 3 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t/**\n\t * This file is part of Shuup.\n\t *\n\t * Copyright (c) 2012-2017, Shoop Commerce Ltd. All rights reserved.\n\t *\n\t * This source code is licensed under the OSL-3.0 license found in the\n\t * LICENSE file in the root directory of this source tree.\n\t */\n\t/* eslint-disable no-bitwise */\n\t\n\t\"use strict\";\n\t\n\texports.__esModule = true;\n\texports.view = view;\n\texports.controller = controller;\n\tvar m = __webpack_require__(2);\n\tvar _ = __webpack_require__(1);\n\t\n\tvar folderTree = __webpack_require__(4);\n\tvar folderBreadcrumbs = __webpack_require__(11);\n\tvar folderView = __webpack_require__(12);\n\tvar findPathToFolder = __webpack_require__(29);\n\tvar remote = __webpack_require__(7);\n\t\n\tfunction view(ctrl) {\n\t    return m(\"div.container-fluid\", [m(\"div.row\", [m(\"div.col-md-3.page-inner-navigation.folder-tree\", folderTree(ctrl)), m(\"div.col-md-9.page-content\", m(\"div.content-block\", [m(\"div.title\", folderBreadcrumbs(ctrl)), m(\"div.content\", folderView(ctrl))]))])]);\n\t}\n\t\n\tfunction controller() {\n\t    var config = arguments.length <= 0 || arguments[0] === undefined ? {} : arguments[0];\n\t\n\t    var ctrl = this;\n\t    ctrl.currentFolderId = m.prop(null);\n\t    ctrl.currentFolderPath = m.prop([]);\n\t    ctrl.rootFolder = m.prop({});\n\t    ctrl.folderData = m.prop({});\n\t    ctrl.viewMode = m.prop(\"grid\");\n\t    ctrl.sortMode = m.prop(\"+name\");\n\t\n\t    ctrl.isMenuDisabled = function (action) {\n\t        return (config.disabledMenus || []).indexOf(action) >= 0;\n\t    };\n\t    ctrl.setFolder = function (newFolderId) {\n\t        newFolderId = 0 | newFolderId;\n\t        if (ctrl.currentFolderId() === newFolderId) {\n\t            return; // Nothing to do, don't cause trouble\n\t        }\n\t        ctrl.currentFolderId(0 | newFolderId);\n\t        ctrl._refreshCurrentFolderPath();\n\t        ctrl.reloadFolderContents();\n\t        location.hash = \"#!id=\" + newFolderId;\n\t    };\n\t    ctrl._refreshCurrentFolderPath = function () {\n\t        var currentFolderId = ctrl.currentFolderId();\n\t        if (currentFolderId === null) {\n\t            return; // Nothing loaded yet; defer to later\n\t        }\n\t        ctrl.currentFolderPath(findPathToFolder(ctrl.rootFolder(), currentFolderId));\n\t    };\n\t    ctrl.reloadFolderTree = function () {\n\t        remote.get({ \"action\": \"folders\" }).then(function (response) {\n\t            ctrl.rootFolder(response.rootFolder);\n\t            ctrl._refreshCurrentFolderPath();\n\t        });\n\t    };\n\t    ctrl.reloadFolderContents = function () {\n\t        var id = 0 | ctrl.currentFolderId();\n\t        remote.get({ \"action\": \"folder\", id: id, filter: config.filter }).then(function (response) {\n\t            remote.handleResponseMessages(response);\n\t            ctrl.folderData(response.folder || {});\n\t        });\n\t    };\n\t\n\t    ctrl.getUploadUrl = function (folderId) {\n\t        var uploadUrl = window.location.pathname;\n\t        folderId = folderId === undefined ? ctrl.currentFolderId() : folderId;\n\t        return uploadUrl + \"?action=upload&folder_id=\" + folderId;\n\t    };\n\t    ctrl.reloadFolderContentsSoon = _.debounce(ctrl.reloadFolderContents, 1000);\n\t\n\t    ctrl.navigateByHash = function () {\n\t        var currentIdMatch = /#!id=(\\d+)/.exec(location.hash);\n\t        var newFolderId = currentIdMatch ? currentIdMatch[1] : 0;\n\t        ctrl.setFolder(newFolderId);\n\t    };\n\t\n\t    window.addEventListener(\"hashchange\", function () {\n\t        ctrl.navigateByHash();\n\t    }, false);\n\t}\n\n/***/ },\n/* 4 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t/**\n\t * This file is part of Shuup.\n\t *\n\t * Copyright (c) 2012-2017, Shoop Commerce Ltd. All rights reserved.\n\t *\n\t * This source code is licensed under the OSL-3.0 license found in the\n\t * LICENSE file in the root directory of this source tree.\n\t */\n\t\"use strict\";\n\t\n\texports.__esModule = true;\n\tvar m = __webpack_require__(2);\n\tvar _ = __webpack_require__(1);\n\t\n\tvar _require = __webpack_require__(5);\n\t\n\tvar dropzoneConfig = _require.dropzoneConfig;\n\t\n\tvar folderActions = __webpack_require__(9);\n\tvar folderClick = __webpack_require__(10);\n\t\n\texports[\"default\"] = function (ctrl) {\n\t    var currentFolderId = ctrl.currentFolderId();\n\t    var folderPath = ctrl.currentFolderPath();\n\t    var idsToCurrent = _.pluck(folderPath, \"id\");\n\t\n\t    function walk(folder) {\n\t        if (folder.id === undefined) {\n\t            return;\n\t        }\n\t        var inPath = idsToCurrent.indexOf(folder.id) > -1;\n\t        var isCurrent = currentFolderId === folder.id;\n\t        var nameLink = m(\"a\", { href: \"#\", onclick: folderClick(ctrl, folder) }, [inPath ? m(\"i.caret-icon.fa.fa-caret-down\") : m(\"i.caret-icon.fa.fa-caret-right\"), isCurrent ? m(\"i.folder-icon.fa.fa-folder-open\") : m(\"i.folder-icon.fa.fa-folder\"), m(\"span.name\", folder.name)]);\n\t        var childLis = inPath ? _.map(folder.children, walk) : [];\n\t        if (isCurrent) {\n\t            childLis.push(m(\"li.new-folder-item\", { key: \"new-folder\" }, m(\"a\", {\n\t                href: \"#\",\n\t                onclick: _.bind(folderActions.promptCreateFolder, null, ctrl, folder.id)\n\t            }, m(\"i.fa.fa-plus\"), \" \" + gettext(\"New folder\"))));\n\t        }\n\t        var className = _({\n\t            \"current\": isCurrent,\n\t            \"in-path\": inPath,\n\t            \"has-children\": folder.children.length > 0,\n\t            \"fd-zone\": true\n\t        }).pick(_.identity).keys().join(\" \");\n\t        return m(\"li\", {\n\t            \"key\": folder.id,\n\t            \"className\": className,\n\t            \"data-folder-id\": folder.id,\n\t            \"config\": dropzoneConfig(ctrl)\n\t        }, [nameLink, childLis && childLis.length ? m(\"ul\", childLis) : null]);\n\t    }\n\t\n\t    return m(\"ul\", walk(ctrl.rootFolder()));\n\t};\n\t\n\tmodule.exports = exports[\"default\"];\n\n/***/ },\n/* 5 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t/**\n\t * This file is part of Shuup.\n\t *\n\t * Copyright (c) 2012-2017, Shoop Commerce Ltd. All rights reserved.\n\t *\n\t * This source code is licensed under the OSL-3.0 license found in the\n\t * LICENSE file in the root directory of this source tree.\n\t */\n\t\"use strict\";\n\t\n\texports.__esModule = true;\n\texports.dropzoneConfig = dropzoneConfig;\n\texports.disableIntraPageDragDrop = disableIntraPageDragDrop;\n\tvar m = __webpack_require__(2);\n\tvar FileUpload = __webpack_require__(6);\n\tvar fileActions = __webpack_require__(8);\n\t\n\tvar supportsDnD = window.File && window.FileList && window.FormData;\n\t\n\texports.supportsDnD = supportsDnD;\n\tfunction ignoreEvent(e) {\n\t    e = e || event;\n\t    e.stopPropagation();\n\t    e.preventDefault();\n\t}\n\t\n\tfunction dropzoneConfig(ctrl) {\n\t    if (!ctrl) {\n\t        throw new Error(\"ctrl required\");\n\t    }\n\t    return function (element, isInitialized) {\n\t        if (isInitialized) {\n\t            return;\n\t        }\n\t        element.addEventListener(\"dragover\", function (e) {\n\t            var folderId = element.dataset.folderId;\n\t            if (!folderId) {\n\t                return;\n\t            }\n\t            ignoreEvent(e);\n\t            e.dataTransfer.dropEffect = \"copy\";\n\t            element.classList.add(\"over\");\n\t            m.redraw.strategy(\"none\");\n\t        }, false);\n\t        element.addEventListener(\"dragenter\", function (e) {\n\t            ignoreEvent(e);\n\t            m.redraw.strategy(\"none\");\n\t        }, false);\n\t        element.addEventListener(\"dragleave\", function (e) {\n\t            ignoreEvent(e);\n\t            element.classList.remove(\"over\");\n\t        }, false);\n\t        element.addEventListener(\"drop\", function (e) {\n\t            var folderId = element.dataset.folderId;\n\t            ignoreEvent(e);\n\t            element.classList.remove(\"over\");\n\t            var data = null;\n\t            try {\n\t                data = JSON.parse(e.dataTransfer.getData(\"text\"));\n\t            } catch (exc) {\n\t                // not JSON, I guess\n\t            }\n\t            if (data !== null) {\n\t                if (data.fileId) {\n\t                    fileActions.moveFile(ctrl, data.fileId, folderId);\n\t                    return;\n\t                }\n\t            } else {\n\t                var files = e.dataTransfer.files;\n\t                if (files.length > 0) {\n\t                    FileUpload.enqueueMultiple(ctrl.getUploadUrl(folderId), files);\n\t                    FileUpload.addQueueCompletionCallback(function () {\n\t                        ctrl.reloadFolderContentsSoon();\n\t                    });\n\t                    FileUpload.processQueue();\n\t                    return;\n\t                }\n\t            }\n\t            alert(\"Sorry! You can only drop files here (from your computer or within the file manager).\");\n\t        });\n\t    };\n\t}\n\t\n\tfunction disableIntraPageDragDrop() {\n\t    document.addEventListener(\"dragstart\", ignoreEvent, false);\n\t    document.addEventListener(\"dragover\", function (e) {\n\t        e.dataTransfer.dropEffect = \"none\";\n\t        ignoreEvent(e);\n\t    }, false);\n\t    document.addEventListener(\"drop\", ignoreEvent, false);\n\t}\n\n/***/ },\n/* 6 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t/**\n\t * This file is part of Shuup.\n\t *\n\t * Copyright (c) 2012-2017, Shoop Commerce Ltd. All rights reserved.\n\t *\n\t * This source code is licensed under the OSL-3.0 license found in the\n\t * LICENSE file in the root directory of this source tree.\n\t */\n\t\n\t\"use strict\";\n\t\n\texports.__esModule = true;\n\texports.enqueue = enqueue;\n\texports.enqueueMultiple = enqueueMultiple;\n\texports.addQueueCompletionCallback = addQueueCompletionCallback;\n\texports.processQueue = processQueue;\n\tvar m = __webpack_require__(2);\n\tvar _ = __webpack_require__(1);\n\tvar remote = __webpack_require__(7);\n\t\n\tvar queue = [];\n\tvar queueCompleteCallbacks = [];\n\tvar queueStatusDiv = null;\n\t\n\tfunction queueView() {\n\t    var className = \"empty\";\n\t    if (queue.length >= 0) {\n\t        className = _.all(queue, function (file) {\n\t            return file.status === \"done\" || file.status === \"error\";\n\t        }) ? \"done\" : \"busy\";\n\t    }\n\t\n\t    return m(\"div.queue-view.\" + className, _.map(queue, function (file) {\n\t        return m(\"div.queue-file.\" + file.status, [m(\"div.qf-name\", file.name), m(\"div.qf-progress\", { style: \"width: \" + (file.progress || 0) + \"%\" })]);\n\t    }));\n\t}\n\t\n\tfunction updateQueueView() {\n\t    if (queueStatusDiv === null) {\n\t        if (queue.length === 0) {\n\t            return; // Don't bother setting up the div if we're not doing anything actually\n\t        }\n\t        queueStatusDiv = document.createElement(\"div\");\n\t        queueStatusDiv.id = \"queue-status-ctr\";\n\t        document.body.appendChild(queueStatusDiv);\n\t\n\t        // Yes, we're throwing away the ctrl instance; we don't need it\n\t        // and eslint would kvetch about it otherwise :)\n\t        m.mount(queueStatusDiv, { view: queueView, controller: _.noop });\n\t    }\n\t    m.redraw(); // XXX: It would be nice if we could redraw only one Mithril view...\n\t}\n\t\n\tvar updateQueueViewSoon = _.debounce(updateQueueView, 50);\n\t\n\tfunction handleFileXhrComplete(xhr, file, error) {\n\t    if (xhr.status >= 400) {\n\t        error = true;\n\t    }\n\t    if (error) {\n\t        file.status = \"error\";\n\t    } else {\n\t        file.status = \"done\";\n\t        file.progress = 100;\n\t    }\n\t    setTimeout(processQueue, 50); // Continue soon.\n\t    var messageText = null;\n\t    try {\n\t        var responseJson = JSON.parse(xhr.responseText);\n\t        if (responseJson && responseJson.message) {\n\t            messageText = responseJson.message;\n\t        }\n\t    } catch (e) {\n\t        // invalid JSON? pffff.\n\t        console.log(e); // eslint-disable-line\n\t    }\n\t    if (window.Messages) {\n\t        if (error && !messageText) {\n\t            messageText = gettext(\"Unexpected error while uploading files.\");\n\t        }\n\t        var response = {\n\t            error: error ? gettext(\"Error:\") + \" \" + file.name + \": \" + messageText : null,\n\t            message: !error ? messageText || gettext(\"Uploaded:\") + \" \" + file.name : null\n\t        };\n\t        remote.handleResponseMessages(response);\n\t    }\n\t}\n\t\n\tfunction beginUpload(file) {\n\t    if (file.status !== \"new\") {\n\t        // Already uploaded? Huh.\n\t        return false;\n\t    }\n\t    file.progress = 0;\n\t    file.status = \"uploading\";\n\t\n\t    var formData = new FormData();\n\t    formData.append(\"file\", file.nativeFile);\n\t    var xhr = new XMLHttpRequest();\n\t    xhr.open(\"POST\", file.url);\n\t    xhr.setRequestHeader(\"X-CSRFToken\", window.ShuupAdminConfig.csrf);\n\t    xhr.onreadystatechange = function () {\n\t        if (xhr.readyState !== 4) {\n\t            // Ready state 4:\n\t            // .. The data transfer has been completed or something went\n\t            // .. wrong during the transfer (e.g. infinite redirects).\n\t            // That's the only case we want to handle, so return otherwise.\n\t            return;\n\t        }\n\t        handleFileXhrComplete(xhr, file, false);\n\t        updateQueueViewSoon();\n\t    };\n\t    xhr.onerror = function () {\n\t        handleFileXhrComplete(xhr, file, true);\n\t        updateQueueViewSoon();\n\t    };\n\t    xhr.upload.onprogress = function (event) {\n\t        if (event.lengthComputable) {\n\t            file.progress = event.loaded / event.total;\n\t        } else {\n\t            file.progress = file.progress + (100 - file.progress) / 2;\n\t        }\n\t        updateQueueViewSoon();\n\t    };\n\t    xhr.send(formData);\n\t}\n\t\n\tfunction enqueue(uploadUrl, file) {\n\t    queue.push({\n\t        url: uploadUrl,\n\t        name: file.name,\n\t        nativeFile: file,\n\t        status: \"new\", // \"new\"/\"uploading\"/\"error\"/\"done\"\n\t        progress: 0\n\t    });\n\t}\n\t\n\tfunction enqueueMultiple(uploadUrl, files) {\n\t    _.each(files, function (file) {\n\t        enqueue(uploadUrl, file);\n\t    });\n\t}\n\t\n\tfunction addQueueCompletionCallback(callback) {\n\t    queueCompleteCallbacks.push(callback);\n\t}\n\t\n\tfunction processQueue() {\n\t    if (_.any(queue, function (file) {\n\t        return file.status === \"uploading\";\n\t    })) {\n\t        return; // Don't allow uploading multiple files simultaneously though...\n\t    }\n\t    var nextFile = _.detect(queue, function (file) {\n\t        return file.status === \"new\";\n\t    });\n\t    updateQueueViewSoon();\n\t    if (nextFile) {\n\t        beginUpload(nextFile);\n\t    } else {\n\t        while (queueCompleteCallbacks.length) {\n\t            var cb = queueCompleteCallbacks.shift();\n\t            cb();\n\t        }\n\t    }\n\t}\n\n/***/ },\n/* 7 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t/**\n\t * This file is part of Shuup.\n\t *\n\t * Copyright (c) 2012-2017, Shoop Commerce Ltd. All rights reserved.\n\t *\n\t * This source code is licensed under the OSL-3.0 license found in the\n\t * LICENSE file in the root directory of this source tree.\n\t */\n\t\"use strict\";\n\t\n\texports.__esModule = true;\n\texports.post = post;\n\texports.get = get;\n\texports.handleResponseMessages = handleResponseMessages;\n\tvar m = __webpack_require__(2);\n\t\n\tfunction post(data) {\n\t    return m.request({\n\t        method: \"POST\",\n\t        url: location.pathname,\n\t        data: data,\n\t        config: function config(xhr) {\n\t            xhr.setRequestHeader(\"X-CSRFToken\", window.ShuupAdminConfig.csrf);\n\t        }\n\t    });\n\t}\n\t\n\tfunction get(data) {\n\t    return m.request({\n\t        method: \"GET\",\n\t        url: location.pathname,\n\t        data: data\n\t    });\n\t}\n\t\n\tfunction handleResponseMessages(response) {\n\t    var Messages = window.Messages;\n\t    if (!Messages) {\n\t        // Messages module not available for whichever reason\n\t        return;\n\t    }\n\t    var message = response.message;\n\t    var error = response.error;\n\t    if (error) {\n\t        Messages.enqueue({ tags: \"error\", text: error });\n\t    }\n\t    if (message) {\n\t        Messages.enqueue({ tags: \"info\", text: message });\n\t    }\n\t}\n\n/***/ },\n/* 8 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t/**\n\t * This file is part of Shuup.\n\t *\n\t * Copyright (c) 2012-2017, Shoop Commerce Ltd. All rights reserved.\n\t *\n\t * This source code is licensed under the OSL-3.0 license found in the\n\t * LICENSE file in the root directory of this source tree.\n\t */\n\t\"use strict\";\n\t\n\texports.__esModule = true;\n\texports.promptRenameFile = promptRenameFile;\n\texports.promptDeleteFile = promptDeleteFile;\n\texports.moveFile = moveFile;\n\tvar _ = __webpack_require__(1);\n\tvar remote = __webpack_require__(7);\n\t\n\tfunction promptRenameFile(controller, file) {\n\t    var id = file.id;\n\t    var name = file.name;\n\t\n\t    var newName = _.trim(prompt(gettext(\"New file name?\"), name) || \"\");\n\t    if (newName && name !== newName) {\n\t        remote.post({ action: \"rename_file\", id: id, name: newName }).then(function (response) {\n\t            remote.handleResponseMessages(response);\n\t            controller.reloadFolderContents();\n\t        });\n\t    }\n\t}\n\t\n\tfunction promptDeleteFile(controller, file) {\n\t    var id = file.id;\n\t    var name = file.name;\n\t\n\t    if (confirm(interpolate(gettext(\"Are you sure you want to delete the file %s?\"), [name]))) {\n\t        remote.post({ action: \"delete_file\", id: id }).then(function (response) {\n\t            remote.handleResponseMessages(response);\n\t            controller.reloadFolderContents();\n\t        });\n\t    }\n\t}\n\t\n\tfunction moveFile(controller, fileId, newFolderId) {\n\t    remote.post({ action: \"move_file\", \"file_id\": fileId, \"folder_id\": newFolderId }).then(function (response) {\n\t        remote.handleResponseMessages(response);\n\t        controller.reloadFolderContents();\n\t    });\n\t}\n\n/***/ },\n/* 9 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t/**\n\t * This file is part of Shuup.\n\t *\n\t * Copyright (c) 2012-2017, Shoop Commerce Ltd. All rights reserved.\n\t *\n\t * This source code is licensed under the OSL-3.0 license found in the\n\t * LICENSE file in the root directory of this source tree.\n\t */\n\t\"use strict\";\n\t\n\texports.__esModule = true;\n\texports.promptCreateFolder = promptCreateFolder;\n\texports.promptCreateFolderHere = promptCreateFolderHere;\n\texports.promptRenameCurrentFolder = promptRenameCurrentFolder;\n\texports.promptDeleteCurrentFolder = promptDeleteCurrentFolder;\n\tvar _ = __webpack_require__(1);\n\tvar remote = __webpack_require__(7);\n\t\n\tfunction promptCreateFolder(controller, parentFolderId) {\n\t    var name = prompt(gettext(\"New folder name?\"));\n\t    if (!name) {\n\t        // Cancelled? :(\n\t        return;\n\t    }\n\t    remote.post({ action: \"new_folder\", parent: parentFolderId, name: name }).then(function (response) {\n\t        remote.handleResponseMessages(response);\n\t        var newCurrentFolder = 0 | response.folder.id; // eslint-disable-line no-bitwise\n\t        controller.setFolder(newCurrentFolder);\n\t        controller.reloadFolderTree();\n\t        controller.reloadFolderContents();\n\t    });\n\t}\n\t\n\tfunction promptCreateFolderHere(controller) {\n\t    return promptCreateFolder(controller, controller.currentFolderId());\n\t}\n\t\n\tfunction promptRenameCurrentFolder(controller) {\n\t    var _controller$folderData = controller.folderData();\n\t\n\t    var id = _controller$folderData.id;\n\t    var name = _controller$folderData.name;\n\t\n\t    var newName = _.trim(prompt(gettext(\"New folder name?\"), name) || \"\");\n\t    if (newName && name !== newName) {\n\t        remote.post({ action: \"rename_folder\", id: id, name: newName }).then(function (response) {\n\t            remote.handleResponseMessages(response);\n\t            controller.reloadFolderTree();\n\t            controller.reloadFolderContents();\n\t        });\n\t    }\n\t}\n\t\n\tfunction promptDeleteCurrentFolder(controller) {\n\t    var _controller$folderData2 = controller.folderData();\n\t\n\t    var id = _controller$folderData2.id;\n\t    var name = _controller$folderData2.name;\n\t\n\t    if (confirm(interpolate(gettext(\"Are you sure you want to delete the %s folder?\"), [name]))) {\n\t        remote.post({ action: \"delete_folder\", id: id }).then(function (response) {\n\t            remote.handleResponseMessages(response);\n\t            var newCurrentFolder = 0 | response.newFolderId; // eslint-disable-line no-bitwise\n\t            controller.setFolder(newCurrentFolder);\n\t            controller.reloadFolderTree();\n\t            controller.reloadFolderContents();\n\t        });\n\t    }\n\t}\n\n/***/ },\n/* 10 */\n/***/ function(module, exports) {\n\n\t/**\n\t * This file is part of Shuup.\n\t *\n\t * Copyright (c) 2012-2017, Shoop Commerce Ltd. All rights reserved.\n\t *\n\t * This source code is licensed under the OSL-3.0 license found in the\n\t * LICENSE file in the root directory of this source tree.\n\t */\n\t\"use strict\";\n\t\n\texports.__esModule = true;\n\t\n\texports[\"default\"] = function (ctrl, folder) {\n\t    return function clickFolder(event) {\n\t        ctrl.setFolder(folder.id);\n\t        event.preventDefault();\n\t        return false;\n\t    };\n\t};\n\t\n\tmodule.exports = exports[\"default\"];\n\n/***/ },\n/* 11 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t/**\n\t * This file is part of Shuup.\n\t *\n\t * Copyright (c) 2012-2017, Shoop Commerce Ltd. All rights reserved.\n\t *\n\t * This source code is licensed under the OSL-3.0 license found in the\n\t * LICENSE file in the root directory of this source tree.\n\t */\n\t\"use strict\";\n\t\n\texports.__esModule = true;\n\tvar m = __webpack_require__(2);\n\tvar _ = __webpack_require__(1);\n\tvar folderClick = __webpack_require__(10);\n\t\n\texports[\"default\"] = function (ctrl) {\n\t    var items = [];\n\t    var folderPath = ctrl.currentFolderPath();\n\t    _.each(folderPath, function (folder, index) {\n\t        items.push(m(\"a.breadcrumb-link\" + (index === folderPath.length - 1 ? \".current\" : \"\"), {\n\t            href: \"#\",\n\t            key: folder.id,\n\t            onclick: folderClick(ctrl, folder)\n\t        }, folder.name));\n\t        items.push(m(\"i.fa.fa-angle-right\"));\n\t    });\n\t    items.pop(); // pop last chevron\n\t    items.unshift(m(\"i.fa.fa-folder-open.folder-icon\"));\n\t    return items;\n\t};\n\t\n\tmodule.exports = exports[\"default\"];\n\n/***/ },\n/* 12 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t/**\n\t * This file is part of Shuup.\n\t *\n\t * Copyright (c) 2012-2017, Shoop Commerce Ltd. All rights reserved.\n\t *\n\t * This source code is licensed under the OSL-3.0 license found in the\n\t * LICENSE file in the root directory of this source tree.\n\t */\n\t\"use strict\";\n\t\n\texports.__esModule = true;\n\texports[\"default\"] = folderView;\n\tvar m = __webpack_require__(2);\n\tvar button = __webpack_require__(13);\n\tvar _ = __webpack_require__(1);\n\tvar emptyFolderView = __webpack_require__(14);\n\tvar gridFileView = __webpack_require__(17);\n\tvar listFileView = __webpack_require__(27);\n\tvar responsiveUploadHint = __webpack_require__(15);\n\t\n\tvar _require = __webpack_require__(5);\n\t\n\tvar dropzoneConfig = _require.dropzoneConfig;\n\t\n\tvar images = __webpack_require__(21);\n\t\n\tfunction sortBySpec(data, sortString) {\n\t    sortString = /^([+-])(.+)$/.exec(sortString || \"+name\");\n\t    data = _.sortBy(data || [], sortString[2]);\n\t    if (sortString[1] === \"-\") {\n\t        data = data.reverse();\n\t    }\n\t    return data;\n\t}\n\t\n\tfunction folderView(ctrl) {\n\t    var folderData = ctrl.folderData();\n\t    var viewModeGroup = m(\"div.btn-group.btn-group-sm.icons\", [button(ctrl.viewMode, \"grid\", m(\"i.fa.fa-th\"), \"Grid\"), button(ctrl.viewMode, \"list\", m(\"i.fa.fa-th-list\"), \"List\")]);\n\t    var sortGroup = m(\"div.btn-group.btn-group-sm\", [button(ctrl.sortMode, \"+name\", \"A-Z\"), button(ctrl.sortMode, \"-name\", \"Z-A\"), button(ctrl.sortMode, \"+date\", gettext(\"Oldest first\")), button(ctrl.sortMode, \"-date\", gettext(\"Newest first\")), button(ctrl.sortMode, \"+size\", gettext(\"Smallest first\")), button(ctrl.sortMode, \"-size\", gettext(\"Largest first\"))]);\n\t    var toolbar = m(\"div.btn-toolbar\", [viewModeGroup, sortGroup]);\n\t    var files = sortBySpec(folderData.files || [], ctrl.sortMode());\n\t    var folders = sortBySpec(folderData.folders || [], ctrl.sortMode());\n\t    var contents = null,\n\t        uploadHint = null;\n\t    if (folders.length === 0 && files.length === 0) {\n\t        contents = emptyFolderView(ctrl, folderData);\n\t        toolbar = null;\n\t    } else {\n\t        switch (ctrl.viewMode()) {\n\t            case \"grid\":\n\t                contents = gridFileView(ctrl, folders, files);\n\t                break;\n\t            case \"list\":\n\t                contents = listFileView(ctrl, folders, files);\n\t                break;\n\t        }\n\t        uploadHint = m(\"div.upload-hint\", responsiveUploadHint);\n\t    }\n\t    var container = m(\"div.folder-contents.fd-zone\", {\n\t        \"data-folder-id\": folderData.id,\n\t        config: dropzoneConfig(ctrl)\n\t    }, [contents, uploadHint, m(\"div.upload-indicator\", [m(\"div.image\", m(\"img\", { src: images.uploadIndicator })), m(\"div.text\", [m.trust(gettext(\"Drop your files here\"))])])]);\n\t\n\t    return m(\"div.folder-view\", [toolbar, container]);\n\t}\n\t\n\tmodule.exports = exports[\"default\"];\n\n/***/ },\n/* 13 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t/**\n\t * This file is part of Shuup.\n\t *\n\t * Copyright (c) 2012-2017, Shoop Commerce Ltd. All rights reserved.\n\t *\n\t * This source code is licensed under the OSL-3.0 license found in the\n\t * LICENSE file in the root directory of this source tree.\n\t */\n\t\"use strict\";\n\t\n\texports.__esModule = true;\n\tvar m = __webpack_require__(2);\n\tvar _ = __webpack_require__(1);\n\t\n\texports[\"default\"] = function (prop, value, label, title) {\n\t    var active = prop() == value; // eslint-disable-line eqeqeq\n\t    return m(\"button.btn.btn-default\" + (active ? \".active\" : \"\"), {\n\t        type: \"button\",\n\t        onclick: _.bind(prop, null, value),\n\t        title: title\n\t    }, label);\n\t};\n\t\n\tmodule.exports = exports[\"default\"];\n\n/***/ },\n/* 14 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t/**\n\t * This file is part of Shuup.\n\t *\n\t * Copyright (c) 2012-2017, Shoop Commerce Ltd. All rights reserved.\n\t *\n\t * This source code is licensed under the OSL-3.0 license found in the\n\t * LICENSE file in the root directory of this source tree.\n\t */\n\t\"use strict\";\n\t\n\texports.__esModule = true;\n\tvar m = __webpack_require__(2);\n\tvar responsiveUploadHint = __webpack_require__(15);\n\t\n\texports[\"default\"] = function (ctrl, folder) {\n\t    // eslint-disable-line no-unused-vars\n\t    return m(\"div.empty-folder\", [m(\"div.empty-image\", m(\"img\", { src: __webpack_require__(16) })), m(\"div.empty-text\", responsiveUploadHint)]);\n\t};\n\t\n\tmodule.exports = exports[\"default\"];\n\n/***/ },\n/* 15 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t/**\n\t * This file is part of Shuup.\n\t *\n\t * Copyright (c) 2012-2017, Shoop Commerce Ltd. All rights reserved.\n\t *\n\t * This source code is licensed under the OSL-3.0 license found in the\n\t * LICENSE file in the root directory of this source tree.\n\t */\n\t\"use strict\";\n\t\n\texports.__esModule = true;\n\tvar m = __webpack_require__(2);\n\t\n\tvar _require = __webpack_require__(5);\n\t\n\tvar supportsDnD = _require.supportsDnD;\n\t\n\tvar NO_DND_UPLOAD_HINT = gettext(\"Click the <strong>Upload</strong> button to upload files.\");\n\tvar DND_UPLOAD_HINT = supportsDnD ? gettext(\"<span>Drag and drop</span> files here<br> or click the <span>Upload</span> button.\") : NO_DND_UPLOAD_HINT;\n\t\n\tvar responsiveUploadHint = [m(\"div.visible-sm.visible-xs\", m.trust(NO_DND_UPLOAD_HINT)), m(\"div.visible-md.visible-lg\", m.trust(DND_UPLOAD_HINT))];\n\t\n\texports[\"default\"] = responsiveUploadHint;\n\tmodule.exports = exports[\"default\"];\n\n/***/ },\n/* 16 */\n/***/ function(module, exports) {\n\n\tmodule.exports = \"data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCA2MDAgNDAwIj48cGF0aCBmaWxsPSIjREREIiBkPSJNNTYxLjUgMTY2LjRjLTEuMS0yLjYtMi40LTQuNi0zLjktNi4xTDUzMi40IDEzNWMtMS41LTEuNS0zLjYtMi44LTYuMS0zLjktMi42LTEuMS01LTEuNi03LjEtMS42aC03Mi41Yy0yLjIgMC00IC44LTUuNSAyLjMtMS41IDEuNS0yLjMgMy4zLTIuMyA1LjV2MTI5LjNjMCAyLjIuOCA0IDIuMyA1LjUgMS41IDEuNSAzLjMgMi4zIDUuNSAyLjNoMTA4LjdjMi4yIDAgNC0uOCA1LjUtMi4zIDEuNS0xLjUgMi4zLTMuMyAyLjMtNS41di05My4xYy0uMS0yLjItLjYtNC41LTEuNy03LjF6bS0zOS44LTI1LjljMS42LjUgMi43IDEuMSAzLjMgMS44bDI1LjMgMjUuM2MuNi42IDEuMiAxLjggMS44IDMuM2gtMzAuNHYtMzAuNHpNNTUyLjggMjY0SDQ0OS4yVjEzOS45aDYyLjF2MzMuNmMwIDIuMi44IDQgMi4zIDUuNSAxLjUgMS41IDMuMyAyLjMgNS41IDIuM2gzMy43VjI2NHptLTgyLjEtNzEuN2MtLjUuNS0uNyAxLjEtLjcgMS45djUuMmMwIC44LjIgMS40LjcgMS45czEuMS43IDEuOS43aDU3Yy44IDAgMS40LS4yIDEuOS0uN3MuNy0xLjEuNy0xLjl2LTUuMmMwLS44LS4yLTEuNC0uNy0xLjlzLTEuMS0uNy0xLjktLjdoLTU3Yy0uOCAwLTEuNS4yLTEuOS43em01OC44IDQwLjdoLTU3Yy0uOCAwLTEuNC4yLTEuOS43LS41LjUtLjcgMS4xLS43IDEuOXY1LjJjMCAuOC4yIDEuNC43IDEuOXMxLjEuNyAxLjkuN2g1N2MuOCAwIDEuNC0uMiAxLjktLjdzLjctMS4xLjctMS45di01LjJjMC0uOC0uMi0xLjQtLjctMS45LS41LS41LTEuMi0uNy0xLjktLjd6bTAtMjAuN2gtNTdjLS44IDAtMS40LjItMS45LjdzLS43IDEuMS0uNyAxLjl2NS4yYzAgLjguMiAxLjQuNyAxLjlzMS4xLjcgMS45LjdoNTdjLjggMCAxLjQtLjIgMS45LS43cy43LTEuMS43LTEuOXYtNS4yYzAtLjgtLjItMS40LS43LTEuOXMtMS4yLS43LTEuOS0uN3pNMTA5LjMgMjE2LjFjLTQuOS00LTguOC0xMC40LTExLjgtMTkuMi42LTMuNyAxLTguOSAxLjEtMTUuNVYxNzljMC0uMyAwLS41LS4xLS42LjEtLjEuMi0uMy4zLS42LjUtMi41LjItNC40LS43LTUuNS0uNi0uOC0xLjYtMS4yLTIuOC0xLjJoLTEuOGMtMS43IDAtMi44IDEuMS0zLjQgMy4yLS43IDIuNy0uOSA2LjEtLjUgMTAuMy40IDQuMiAxLjIgOC41IDIuNSAxMi45LTEuOSA2LjgtNC43IDEzLjgtOC40IDIxLjItMyA2LTUuOSAxMS4zLTguNyAxNS45IDAtLjEtLjEtLjItLjItLjMtLjUtLjgtMS4xLTEtMS45LS41LTQuNiAyLjQtOC4xIDUtMTAuNyA3LjgtMi41IDIuOC00IDUuMi00LjUgNy40LS4yIDEuNC0uMSAyLjQuNSAyLjkuMy4yLjQuNC41LjRsMS45IDFjLjcuNCAxLjUuNiAyLjMuNiA0LjggMCAxMS4zLTcuMSAxOS42LTIxLjIgOS4yLTMuMiAxOS44LTUuNCAzMS43LTYuNyAzLjQgMS44IDYuOSAzLjIgMTAuNSA0LjMgMy42IDEuMSA2LjcgMS42IDkuMyAxLjYgMy41IDAgNS40LTEgNS43LTMuMXYtLjFsLjItLjJjLjEtLjEuMS0uMS4xLS4yLjgtMS42LjctMy0uMi00LjItMS42LTIuNi02LjQtNC0xNC4zLTQtMy4xIDAtNi4zLjItOS41LjYtMi42LTEuNy00LjktMy4yLTYuNy00LjZ6bS00Ni42IDMzLjJjLjctMS42IDItMy42IDQtNnM0LjMtNC42IDcuMS02LjhjLTQuNiA3LjItOC4zIDExLjUtMTEuMSAxMi44em0zMi4yLTc0LjR2LS4yYy4xLS4xLjEtLjEuMS0uMi42LjggMSAxLjcgMS4xIDIuOXYuMmMwIC4xIDAgLjEuMS4yLS4yLjItLjMuNC0uMy42LS40IDIuMi0uNiAzLjMtLjYgMy41LS4zIDItLjUgMy4yLS42IDMuNi0uNi00LjgtLjYtOC4zLjItMTAuNnptLTEwIDUzLjRjLjgtMS41IDItMy43IDMuNi02LjcgMy02IDUuMy0xMS4zIDYuNy0xNS45IDIuOCA1LjkgNi4yIDEwLjYgMTAuMyAxNC4yLjMuMy43LjYgMS4zIDEuMS42LjUuOS43IDEuMS44LTguMSAxLjUtMTUuNyAzLjYtMjMgNi41em01Mi4zLTEuMmwuMi4yYy0uMi4xLS43LjEtMS41LjEtMi42IDAtNS45LS44LTEwLTIuMyA2LjIgMCAxMCAuNyAxMS4zIDJ6bTIyLjQtNjAuN2MtMS4xLTIuNi0yLjQtNC42LTMuOS02LjFMMTMwLjUgMTM1Yy0xLjUtMS41LTMuNi0yLjgtNi4xLTMuOS0yLjYtMS4xLTUtMS42LTcuMS0xLjZINDQuOGMtMi4yIDAtNCAuOC01LjUgMi4zLTEuNSAxLjUtMi4zIDMuMy0yLjMgNS41djEyOS4zYzAgMi4yLjggNCAyLjMgNS41IDEuNSAxLjUgMy4zIDIuMyA1LjUgMi4zaDEwOC43YzIuMiAwIDQtLjggNS41LTIuMyAxLjUtMS41IDIuMy0zLjMgMi4zLTUuNXYtOTMuMWMwLTIuMi0uNi00LjUtMS43LTcuMXptLTM5LjgtMjUuOWMxLjYuNSAyLjcgMS4xIDMuMyAxLjhsMjUuMyAyNS4zYy42LjYgMS4yIDEuOCAxLjggMy4zaC0zMC40di0zMC40ek0xNTAuOSAyNjRINDcuNFYxMzkuOWg2Mi4xdjMzLjZjMCAyLjIuOCA0IDIuMyA1LjUgMS41IDEuNSAzLjMgMi4zIDUuNSAyLjNIMTUxVjI2NHpNMjUwLjcgMjIwLjdjOC4yIDAgMTUuMi0yLjkgMjEtOC42IDUuOC01LjcgOC42LTEyLjcgOC42LTIwLjlzLTIuOS0xNS4yLTguNi0yMC45Yy01LjgtNS43LTEyLjctOC42LTIxLTguNi04LjIgMC0xNS4yIDIuOS0yMSA4LjYtNS44IDUuOC04LjYgMTIuNy04LjYgMjAuOXMyLjkgMTUuMiA4LjYgMjAuOWM1LjggNS43IDEyLjggOC42IDIxIDguNnptMTkuOCAzOS40bC0xOS43LTE5LjctMjkuNyAyOS42djI5LjZIMzc5di00OS4zTDMyOS43IDIwMWwtNTkuMiA1OS4xem0xNDQuOS0xMjYuOWMtMi4xLTQuOS00LjUtOC44LTcuNC0xMS43bC00OC4xLTQ4LjFjLTIuOS0yLjktNi44LTUuMy0xMS43LTcuNC00LjktMi4xLTkuNS0zLjEtMTMuNi0zLjFIMTk2LjRjLTQuMSAwLTcuNiAxLjQtMTAuNSA0LjMtMi45IDIuOS00LjMgNi40LTQuMyAxMC41djI0Ni40YzAgNC4xIDEuNCA3LjYgNC4zIDEwLjUgMi45IDIuOSA2LjQgNC4zIDEwLjUgNC4zaDIwNy4yYzQuMSAwIDcuNi0xLjQgMTAuNS00LjMgMi45LTIuOSA0LjMtNi40IDQuMy0xMC41VjE0Ni44Yy4xLTQuMS0uOS04LjYtMy0xMy42em0tNzUuOS00OS4zYzMgMSA1LjEgMi4yIDYuMyAzLjRsNDguMyA0OC4yYzEuMiAxLjIgMi40IDMuMyAzLjQgNi4zaC01OFY4My45em01OS4yIDIzNS40SDIwMS40VjgyLjdoMTE4LjR2NjQuMWMwIDQuMSAxLjQgNy42IDQuMyAxMC41IDIuOSAyLjkgNi40IDQuMyAxMC41IDQuM2g2NC4xdjE1Ny43eiIvPjwvc3ZnPg==\"\n\n/***/ },\n/* 17 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t/**\n\t * This file is part of Shuup.\n\t *\n\t * Copyright (c) 2012-2017, Shoop Commerce Ltd. All rights reserved.\n\t *\n\t * This source code is licensed under the OSL-3.0 license found in the\n\t * LICENSE file in the root directory of this source tree.\n\t */\n\t\"use strict\";\n\t\n\texports.__esModule = true;\n\tvar m = __webpack_require__(2);\n\tvar _ = __webpack_require__(1);\n\tvar wrapFileLink = __webpack_require__(18);\n\tvar folderLink = __webpack_require__(20);\n\t\n\tvar _require = __webpack_require__(5);\n\t\n\tvar dropzoneConfig = _require.dropzoneConfig;\n\t\n\tvar images = __webpack_require__(21);\n\tvar menuManager = __webpack_require__(23);\n\tvar fileContextMenu = __webpack_require__(25);\n\t\n\texports[\"default\"] = function (ctrl, folders, files) {\n\t    var folderItems = _.map(folders, function (folder) {\n\t        return m(\"div.col-xs-6.col-md-4.col-lg-3.grid-folder.fd-zone\", {\n\t            key: \"folder-\" + folder.id,\n\t            \"data-folder-id\": folder.id,\n\t            config: dropzoneConfig(ctrl)\n\t        }, [m(\"a.file-preview\", {\n\t            onclick: function onclick() {\n\t                ctrl.setFolder(folder.id);\n\t                return false;\n\t            },\n\t            href: \"#\"\n\t        }, m(\"i.fa.fa-folder-open.folder-icon\")), m(\"div.file-name\", folderLink(ctrl, folder))]);\n\t    });\n\t    var fileItems = _.map(files, function (file) {\n\t        return m(\"div.col-xs-6.col-md-4.col-lg-3.grid-file\", {\n\t            key: file.id,\n\t            draggable: true,\n\t            ondragstart: function ondragstart(event) {\n\t                event.stopPropagation();\n\t                event.dataTransfer.effectAllowed = \"copyMove\";\n\t                event.dataTransfer.setData(\"text\", JSON.stringify({ \"fileId\": file.id }));\n\t                try {\n\t                    var dragIcon = document.createElement(\"img\");\n\t                    dragIcon.src = file.thumbnail || images.defaultThumbnail;\n\t                    dragIcon.width = 100;\n\t                    event.dataTransfer.setDragImage(dragIcon, 0, 0);\n\t                } catch (e) {\n\t                    // This isn't a problem\n\t                }\n\t            }\n\t        }, m(\"button.file-cog-btn.btn.btn-xs.btn-default\", {\n\t            key: \"filecog\",\n\t            onclick: function onclick(event) {\n\t                menuManager.open(event.currentTarget, fileContextMenu(ctrl, file));\n\t                event.preventDefault();\n\t            }\n\t        }, m(\"i.fa.fa-cog\")), wrapFileLink(file, \"a.file-preview\", [m(\"img.img-responsive\", { src: file.thumbnail || images.defaultThumbnail }), m(\"div.file-name\", file.name)]));\n\t    });\n\t    return m(\"div.row\", folderItems.concat(fileItems));\n\t};\n\t\n\tmodule.exports = exports[\"default\"];\n\n/***/ },\n/* 18 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t/**\n\t * This file is part of Shuup.\n\t *\n\t * Copyright (c) 2012-2017, Shoop Commerce Ltd. All rights reserved.\n\t *\n\t * This source code is licensed under the OSL-3.0 license found in the\n\t * LICENSE file in the root directory of this source tree.\n\t */\n\t\"use strict\";\n\t\n\texports.__esModule = true;\n\tvar m = __webpack_require__(2);\n\tvar getPickId = __webpack_require__(19);\n\t\n\texports[\"default\"] = function (file) {\n\t    var tag = arguments.length <= 1 || arguments[1] === undefined ? \"a\" : arguments[1];\n\t    var content = arguments.length <= 2 || arguments[2] === undefined ? file.name : arguments[2];\n\t    return (function () {\n\t        var attrs = { href: file.url, target: \"_blank\" };\n\t        var pickId = getPickId();\n\t        if (pickId) {\n\t            attrs.onclick = function (event) {\n\t                window.opener.postMessage({\n\t                    \"pick\": {\n\t                        \"id\": pickId,\n\t                        \"object\": {\n\t                            \"id\": file.id,\n\t                            \"text\": file.name,\n\t                            \"url\": file.url,\n\t                            \"thumbnail\": file.thumbnail\n\t                        }\n\t                    }\n\t                }, \"*\");\n\t                event.preventDefault();\n\t                return false;\n\t            };\n\t        }\n\t        return m(tag, attrs, content);\n\t    })();\n\t};\n\t\n\tmodule.exports = exports[\"default\"];\n\n/***/ },\n/* 19 */\n/***/ function(module, exports) {\n\n\t/**\n\t * This file is part of Shuup.\n\t *\n\t * Copyright (c) 2012-2017, Shoop Commerce Ltd. All rights reserved.\n\t *\n\t * This source code is licensed under the OSL-3.0 license found in the\n\t * LICENSE file in the root directory of this source tree.\n\t */\n\t\"use strict\";\n\t\n\texports.__esModule = true;\n\t\n\texports[\"default\"] = function () {\n\t  var pickMatch = /pick=([^&]+)/.exec(window.location.search);\n\t  return pickMatch ? pickMatch[1] : null;\n\t};\n\t\n\tmodule.exports = exports[\"default\"];\n\n/***/ },\n/* 20 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t/**\n\t * This file is part of Shuup.\n\t *\n\t * Copyright (c) 2012-2017, Shoop Commerce Ltd. All rights reserved.\n\t *\n\t * This source code is licensed under the OSL-3.0 license found in the\n\t * LICENSE file in the root directory of this source tree.\n\t */\n\t\"use strict\";\n\t\n\texports.__esModule = true;\n\tvar m = __webpack_require__(2);\n\t\n\texports[\"default\"] = function (ctrl, folder) {\n\t    return m(\"a\", {\n\t        href: \"#\", onclick: function onclick() {\n\t            ctrl.setFolder(folder.id);\n\t            return false;\n\t        }\n\t    }, folder.name);\n\t};\n\t\n\tmodule.exports = exports[\"default\"];\n\n/***/ },\n/* 21 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t/**\n\t * This file is part of Shuup.\n\t *\n\t * Copyright (c) 2012-2017, Shoop Commerce Ltd. All rights reserved.\n\t *\n\t * This source code is licensed under the OSL-3.0 license found in the\n\t * LICENSE file in the root directory of this source tree.\n\t */\n\t\"use strict\";\n\t\n\texports.__esModule = true;\n\tvar uploadIndicator = __webpack_require__(16);\n\texports.uploadIndicator = uploadIndicator;\n\tvar defaultThumbnail = __webpack_require__(22);\n\texports.defaultThumbnail = defaultThumbnail;\n\n/***/ },\n/* 22 */\n/***/ function(module, exports) {\n\n\tmodule.exports = \"data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCAxNDUgMTQ1IiBoZWlnaHQ9IjE0NSIgd2lkdGg9IjE0NSI+PHBhdGggZD0iTTEyNC41IDEzNC45NjhoLTEwNHYtMTI0aDYyYy4wOTUgMTEuMTM4LS4xOTIgMjIuODkyLjE0OCAzNC42MDggMS4xMzcgNS40MDcgNi43MjIgNi45MjMgMTEuMjg3IDYuMzkySDEyNC41djgyLjU5M3pNOTMuMSAxMC45NzVjNC40MzggMS42OCA3LjA0NyA2LjA3IDEwLjU2NCA5LjA5NiA2LjEyIDYuMjEyIDEyLjM5IDEyLjI4NyAxOC40MTYgMTguNTgyIDMuNjIgNC42NjMtMi4yODcgMi45OS00Ljc0OCAzLjMxNkg5My41VjEwLjk3NXptMzkuNzA0IDI1LjkxOGMtMi44MTgtNi41NDctOC45NDYtMTAuNjYtMTMuNTY3LTE1Ljg1LTUuODM0LTUuNjgyLTExLjI5OC0xMS43OC0xNy4zODgtMTcuMTc2LTYuNTQyLTUuMTYtMTQuOTg0LTMuNjk0LTIyLjY3LTMuOS0yMC41NjguMDI2LTQxLjEzOC0uMDUtNjEuNzAzLjAzOC01LjQzMi4zODctNy42MiA2LjA5LTYuOTc3IDEwLjgyNS4wMjUgNDIuMzgtLjA1IDg0Ljc2LjAzNyAxMjcuMTQuMzg2IDUuNDQ4IDYuMDcgNy42NDMgMTAuNzkgNi45OTggMzUuNC0uMDI1IDcwLjguMDUgMTA2LjE5Ni0uMDM4IDUuNDMyLS4zODYgNy42Mi02LjA5IDYuOTc3LTEwLjgyNC0uMDM4LTMwLjMxMi4wNzUtNjAuNjMtLjA1Ny05MC45NC0uMTkyLTIuMTY0LS43OTQtNC4yNzYtMS42NC02LjI3M3oiIGZpbGw9IiNkZGQiLz48L3N2Zz4=\"\n\n/***/ },\n/* 23 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t/**\n\t * This file is part of Shuup.\n\t *\n\t * Copyright (c) 2012-2017, Shoop Commerce Ltd. All rights reserved.\n\t *\n\t * This source code is licensed under the OSL-3.0 license found in the\n\t * LICENSE file in the root directory of this source tree.\n\t */\n\t\"use strict\";\n\t\n\texports.__esModule = true;\n\texports.isMenuVisible = isMenuVisible;\n\texports.open = open;\n\texports.close = close;\n\tvar m = __webpack_require__(2);\n\tvar _ = __webpack_require__(1);\n\tvar offset = __webpack_require__(24);\n\t\n\tvar currentMenuParent = null;\n\tvar currentMenuComponent = null;\n\tvar fallbackParentCoords = null;\n\tvar menuContainer = null;\n\tvar currentMenuOpenTs = 0;\n\tvar widthMargin = 20;\n\t\n\tfunction isMenuVisible() {\n\t    return currentMenuParent !== null && menuContainer !== null;\n\t}\n\t\n\tfunction reattachNow() {\n\t    if (!isMenuVisible()) {\n\t        return;\n\t    }\n\t    var parentCoords = offset(currentMenuParent) || fallbackParentCoords;\n\t    if (parentCoords === null) {\n\t        return;\n\t    }\n\t    var viewWidth = window.innerWidth;\n\t    var x = parentCoords.left;\n\t    var y = parentCoords.top + parentCoords.height + 5;\n\t    var menuOffset = offset(menuContainer);\n\t    var menuWidth = menuOffset ? menuOffset.width : 0; // ah well\n\t    if (viewWidth && x + menuWidth > viewWidth - widthMargin) {\n\t        x = x + parentCoords.width - menuWidth;\n\t    }\n\t\n\t    _.assign(menuContainer.style, {\n\t        \"display\": \"block\",\n\t        \"left\": x + \"px\",\n\t        \"top\": y + \"px\",\n\t        \"position\": \"absolute\",\n\t        \"zIndex\": 9000\n\t    });\n\t}\n\t\n\tvar reattachSoon = _.debounce(reattachNow, 20);\n\t\n\tfunction menuView(view) {\n\t    return function () {\n\t        var items = null;\n\t        if (_.isArray(view)) {\n\t            // It's already an array of items, fine\n\t            items = view;\n\t        }\n\t        if (_.isFunction(view)) {\n\t            // It's a function returning something..?\n\t            items = view();\n\t        }\n\t        if (_.isArray(items)) {\n\t            // If it was items, wrap them.\n\t            return m(\"ul.dropdown-menu\", { style: \"display: block; float: none; position: static; top: 0\" }, items);\n\t        }\n\t        return items;\n\t    };\n\t}\n\t\n\tfunction initializeMenuContainer() {\n\t    if (menuContainer === null) {\n\t        menuContainer = document.createElement(\"div\");\n\t        document.body.appendChild(menuContainer);\n\t        window.addEventListener(\"resize\", reattachSoon, false);\n\t        window.addEventListener(\"scroll\", reattachSoon, false);\n\t        document.body.addEventListener(\"click\", function (event) {\n\t            if (!isMenuVisible()) {\n\t                return;\n\t            }\n\t            if (+new Date() - currentMenuOpenTs < 200) {\n\t                return; // Ignore mis-taps within a short time of the opening click\n\t            }\n\t            var node = event.target;\n\t            do {\n\t                if (node === menuContainer) {\n\t                    return false;\n\t                }\n\t            } while (node = node.parentElement);\n\t            close();\n\t        }, false);\n\t\n\t        //setInterval(reattachSoon, 100);\n\t    }\n\t    return menuContainer;\n\t}\n\t\n\tfunction open(parent, view) {\n\t    if (currentMenuParent === parent) {\n\t        close();\n\t        return;\n\t    }\n\t    if (parent) {\n\t        initializeMenuContainer();\n\t    }\n\t    currentMenuParent = parent;\n\t    currentMenuComponent = view ? { view: menuView(view), controller: _.noop } : null;\n\t    currentMenuOpenTs = +new Date();\n\t    if (menuContainer) {\n\t        m.mount(menuContainer, currentMenuComponent);\n\t        fallbackParentCoords = parent ? offset(parent) : null;\n\t        if (view) {\n\t            reattachNow();\n\t            setTimeout(reattachSoon, 100);\n\t        }\n\t    }\n\t}\n\t\n\tfunction close() {\n\t    open(null, null);\n\t}\n\n/***/ },\n/* 24 */\n/***/ function(module, exports) {\n\n\t/**\n\t * This file is part of Shuup.\n\t *\n\t * Copyright (c) 2012-2017, Shoop Commerce Ltd. All rights reserved.\n\t *\n\t * This source code is licensed under the OSL-3.0 license found in the\n\t * LICENSE file in the root directory of this source tree.\n\t */\n\t\n\t// adapted from\n\t\"use strict\";\n\t\n\texports.__esModule = true;\n\t\n\texports[\"default\"] = function (elem) {\n\t    if (!elem.getClientRects().length) {\n\t        return null;\n\t    }\n\t\n\t    var rect = elem.getBoundingClientRect();\n\t\n\t    if (!(rect.width || rect.height)) {\n\t        return null;\n\t    }\n\t    var doc = elem.ownerDocument;\n\t    var win = doc.defaultView || window;\n\t    var docElem = doc.documentElement;\n\t\n\t    return {\n\t        top: rect.top + win.pageYOffset - docElem.clientTop,\n\t        left: rect.left + win.pageXOffset - docElem.clientLeft,\n\t        width: rect.width,\n\t        height: rect.height\n\t    };\n\t};\n\t\n\tmodule.exports = exports[\"default\"];\n\t// https://github.com/jquery/jquery/blob/250a1990baa571de60325ab2c52eabb399c4cf9e/src/offset.js#L76-L116\n\n/***/ },\n/* 25 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t/**\n\t * This file is part of Shuup.\n\t *\n\t * Copyright (c) 2012-2017, Shoop Commerce Ltd. All rights reserved.\n\t *\n\t * This source code is licensed under the OSL-3.0 license found in the\n\t * LICENSE file in the root directory of this source tree.\n\t */\n\t\"use strict\";\n\t\n\texports.__esModule = true;\n\tvar fileActions = __webpack_require__(8);\n\tvar menuItem = __webpack_require__(26);\n\t\n\texports[\"default\"] = function (controller, file) {\n\t    return function () {\n\t        return [menuItem(gettext(\"Rename file\"), function () {\n\t            fileActions.promptRenameFile(controller, file);\n\t        }, { disabled: controller.isMenuDisabled(\"rename\") }), menuItem(gettext(\"Delete file\"), function () {\n\t            fileActions.promptDeleteFile(controller, file);\n\t        }, { disabled: controller.isMenuDisabled(\"delete\") })];\n\t    };\n\t};\n\t\n\tmodule.exports = exports[\"default\"];\n\n/***/ },\n/* 26 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t/**\n\t * This file is part of Shuup.\n\t *\n\t * Copyright (c) 2012-2017, Shoop Commerce Ltd. All rights reserved.\n\t *\n\t * This source code is licensed under the OSL-3.0 license found in the\n\t * LICENSE file in the root directory of this source tree.\n\t */\n\t\"use strict\";\n\t\n\texports.__esModule = true;\n\texports[\"default\"] = item;\n\tvar _ = __webpack_require__(1);\n\tvar m = __webpack_require__(2);\n\tvar menuManager = __webpack_require__(23);\n\t\n\tfunction item(label, action) {\n\t    var attrs = arguments.length <= 2 || arguments[2] === undefined ? {} : arguments[2];\n\t\n\t    var tagBits = [\"li\"];\n\t    if (attrs.disabled) {\n\t        action = _.noop;\n\t        tagBits.push(\"disabled\");\n\t    }\n\t    return m(tagBits.join(\".\"), m(\"a\", {\n\t        href: \"#\", onclick: function onclick(event) {\n\t            event.preventDefault();\n\t            action();\n\t            menuManager.close();\n\t        }\n\t    }, label));\n\t}\n\t\n\tmodule.exports = exports[\"default\"];\n\n/***/ },\n/* 27 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t/**\n\t * This file is part of Shuup.\n\t *\n\t * Copyright (c) 2012-2017, Shoop Commerce Ltd. All rights reserved.\n\t *\n\t * This source code is licensed under the OSL-3.0 license found in the\n\t * LICENSE file in the root directory of this source tree.\n\t */\n\t\"use strict\";\n\t\n\texports.__esModule = true;\n\tvar _ = __webpack_require__(1);\n\tvar m = __webpack_require__(2);\n\tvar moment = __webpack_require__(28);\n\tvar wrapFileLink = __webpack_require__(18);\n\tvar folderLink = __webpack_require__(20);\n\tvar menuManager = __webpack_require__(23);\n\tvar fileContextMenu = __webpack_require__(25);\n\t\n\texports[\"default\"] = function (ctrl, folders, files) {\n\t    var folderItems = _.map(folders, function (folder) {\n\t        return m(\"tr\", { key: \"folder-\" + folder.id }, [m(\"td\", { colspan: 4 }, [m(\"i.fa.fa-folder.folder-icon\"), \" \", folderLink(ctrl, folder)])]);\n\t    });\n\t    var fileItems = _.map(files, function (file) {\n\t        return m(\"tr\", { key: file.id }, [m(\"td\", wrapFileLink(file)), m(\"td.text-right\", file.size), m(\"td.text-right\", moment(file.date).format()), m(\"td\", { key: \"filecog\",\n\t            onclick: function onclick(event) {\n\t                menuManager.open(event.currentTarget, fileContextMenu(ctrl, file));\n\t                event.preventDefault();\n\t            }\n\t        }, m(\"i.fa.fa-cog\"))]);\n\t    });\n\t    return m(\"div.table-responsive\", [m(\"table.table.table-condensed.table-striped.table-bordered\", [m(\"thead\", m(\"tr\", _.map([gettext(\"Name\"), gettext(\"Size\"), gettext(\"Date\"), gettext(\"Edit\")], function (title) {\n\t        return m(\"th\", title);\n\t    }))), m(\"tbody\", folderItems.concat(fileItems))])]);\n\t};\n\t\n\tmodule.exports = exports[\"default\"];\n\n/***/ },\n/* 28 */\n/***/ function(module, exports) {\n\n\tmodule.exports = window.moment;\n\n/***/ },\n/* 29 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t/**\n\t * This file is part of Shuup.\n\t *\n\t * Copyright (c) 2012-2017, Shoop Commerce Ltd. All rights reserved.\n\t *\n\t * This source code is licensed under the OSL-3.0 license found in the\n\t * LICENSE file in the root directory of this source tree.\n\t */\n\t/* eslint-disable no-shadow,eqeqeq */\n\t\"use strict\";\n\t\n\texports.__esModule = true;\n\tvar _ = __webpack_require__(1);\n\t\n\texports[\"default\"] = function (rootFolder, folderId) {\n\t    var pathToFolder = null;\n\t\n\t    function walk(folder, folderPath) {\n\t        if (folder.id == folderId) {\n\t            pathToFolder = folderPath.concat([folder]);\n\t            return;\n\t        }\n\t        folderPath = [].concat(folderPath).concat([folder]);\n\t        _.each(folder.children, function (folder) {\n\t            if (!pathToFolder) {\n\t                walk(folder, folderPath);\n\t            }\n\t        });\n\t    }\n\t\n\t    walk(rootFolder, []);\n\t    return pathToFolder || [];\n\t};\n\t\n\tmodule.exports = exports[\"default\"];\n\n/***/ },\n/* 30 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t/**\n\t * This file is part of Shuup.\n\t *\n\t * Copyright (c) 2012-2017, Shoop Commerce Ltd. All rights reserved.\n\t *\n\t * This source code is licensed under the OSL-3.0 license found in the\n\t * LICENSE file in the root directory of this source tree.\n\t */\n\t/* eslint-disable no-bitwise */\n\t\"use strict\";\n\t\n\texports.__esModule = true;\n\tvar folderActions = __webpack_require__(9);\n\tvar menuItem = __webpack_require__(26);\n\t\n\texports[\"default\"] = function (controller) {\n\t    return function () {\n\t        var isRoot = (0 | controller.currentFolderId()) === 0;\n\t        return [menuItem(gettext(\"New folder\"), function () {\n\t            folderActions.promptCreateFolderHere(controller);\n\t        }, { disabled: controller.isMenuDisabled(\"new\") }), menuItem(gettext(\"Rename folder\"), function () {\n\t            folderActions.promptRenameCurrentFolder(controller);\n\t        }, { disabled: isRoot || controller.isMenuDisabled(\"rename\") }), menuItem(gettext(\"Delete folder\"), function () {\n\t            folderActions.promptDeleteCurrentFolder(controller);\n\t        }, { disabled: isRoot || controller.isMenuDisabled(\"delete\") })];\n\t    };\n\t};\n\t\n\tmodule.exports = exports[\"default\"];\n\n/***/ }\n/******/ ]);\n\n\n/** WEBPACK FOOTER **\n ** media-browser.js\n **/"," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId])\n \t\t\treturn installedModules[moduleId].exports;\n\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\texports: {},\n \t\t\tid: moduleId,\n \t\t\tloaded: false\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.loaded = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(0);\n\n\n\n/** WEBPACK FOOTER **\n ** webpack/bootstrap 3f426ae9e362a9473816\n **/","/**\n * This file is part of Shuup.\n *\n * Copyright (c) 2012-2017, Shoop Commerce Ltd. All rights reserved.\n *\n * This source code is licensed under the OSL-3.0 license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\nconst _ = require(\"lodash\");\nconst m = require(\"mithril\");\nconst BrowserView = require(\"./BrowserView\");\nconst dragDrop = require(\"./util/dragDrop\");\nconst FileUpload = require(\"./FileUpload\");\nconst menuManager = require(\"./util/menuManager\");\nconst folderContextMenu = require(\"./menus/folderContextMenu\");\n\nvar controller = null;\n\nexport function init(config={}) {\n    if (controller !== null) {\n        return;\n    }\n    controller = m.mount(document.getElementById(\"BrowserView\"), {\n        view: BrowserView.view,\n        controller: _.partial(BrowserView.controller, config)\n    });\n    controller.navigateByHash();\n    controller.reloadFolderTree();\n\n    dragDrop.disableIntraPageDragDrop();\n}\n\nexport function openFolderContextMenu(event) {\n    const button = event.target;\n    menuManager.open(button, folderContextMenu(controller));\n}\n\nexport function setupUploadButton(element) {\n    const input = document.createElement(\"input\");\n    input.type = \"file\";\n    input.multiple = true;\n    input.style.display = \"none\";\n    input.addEventListener(\"change\", function(event) {\n        FileUpload.enqueueMultiple(controller.getUploadUrl(), event.target.files);\n        FileUpload.addQueueCompletionCallback(() => { controller.reloadFolderContentsSoon(); });\n        FileUpload.processQueue();\n    });\n    document.body.appendChild(input);\n    element.addEventListener(\"click\", function(event) {\n        input.click();\n        event.preventDefault();\n    }, false);\n}\n\n\n\n/** WEBPACK FOOTER **\n ** ./Browser.js\n **/","module.exports = window._;\n\n\n/*****************\n ** WEBPACK FOOTER\n ** external \"window._\"\n ** module id = 1\n ** module chunks = 0\n **/","module.exports = window.m;\n\n\n/*****************\n ** WEBPACK FOOTER\n ** external \"window.m\"\n ** module id = 2\n ** module chunks = 0\n **/","/**\n * This file is part of Shuup.\n *\n * Copyright (c) 2012-2017, Shoop Commerce Ltd. All rights reserved.\n *\n * This source code is licensed under the OSL-3.0 license found in the\n * LICENSE file in the root directory of this source tree.\n */\n/* eslint-disable no-bitwise */\n\nconst m = require(\"mithril\");\nconst _ = require(\"lodash\");\n\nconst folderTree = require(\"./components/folderTree\");\nconst folderBreadcrumbs = require(\"./components/folderBreadcrumbs\");\nconst folderView = require(\"./components/folderView\");\nconst findPathToFolder = require(\"./util/findPathToFolder\");\nconst remote = require(\"./util/remote\");\n\nexport function view(ctrl) {\n    return m(\"div.container-fluid\", [\n        m(\"div.row\", [\n            m(\"div.col-md-3.page-inner-navigation.folder-tree\", folderTree(ctrl)),\n            m(\"div.col-md-9.page-content\", m(\"div.content-block\", [\n                m(\"div.title\", folderBreadcrumbs(ctrl)),\n                m(\"div.content\", folderView(ctrl))\n            ]))\n        ])\n    ]);\n}\n\nexport function controller(config={}) {\n    const ctrl = this;\n    ctrl.currentFolderId = m.prop(null);\n    ctrl.currentFolderPath = m.prop([]);\n    ctrl.rootFolder = m.prop({});\n    ctrl.folderData = m.prop({});\n    ctrl.viewMode = m.prop(\"grid\");\n    ctrl.sortMode = m.prop(\"+name\");\n\n    ctrl.isMenuDisabled = function(action) {\n        return (config.disabledMenus || []).indexOf(action) >= 0;\n    }\n    ctrl.setFolder = function(newFolderId) {\n        newFolderId = 0 | newFolderId;\n        if (ctrl.currentFolderId() === newFolderId) {\n            return;  // Nothing to do, don't cause trouble\n        }\n        ctrl.currentFolderId(0 | newFolderId);\n        ctrl._refreshCurrentFolderPath();\n        ctrl.reloadFolderContents();\n        location.hash = \"#!id=\" + newFolderId;\n    };\n    ctrl._refreshCurrentFolderPath = function() {\n        const currentFolderId = ctrl.currentFolderId();\n        if (currentFolderId === null) {\n            return;  // Nothing loaded yet; defer to later\n        }\n        ctrl.currentFolderPath(findPathToFolder(ctrl.rootFolder(), currentFolderId));\n    };\n    ctrl.reloadFolderTree = function() {\n        remote.get({\"action\": \"folders\"}).then(function(response) {\n            ctrl.rootFolder(response.rootFolder);\n            ctrl._refreshCurrentFolderPath();\n        });\n    };\n    ctrl.reloadFolderContents = function() {\n        const id = 0 | ctrl.currentFolderId();\n        remote.get({\"action\": \"folder\", id, filter: config.filter}).then(function(response) {\n            remote.handleResponseMessages(response);\n            ctrl.folderData(response.folder || {});\n        });\n    };\n\n    ctrl.getUploadUrl = function(folderId) {\n        const uploadUrl = window.location.pathname;\n        folderId = folderId === undefined ? ctrl.currentFolderId() : folderId;\n        return uploadUrl + \"?action=upload&folder_id=\" + folderId;\n    };\n    ctrl.reloadFolderContentsSoon = _.debounce(ctrl.reloadFolderContents, 1000);\n\n    ctrl.navigateByHash = function() {\n        const currentIdMatch = /#!id=(\\d+)/.exec(location.hash);\n        const newFolderId = currentIdMatch ? currentIdMatch[1] : 0;\n        ctrl.setFolder(newFolderId);\n    };\n\n    window.addEventListener(\"hashchange\", () => {\n        ctrl.navigateByHash();\n    }, false);\n}\n\n\n\n/** WEBPACK FOOTER **\n ** ./BrowserView.js\n **/","/**\n * This file is part of Shuup.\n *\n * Copyright (c) 2012-2017, Shoop Commerce Ltd. All rights reserved.\n *\n * This source code is licensed under the OSL-3.0 license found in the\n * LICENSE file in the root directory of this source tree.\n */\nconst m = require(\"mithril\");\nconst _ = require(\"lodash\");\nconst {dropzoneConfig} = require(\"../util/dragDrop\");\nconst folderActions = require(\"../actions/folderActions\");\nconst folderClick = require(\"./folderClick\");\n\nexport default function(ctrl) {\n    const currentFolderId = ctrl.currentFolderId();\n    const folderPath = ctrl.currentFolderPath();\n    const idsToCurrent = _.pluck(folderPath, \"id\");\n\n    function walk(folder) {\n        if (folder.id === undefined) {\n            return;\n        }\n        const inPath = (idsToCurrent.indexOf(folder.id) > -1);\n        const isCurrent = (currentFolderId === folder.id);\n        const nameLink = m(\"a\", {href: \"#\", onclick: folderClick(ctrl, folder)}, [\n            (inPath ? m(\"i.caret-icon.fa.fa-caret-down\") : m(\"i.caret-icon.fa.fa-caret-right\")),\n            (isCurrent ? m(\"i.folder-icon.fa.fa-folder-open\") : m(\"i.folder-icon.fa.fa-folder\")),\n            m(\"span.name\", folder.name)\n        ]);\n        const childLis = (inPath ? _.map(folder.children, walk) : []);\n        if (isCurrent) {\n            childLis.push(m(\"li.new-folder-item\", {key: \"new-folder\"}, m(\"a\", {\n                href: \"#\",\n                onclick: _.bind(folderActions.promptCreateFolder, null, ctrl, folder.id),\n            }, m(\"i.fa.fa-plus\"), \" \" + gettext(\"New folder\"))));\n        }\n        const className = _({\n            \"current\": isCurrent,\n            \"in-path\": inPath,\n            \"has-children\": (folder.children.length > 0),\n            \"fd-zone\": true\n        }).pick(_.identity).keys().join(\" \");\n        return m(\"li\",\n            {\n                \"key\": folder.id,\n                \"className\": className,\n                \"data-folder-id\": folder.id,\n                \"config\": dropzoneConfig(ctrl)\n            },\n            [nameLink, (childLis && childLis.length ? m(\"ul\", childLis) : null)]\n        );\n    }\n\n    return m(\"ul\", walk(ctrl.rootFolder()));\n}\n\n\n\n/** WEBPACK FOOTER **\n ** ./components/folderTree.js\n **/","/**\n * This file is part of Shuup.\n *\n * Copyright (c) 2012-2017, Shoop Commerce Ltd. All rights reserved.\n *\n * This source code is licensed under the OSL-3.0 license found in the\n * LICENSE file in the root directory of this source tree.\n */\nconst m = require(\"mithril\");\nconst FileUpload = require(\"../FileUpload\");\nconst fileActions = require(\"../actions/fileActions\");\n\nexport const supportsDnD = (window.File && window.FileList && window.FormData);\n\nfunction ignoreEvent(e) {\n    e = e || event;\n    e.stopPropagation();\n    e.preventDefault();\n}\n\nexport function dropzoneConfig(ctrl) {\n    if (!ctrl) {\n        throw new Error(\"ctrl required\");\n    }\n    return function(element, isInitialized) {\n        if (isInitialized) {\n            return;\n        }\n        element.addEventListener(\"dragover\", function(e) {\n            const folderId = element.dataset.folderId;\n            if (!folderId) {\n                return;\n            }\n            ignoreEvent(e);\n            e.dataTransfer.dropEffect = \"copy\";\n            element.classList.add(\"over\");\n            m.redraw.strategy(\"none\");\n        }, false);\n        element.addEventListener(\"dragenter\", function(e) {\n            ignoreEvent(e);\n            m.redraw.strategy(\"none\");\n        }, false);\n        element.addEventListener(\"dragleave\", function(e) {\n            ignoreEvent(e);\n            element.classList.remove(\"over\");\n        }, false);\n        element.addEventListener(\"drop\", function(e) {\n            const folderId = element.dataset.folderId;\n            ignoreEvent(e);\n            element.classList.remove(\"over\");\n            var data = null;\n            try {\n                data = JSON.parse(e.dataTransfer.getData(\"text\"));\n            } catch (exc) {\n                // not JSON, I guess\n            }\n            if (data !== null) {\n                if (data.fileId) {\n                    fileActions.moveFile(ctrl, data.fileId, folderId);\n                    return;\n                }\n            } else {\n                const files = e.dataTransfer.files;\n                if (files.length > 0) {\n                    FileUpload.enqueueMultiple(ctrl.getUploadUrl(folderId), files);\n                    FileUpload.addQueueCompletionCallback(() => {\n                        ctrl.reloadFolderContentsSoon();\n                    });\n                    FileUpload.processQueue();\n                    return;\n                }\n            }\n            alert(\"Sorry! You can only drop files here (from your computer or within the file manager).\");\n        });\n    };\n}\n\nexport function disableIntraPageDragDrop() {\n    document.addEventListener(\"dragstart\", ignoreEvent, false);\n    document.addEventListener(\"dragover\", function(e) {\n        e.dataTransfer.dropEffect = \"none\";\n        ignoreEvent(e);\n    }, false);\n    document.addEventListener(\"drop\", ignoreEvent, false);\n}\n\n\n\n/** WEBPACK FOOTER **\n ** ./util/dragDrop.js\n **/","/**\n * This file is part of Shuup.\n *\n * Copyright (c) 2012-2017, Shoop Commerce Ltd. All rights reserved.\n *\n * This source code is licensed under the OSL-3.0 license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\nconst m = require(\"mithril\");\nconst _ = require(\"lodash\");\nconst remote = require(\"./util/remote\");\n\nconst queue = [];\nconst queueCompleteCallbacks = [];\nvar queueStatusDiv = null;\n\nfunction queueView() {\n    var className = \"empty\";\n    if (queue.length >= 0) {\n        className = (\n            _.all(queue, (file) => (file.status === \"done\" || file.status === \"error\")) ?\n                \"done\" : \"busy\"\n        );\n    }\n\n    return m(\"div.queue-view.\" + className, _.map(queue, (file) => {\n        return m(\"div.queue-file.\" + file.status, [\n            m(\"div.qf-name\", file.name),\n            m(\"div.qf-progress\", {style: \"width: \" + (file.progress || 0) + \"%\"})\n        ]);\n    }));\n}\n\nfunction updateQueueView() {\n    if (queueStatusDiv === null) {\n        if (queue.length === 0) {\n            return;  // Don't bother setting up the div if we're not doing anything actually\n        }\n        queueStatusDiv = document.createElement(\"div\");\n        queueStatusDiv.id = \"queue-status-ctr\";\n        document.body.appendChild(queueStatusDiv);\n\n        // Yes, we're throwing away the ctrl instance; we don't need it\n        // and eslint would kvetch about it otherwise :)\n        m.mount(queueStatusDiv, {view: queueView, controller: _.noop});\n    }\n    m.redraw();  // XXX: It would be nice if we could redraw only one Mithril view...\n}\n\nconst updateQueueViewSoon = _.debounce(updateQueueView, 50);\n\nfunction handleFileXhrComplete(xhr, file, error) {\n    if (xhr.status >= 400) {\n        error = true;\n    }\n    if (error) {\n        file.status = \"error\";\n\n    } else {\n        file.status = \"done\";\n        file.progress = 100;\n    }\n    setTimeout(processQueue, 50);  // Continue soon.\n    var messageText = null;\n    try {\n        const responseJson = JSON.parse(xhr.responseText);\n        if (responseJson && responseJson.message) {\n            messageText = responseJson.message;\n        }\n    } catch (e) {\n        // invalid JSON? pffff.\n        console.log(e); // eslint-disable-line\n    }\n    if (window.Messages) {\n        if (error && !messageText) {\n            messageText = gettext(\"Unexpected error while uploading files.\");\n        }\n        const response = {\n            error: (error ? gettext(\"Error:\") + \" \" + file.name + \": \" + messageText : null),\n            message: (!error ? messageText || gettext(\"Uploaded:\") + \" \" + file.name : null)\n        };\n        remote.handleResponseMessages(response);\n    }\n}\n\nfunction beginUpload(file) {\n    if (file.status !== \"new\") {  // Already uploaded? Huh.\n        return false;\n    }\n    file.progress = 0;\n    file.status = \"uploading\";\n\n    const formData = new FormData();\n    formData.append(\"file\", file.nativeFile);\n    const xhr = new XMLHttpRequest();\n    xhr.open(\"POST\", file.url);\n    xhr.setRequestHeader(\"X-CSRFToken\", window.ShuupAdminConfig.csrf);\n    xhr.onreadystatechange = function() {\n        if (xhr.readyState !== 4) {\n            // Ready state 4:\n            // .. The data transfer has been completed or something went\n            // .. wrong during the transfer (e.g. infinite redirects).\n            // That's the only case we want to handle, so return otherwise.\n            return;\n        }\n        handleFileXhrComplete(xhr, file, false);\n        updateQueueViewSoon();\n    };\n    xhr.onerror = function() {\n        handleFileXhrComplete(xhr, file, true);\n        updateQueueViewSoon();\n    };\n    xhr.upload.onprogress = function(event) {\n        if (event.lengthComputable) {\n            file.progress = (event.loaded / event.total);\n        } else {\n            file.progress = file.progress + (100 - file.progress) / 2;\n        }\n        updateQueueViewSoon();\n    };\n    xhr.send(formData);\n}\n\nexport function enqueue(uploadUrl, file) {\n    queue.push({\n        url: uploadUrl,\n        name: file.name,\n        nativeFile: file,\n        status: \"new\",  // \"new\"/\"uploading\"/\"error\"/\"done\"\n        progress: 0\n    });\n}\n\nexport function enqueueMultiple(uploadUrl, files) {\n    _.each(files, (file) => {\n        enqueue(uploadUrl, file);\n    });\n}\n\nexport function addQueueCompletionCallback(callback) {\n    queueCompleteCallbacks.push(callback);\n}\n\nexport function processQueue() {\n    if (_.any(queue, (file) => file.status === \"uploading\")) {\n        return;  // Don't allow uploading multiple files simultaneously though...\n    }\n    const nextFile = _.detect(queue, (file) => (file.status === \"new\"));\n    updateQueueViewSoon();\n    if (nextFile) {\n        beginUpload(nextFile);\n    } else {\n        while (queueCompleteCallbacks.length) {\n            const cb = queueCompleteCallbacks.shift();\n            cb();\n        }\n    }\n}\n\n\n\n/** WEBPACK FOOTER **\n ** ./FileUpload.js\n **/","/**\n * This file is part of Shuup.\n *\n * Copyright (c) 2012-2017, Shoop Commerce Ltd. All rights reserved.\n *\n * This source code is licensed under the OSL-3.0 license found in the\n * LICENSE file in the root directory of this source tree.\n */\nconst m = require(\"mithril\");\n\nexport function post(data) {\n    return m.request({\n        method: \"POST\",\n        url: location.pathname,\n        data: data,\n        config: function(xhr) {\n            xhr.setRequestHeader(\"X-CSRFToken\", window.ShuupAdminConfig.csrf);\n        }\n    });\n}\n\nexport function get(data) {\n    return m.request({\n        method: \"GET\",\n        url: location.pathname,\n        data: data\n    });\n}\n\nexport function handleResponseMessages(response) {\n    const Messages = window.Messages;\n    if (!Messages) {  // Messages module not available for whichever reason\n        return;\n    }\n    const message = response.message;\n    const error = response.error;\n    if (error) {\n        Messages.enqueue({tags: \"error\", text: error});\n    }\n    if (message) {\n        Messages.enqueue({tags: \"info\", text: message});\n    }\n}\n\n\n\n/** WEBPACK FOOTER **\n ** ./util/remote.js\n **/","/**\n * This file is part of Shuup.\n *\n * Copyright (c) 2012-2017, Shoop Commerce Ltd. All rights reserved.\n *\n * This source code is licensed under the OSL-3.0 license found in the\n * LICENSE file in the root directory of this source tree.\n */\nconst _ = require(\"lodash\");\nconst remote = require(\"../util/remote\");\n\nexport function promptRenameFile(controller, file) {\n    const {id, name} = file;\n    const newName = _.trim(prompt(gettext(\"New file name?\"), name) || \"\");\n    if (newName && name !== newName) {\n        remote.post({action: \"rename_file\", id, name: newName}).then(function(response) {\n            remote.handleResponseMessages(response);\n            controller.reloadFolderContents();\n        });\n    }\n}\n\nexport function promptDeleteFile(controller, file) {\n    const {id, name} = file;\n    if (confirm(interpolate(gettext(\"Are you sure you want to delete the file %s?\"), [name]))) {\n        remote.post({action: \"delete_file\", id}).then(function(response) {\n            remote.handleResponseMessages(response);\n            controller.reloadFolderContents();\n        });\n    }\n}\n\nexport function moveFile(controller, fileId, newFolderId) {\n    remote.post({action: \"move_file\", \"file_id\": fileId, \"folder_id\": newFolderId}).then(function(response) {\n        remote.handleResponseMessages(response);\n        controller.reloadFolderContents();\n    });\n}\n\n\n\n/** WEBPACK FOOTER **\n ** ./actions/fileActions.js\n **/","/**\n * This file is part of Shuup.\n *\n * Copyright (c) 2012-2017, Shoop Commerce Ltd. All rights reserved.\n *\n * This source code is licensed under the OSL-3.0 license found in the\n * LICENSE file in the root directory of this source tree.\n */\nconst _ = require(\"lodash\");\nconst remote = require(\"../util/remote\");\n\nexport function promptCreateFolder(controller, parentFolderId) {\n    const name = prompt(gettext(\"New folder name?\"));\n    if (!name) {  // Cancelled? :(\n        return;\n    }\n    remote.post({action: \"new_folder\", parent: parentFolderId, name}).then(function(response) {\n        remote.handleResponseMessages(response);\n        const newCurrentFolder = 0 | response.folder.id;  // eslint-disable-line no-bitwise\n        controller.setFolder(newCurrentFolder);\n        controller.reloadFolderTree();\n        controller.reloadFolderContents();\n    });\n}\n\nexport function promptCreateFolderHere(controller) {\n    return promptCreateFolder(controller, controller.currentFolderId());\n}\n\nexport function promptRenameCurrentFolder(controller) {\n    const {id, name} = controller.folderData();\n    const newName = _.trim(prompt(gettext(\"New folder name?\"), name) || \"\");\n    if (newName && name !== newName) {\n        remote.post({action: \"rename_folder\", id, name: newName}).then(function(response) {\n            remote.handleResponseMessages(response);\n            controller.reloadFolderTree();\n            controller.reloadFolderContents();\n        });\n    }\n}\n\nexport function promptDeleteCurrentFolder(controller) {\n    const {id, name} = controller.folderData();\n    if (confirm(interpolate(gettext(\"Are you sure you want to delete the %s folder?\"), [name]))) {\n        remote.post({action: \"delete_folder\", id}).then(function(response) {\n            remote.handleResponseMessages(response);\n            const newCurrentFolder = 0 | response.newFolderId;  // eslint-disable-line no-bitwise\n            controller.setFolder(newCurrentFolder);\n            controller.reloadFolderTree();\n            controller.reloadFolderContents();\n        });\n    }\n}\n\n\n\n/** WEBPACK FOOTER **\n ** ./actions/folderActions.js\n **/","/**\n * This file is part of Shuup.\n *\n * Copyright (c) 2012-2017, Shoop Commerce Ltd. All rights reserved.\n *\n * This source code is licensed under the OSL-3.0 license found in the\n * LICENSE file in the root directory of this source tree.\n */\nexport default function(ctrl, folder) {\n    return function clickFolder(event) {\n        ctrl.setFolder(folder.id);\n        event.preventDefault();\n        return false;\n    };\n}\n\n\n\n/** WEBPACK FOOTER **\n ** ./components/folderClick.js\n **/","/**\n * This file is part of Shuup.\n *\n * Copyright (c) 2012-2017, Shoop Commerce Ltd. All rights reserved.\n *\n * This source code is licensed under the OSL-3.0 license found in the\n * LICENSE file in the root directory of this source tree.\n */\nconst m = require(\"mithril\");\nconst _ = require(\"lodash\");\nconst folderClick = require(\"./folderClick\");\n\nexport default function(ctrl) {\n    const items = [];\n    const folderPath = ctrl.currentFolderPath();\n    _.each(folderPath, function(folder, index) {\n        items.push(\n            m(\"a.breadcrumb-link\" + (index === folderPath.length - 1 ? \".current\" : \"\"), {\n                href: \"#\",\n                key: folder.id,\n                onclick: folderClick(ctrl, folder)\n            }, folder.name)\n        );\n        items.push(m(\"i.fa.fa-angle-right\"));\n    });\n    items.pop(); // pop last chevron\n    items.unshift(m(\"i.fa.fa-folder-open.folder-icon\"));\n    return items;\n}\n\n\n\n/** WEBPACK FOOTER **\n ** ./components/folderBreadcrumbs.js\n **/","/**\n * This file is part of Shuup.\n *\n * Copyright (c) 2012-2017, Shoop Commerce Ltd. All rights reserved.\n *\n * This source code is licensed under the OSL-3.0 license found in the\n * LICENSE file in the root directory of this source tree.\n */\nconst m = require(\"mithril\");\nconst button = require(\"./button\");\nconst _ = require(\"lodash\");\nconst emptyFolderView = require(\"./emptyFolderView\");\nconst gridFileView = require(\"./gridFileView\");\nconst listFileView = require(\"./listFileView\");\nconst responsiveUploadHint = require(\"./responsiveUploadHint\");\nconst {dropzoneConfig} = require(\"../util/dragDrop\");\nconst images = require(\"./images\");\n\nfunction sortBySpec(data, sortString) {\n    sortString = /^([+-])(.+)$/.exec(sortString || \"+name\");\n    data = _.sortBy(data || [], sortString[2]);\n    if (sortString[1] === \"-\") {\n        data = data.reverse();\n    }\n    return data;\n}\n\nexport default function folderView(ctrl) {\n    const folderData = ctrl.folderData();\n    const viewModeGroup = m(\"div.btn-group.btn-group-sm.icons\", [\n        button(ctrl.viewMode, \"grid\", m(\"i.fa.fa-th\"), \"Grid\"),\n        button(ctrl.viewMode, \"list\", m(\"i.fa.fa-th-list\"), \"List\")\n    ]);\n    const sortGroup = m(\"div.btn-group.btn-group-sm\", [\n        button(ctrl.sortMode, \"+name\", \"A-Z\"),\n        button(ctrl.sortMode, \"-name\", \"Z-A\"),\n        button(ctrl.sortMode, \"+date\", gettext(\"Oldest first\")),\n        button(ctrl.sortMode, \"-date\", gettext(\"Newest first\")),\n        button(ctrl.sortMode, \"+size\", gettext(\"Smallest first\")),\n        button(ctrl.sortMode, \"-size\", gettext(\"Largest first\"))\n    ]);\n    var toolbar = m(\"div.btn-toolbar\", [viewModeGroup, sortGroup]);\n    const files = sortBySpec(folderData.files || [], ctrl.sortMode());\n    const folders = sortBySpec(folderData.folders || [], ctrl.sortMode());\n    var contents = null, uploadHint = null;\n    if (folders.length === 0 && files.length === 0) {\n        contents = emptyFolderView(ctrl, folderData);\n        toolbar = null;\n    } else {\n        switch (ctrl.viewMode()) {\n            case \"grid\":\n                contents = gridFileView(ctrl, folders, files);\n                break;\n            case \"list\":\n                contents = listFileView(ctrl, folders, files);\n                break;\n        }\n        uploadHint = m(\"div.upload-hint\", responsiveUploadHint);\n    }\n    const container = m(\"div.folder-contents.fd-zone\", {\n        \"data-folder-id\": folderData.id,\n        config: dropzoneConfig(ctrl),\n    }, [\n        contents,\n        uploadHint,\n        m(\"div.upload-indicator\", [\n            m(\"div.image\",\n                m(\"img\", {src: images.uploadIndicator})\n            ),\n            m(\"div.text\", [\n                m.trust(gettext(\"Drop your files here\"))\n            ])\n        ])\n    ]);\n\n    return m(\"div.folder-view\", [toolbar, container]);\n}\n\n\n\n/** WEBPACK FOOTER **\n ** ./components/folderView.js\n **/","/**\n * This file is part of Shuup.\n *\n * Copyright (c) 2012-2017, Shoop Commerce Ltd. All rights reserved.\n *\n * This source code is licensed under the OSL-3.0 license found in the\n * LICENSE file in the root directory of this source tree.\n */\nconst m = require(\"mithril\");\nconst _ = require(\"lodash\");\n\nexport default function(prop, value, label, title) {\n    const active = (prop() == value);  // eslint-disable-line eqeqeq\n    return m(\"button.btn.btn-default\" + (active ? \".active\" : \"\"), {\n        type: \"button\",\n        onclick: _.bind(prop, null, value),\n        title: title\n    }, label);\n}\n\n\n\n\n/** WEBPACK FOOTER **\n ** ./components/button.js\n **/","/**\n * This file is part of Shuup.\n *\n * Copyright (c) 2012-2017, Shoop Commerce Ltd. All rights reserved.\n *\n * This source code is licensed under the OSL-3.0 license found in the\n * LICENSE file in the root directory of this source tree.\n */\nconst m = require(\"mithril\");\nconst responsiveUploadHint = require(\"./responsiveUploadHint\");\n\nexport default function(ctrl, folder) {  // eslint-disable-line no-unused-vars\n    return m(\"div.empty-folder\", [\n        m(\"div.empty-image\",\n            m(\"img\", {src: require(\"!url!./file-icons.svg\")})\n        ),\n        m(\"div.empty-text\", responsiveUploadHint)\n    ]);\n}\n\n\n\n/** WEBPACK FOOTER **\n ** ./components/emptyFolderView.js\n **/","/**\n * This file is part of Shuup.\n *\n * Copyright (c) 2012-2017, Shoop Commerce Ltd. All rights reserved.\n *\n * This source code is licensed under the OSL-3.0 license found in the\n * LICENSE file in the root directory of this source tree.\n */\nconst m = require(\"mithril\");\nconst {supportsDnD} = require(\"../util/dragDrop\");\n\nconst NO_DND_UPLOAD_HINT = gettext(\"Click the <strong>Upload</strong> button to upload files.\");\nconst DND_UPLOAD_HINT = (\n    supportsDnD ?\n        gettext(\"<span>Drag and drop</span> files here<br> or click the <span>Upload</span> button.\") :\n        NO_DND_UPLOAD_HINT\n);\n\nconst responsiveUploadHint = [\n    m(\"div.visible-sm.visible-xs\", m.trust(NO_DND_UPLOAD_HINT)),\n    m(\"div.visible-md.visible-lg\", m.trust(DND_UPLOAD_HINT))\n];\n\nexport default responsiveUploadHint;\n\n\n\n/** WEBPACK FOOTER **\n ** ./components/responsiveUploadHint.js\n **/","module.exports = \"data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCA2MDAgNDAwIj48cGF0aCBmaWxsPSIjREREIiBkPSJNNTYxLjUgMTY2LjRjLTEuMS0yLjYtMi40LTQuNi0zLjktNi4xTDUzMi40IDEzNWMtMS41LTEuNS0zLjYtMi44LTYuMS0zLjktMi42LTEuMS01LTEuNi03LjEtMS42aC03Mi41Yy0yLjIgMC00IC44LTUuNSAyLjMtMS41IDEuNS0yLjMgMy4zLTIuMyA1LjV2MTI5LjNjMCAyLjIuOCA0IDIuMyA1LjUgMS41IDEuNSAzLjMgMi4zIDUuNSAyLjNoMTA4LjdjMi4yIDAgNC0uOCA1LjUtMi4zIDEuNS0xLjUgMi4zLTMuMyAyLjMtNS41di05My4xYy0uMS0yLjItLjYtNC41LTEuNy03LjF6bS0zOS44LTI1LjljMS42LjUgMi43IDEuMSAzLjMgMS44bDI1LjMgMjUuM2MuNi42IDEuMiAxLjggMS44IDMuM2gtMzAuNHYtMzAuNHpNNTUyLjggMjY0SDQ0OS4yVjEzOS45aDYyLjF2MzMuNmMwIDIuMi44IDQgMi4zIDUuNSAxLjUgMS41IDMuMyAyLjMgNS41IDIuM2gzMy43VjI2NHptLTgyLjEtNzEuN2MtLjUuNS0uNyAxLjEtLjcgMS45djUuMmMwIC44LjIgMS40LjcgMS45czEuMS43IDEuOS43aDU3Yy44IDAgMS40LS4yIDEuOS0uN3MuNy0xLjEuNy0xLjl2LTUuMmMwLS44LS4yLTEuNC0uNy0xLjlzLTEuMS0uNy0xLjktLjdoLTU3Yy0uOCAwLTEuNS4yLTEuOS43em01OC44IDQwLjdoLTU3Yy0uOCAwLTEuNC4yLTEuOS43LS41LjUtLjcgMS4xLS43IDEuOXY1LjJjMCAuOC4yIDEuNC43IDEuOXMxLjEuNyAxLjkuN2g1N2MuOCAwIDEuNC0uMiAxLjktLjdzLjctMS4xLjctMS45di01LjJjMC0uOC0uMi0xLjQtLjctMS45LS41LS41LTEuMi0uNy0xLjktLjd6bTAtMjAuN2gtNTdjLS44IDAtMS40LjItMS45LjdzLS43IDEuMS0uNyAxLjl2NS4yYzAgLjguMiAxLjQuNyAxLjlzMS4xLjcgMS45LjdoNTdjLjggMCAxLjQtLjIgMS45LS43cy43LTEuMS43LTEuOXYtNS4yYzAtLjgtLjItMS40LS43LTEuOXMtMS4yLS43LTEuOS0uN3pNMTA5LjMgMjE2LjFjLTQuOS00LTguOC0xMC40LTExLjgtMTkuMi42LTMuNyAxLTguOSAxLjEtMTUuNVYxNzljMC0uMyAwLS41LS4xLS42LjEtLjEuMi0uMy4zLS42LjUtMi41LjItNC40LS43LTUuNS0uNi0uOC0xLjYtMS4yLTIuOC0xLjJoLTEuOGMtMS43IDAtMi44IDEuMS0zLjQgMy4yLS43IDIuNy0uOSA2LjEtLjUgMTAuMy40IDQuMiAxLjIgOC41IDIuNSAxMi45LTEuOSA2LjgtNC43IDEzLjgtOC40IDIxLjItMyA2LTUuOSAxMS4zLTguNyAxNS45IDAtLjEtLjEtLjItLjItLjMtLjUtLjgtMS4xLTEtMS45LS41LTQuNiAyLjQtOC4xIDUtMTAuNyA3LjgtMi41IDIuOC00IDUuMi00LjUgNy40LS4yIDEuNC0uMSAyLjQuNSAyLjkuMy4yLjQuNC41LjRsMS45IDFjLjcuNCAxLjUuNiAyLjMuNiA0LjggMCAxMS4zLTcuMSAxOS42LTIxLjIgOS4yLTMuMiAxOS44LTUuNCAzMS43LTYuNyAzLjQgMS44IDYuOSAzLjIgMTAuNSA0LjMgMy42IDEuMSA2LjcgMS42IDkuMyAxLjYgMy41IDAgNS40LTEgNS43LTMuMXYtLjFsLjItLjJjLjEtLjEuMS0uMS4xLS4yLjgtMS42LjctMy0uMi00LjItMS42LTIuNi02LjQtNC0xNC4zLTQtMy4xIDAtNi4zLjItOS41LjYtMi42LTEuNy00LjktMy4yLTYuNy00LjZ6bS00Ni42IDMzLjJjLjctMS42IDItMy42IDQtNnM0LjMtNC42IDcuMS02LjhjLTQuNiA3LjItOC4zIDExLjUtMTEuMSAxMi44em0zMi4yLTc0LjR2LS4yYy4xLS4xLjEtLjEuMS0uMi42LjggMSAxLjcgMS4xIDIuOXYuMmMwIC4xIDAgLjEuMS4yLS4yLjItLjMuNC0uMy42LS40IDIuMi0uNiAzLjMtLjYgMy41LS4zIDItLjUgMy4yLS42IDMuNi0uNi00LjgtLjYtOC4zLjItMTAuNnptLTEwIDUzLjRjLjgtMS41IDItMy43IDMuNi02LjcgMy02IDUuMy0xMS4zIDYuNy0xNS45IDIuOCA1LjkgNi4yIDEwLjYgMTAuMyAxNC4yLjMuMy43LjYgMS4zIDEuMS42LjUuOS43IDEuMS44LTguMSAxLjUtMTUuNyAzLjYtMjMgNi41em01Mi4zLTEuMmwuMi4yYy0uMi4xLS43LjEtMS41LjEtMi42IDAtNS45LS44LTEwLTIuMyA2LjIgMCAxMCAuNyAxMS4zIDJ6bTIyLjQtNjAuN2MtMS4xLTIuNi0yLjQtNC42LTMuOS02LjFMMTMwLjUgMTM1Yy0xLjUtMS41LTMuNi0yLjgtNi4xLTMuOS0yLjYtMS4xLTUtMS42LTcuMS0xLjZINDQuOGMtMi4yIDAtNCAuOC01LjUgMi4zLTEuNSAxLjUtMi4zIDMuMy0yLjMgNS41djEyOS4zYzAgMi4yLjggNCAyLjMgNS41IDEuNSAxLjUgMy4zIDIuMyA1LjUgMi4zaDEwOC43YzIuMiAwIDQtLjggNS41LTIuMyAxLjUtMS41IDIuMy0zLjMgMi4zLTUuNXYtOTMuMWMwLTIuMi0uNi00LjUtMS43LTcuMXptLTM5LjgtMjUuOWMxLjYuNSAyLjcgMS4xIDMuMyAxLjhsMjUuMyAyNS4zYy42LjYgMS4yIDEuOCAxLjggMy4zaC0zMC40di0zMC40ek0xNTAuOSAyNjRINDcuNFYxMzkuOWg2Mi4xdjMzLjZjMCAyLjIuOCA0IDIuMyA1LjUgMS41IDEuNSAzLjMgMi4zIDUuNSAyLjNIMTUxVjI2NHpNMjUwLjcgMjIwLjdjOC4yIDAgMTUuMi0yLjkgMjEtOC42IDUuOC01LjcgOC42LTEyLjcgOC42LTIwLjlzLTIuOS0xNS4yLTguNi0yMC45Yy01LjgtNS43LTEyLjctOC42LTIxLTguNi04LjIgMC0xNS4yIDIuOS0yMSA4LjYtNS44IDUuOC04LjYgMTIuNy04LjYgMjAuOXMyLjkgMTUuMiA4LjYgMjAuOWM1LjggNS43IDEyLjggOC42IDIxIDguNnptMTkuOCAzOS40bC0xOS43LTE5LjctMjkuNyAyOS42djI5LjZIMzc5di00OS4zTDMyOS43IDIwMWwtNTkuMiA1OS4xem0xNDQuOS0xMjYuOWMtMi4xLTQuOS00LjUtOC44LTcuNC0xMS43bC00OC4xLTQ4LjFjLTIuOS0yLjktNi44LTUuMy0xMS43LTcuNC00LjktMi4xLTkuNS0zLjEtMTMuNi0zLjFIMTk2LjRjLTQuMSAwLTcuNiAxLjQtMTAuNSA0LjMtMi45IDIuOS00LjMgNi40LTQuMyAxMC41djI0Ni40YzAgNC4xIDEuNCA3LjYgNC4zIDEwLjUgMi45IDIuOSA2LjQgNC4zIDEwLjUgNC4zaDIwNy4yYzQuMSAwIDcuNi0xLjQgMTAuNS00LjMgMi45LTIuOSA0LjMtNi40IDQuMy0xMC41VjE0Ni44Yy4xLTQuMS0uOS04LjYtMy0xMy42em0tNzUuOS00OS4zYzMgMSA1LjEgMi4yIDYuMyAzLjRsNDguMyA0OC4yYzEuMiAxLjIgMi40IDMuMyAzLjQgNi4zaC01OFY4My45em01OS4yIDIzNS40SDIwMS40VjgyLjdoMTE4LjR2NjQuMWMwIDQuMSAxLjQgNy42IDQuMyAxMC41IDIuOSAyLjkgNi40IDQuMyAxMC41IDQuM2g2NC4xdjE1Ny43eiIvPjwvc3ZnPg==\"\n\n\n/*****************\n ** WEBPACK FOOTER\n ** /Users/panu/shuup-dev/shuup-packages/shuup/shuup/admin/~/url-loader!./components/file-icons.svg\n ** module id = 16\n ** module chunks = 0\n **/","/**\n * This file is part of Shuup.\n *\n * Copyright (c) 2012-2017, Shoop Commerce Ltd. All rights reserved.\n *\n * This source code is licensed under the OSL-3.0 license found in the\n * LICENSE file in the root directory of this source tree.\n */\nconst m = require(\"mithril\");\nconst _ = require(\"lodash\");\nconst wrapFileLink = require(\"./wrapFileLink\");\nconst folderLink = require(\"./folderLink\");\nconst {dropzoneConfig} = require(\"../util/dragDrop\");\nconst images = require(\"./images\");\nconst menuManager = require(\"../util/menuManager\");\nconst fileContextMenu = require(\"../menus/fileContextMenu\");\n\nexport default function(ctrl, folders, files) {\n    const folderItems = _.map(folders, function(folder) {\n        return m(\"div.col-xs-6.col-md-4.col-lg-3.grid-folder.fd-zone\", {\n            key: \"folder-\" + folder.id,\n            \"data-folder-id\": folder.id,\n            config: dropzoneConfig(ctrl),\n        }, [\n            m(\"a.file-preview\", {\n                onclick: function() {\n                    ctrl.setFolder(folder.id);\n                    return false;\n                },\n                href: \"#\"\n            }, m(\"i.fa.fa-folder-open.folder-icon\")),\n            m(\"div.file-name\", folderLink(ctrl, folder))\n        ]);\n    });\n    const fileItems = _.map(files, function(file) {\n        return m(\n            \"div.col-xs-6.col-md-4.col-lg-3.grid-file\",\n            {\n                key: file.id,\n                draggable: true,\n                ondragstart: (event) => {\n                    event.stopPropagation();\n                    event.dataTransfer.effectAllowed = \"copyMove\";\n                    event.dataTransfer.setData(\"text\", JSON.stringify({\"fileId\": file.id}));\n                    try {\n                        const dragIcon = document.createElement(\"img\");\n                        dragIcon.src = file.thumbnail || images.defaultThumbnail;\n                        dragIcon.width = 100;\n                        event.dataTransfer.setDragImage(dragIcon, 0, 0);\n                    } catch (e) {\n                        // This isn't a problem\n                    }\n                }\n            },\n            m(\"button.file-cog-btn.btn.btn-xs.btn-default\", {\n                key: \"filecog\",\n                onclick: (event) => {\n                    menuManager.open(event.currentTarget, fileContextMenu(ctrl, file));\n                    event.preventDefault();\n                }\n            }, m(\"i.fa.fa-cog\")),\n            wrapFileLink(file, \"a.file-preview\", [\n                m(\"img.img-responsive\", {src: file.thumbnail || images.defaultThumbnail}),\n                m(\"div.file-name\", file.name)\n            ])\n        );\n    });\n    return m(\"div.row\", folderItems.concat(fileItems));\n}\n\n\n\n/** WEBPACK FOOTER **\n ** ./components/gridFileView.js\n **/","/**\n * This file is part of Shuup.\n *\n * Copyright (c) 2012-2017, Shoop Commerce Ltd. All rights reserved.\n *\n * This source code is licensed under the OSL-3.0 license found in the\n * LICENSE file in the root directory of this source tree.\n */\nconst m = require(\"mithril\");\nconst getPickId = require(\"../util/getPickId\");\n\nexport default function(file, tag = \"a\", content = file.name) {\n    const attrs = {href: file.url, target: \"_blank\"};\n    const pickId = getPickId();\n    if (pickId) {\n        attrs.onclick = function(event) {\n            window.opener.postMessage({\n                \"pick\": {\n                    \"id\": pickId,\n                    \"object\": {\n                        \"id\": file.id,\n                        \"text\": file.name,\n                        \"url\": file.url,\n                        \"thumbnail\": file.thumbnail\n                    }\n                }\n            }, \"*\");\n            event.preventDefault();\n            return false;\n        };\n    }\n    return m(tag, attrs, content);\n}\n\n\n\n/** WEBPACK FOOTER **\n ** ./components/wrapFileLink.js\n **/","/**\n * This file is part of Shuup.\n *\n * Copyright (c) 2012-2017, Shoop Commerce Ltd. All rights reserved.\n *\n * This source code is licensed under the OSL-3.0 license found in the\n * LICENSE file in the root directory of this source tree.\n */\nexport default function() {\n    const pickMatch = /pick=([^&]+)/.exec(window.location.search);\n    return (pickMatch ? pickMatch[1] : null);\n}\n\n\n\n/** WEBPACK FOOTER **\n ** ./util/getPickId.js\n **/","/**\n * This file is part of Shuup.\n *\n * Copyright (c) 2012-2017, Shoop Commerce Ltd. All rights reserved.\n *\n * This source code is licensed under the OSL-3.0 license found in the\n * LICENSE file in the root directory of this source tree.\n */\nconst m = require(\"mithril\");\n\nexport default function(ctrl, folder) {\n    return m(\"a\", {\n        href: \"#\", onclick: function() {\n            ctrl.setFolder(folder.id);\n            return false;\n        }\n    }, folder.name);\n}\n\n\n\n/** WEBPACK FOOTER **\n ** ./components/folderLink.js\n **/","/**\n * This file is part of Shuup.\n *\n * Copyright (c) 2012-2017, Shoop Commerce Ltd. All rights reserved.\n *\n * This source code is licensed under the OSL-3.0 license found in the\n * LICENSE file in the root directory of this source tree.\n */\nexport const uploadIndicator = require(\"!url!./file-icons.svg\");\nexport const defaultThumbnail = require(\"!url!./default-thumbnail.svg\");\n\n\n\n/** WEBPACK FOOTER **\n ** ./components/images.js\n **/","module.exports = \"data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCAxNDUgMTQ1IiBoZWlnaHQ9IjE0NSIgd2lkdGg9IjE0NSI+PHBhdGggZD0iTTEyNC41IDEzNC45NjhoLTEwNHYtMTI0aDYyYy4wOTUgMTEuMTM4LS4xOTIgMjIuODkyLjE0OCAzNC42MDggMS4xMzcgNS40MDcgNi43MjIgNi45MjMgMTEuMjg3IDYuMzkySDEyNC41djgyLjU5M3pNOTMuMSAxMC45NzVjNC40MzggMS42OCA3LjA0NyA2LjA3IDEwLjU2NCA5LjA5NiA2LjEyIDYuMjEyIDEyLjM5IDEyLjI4NyAxOC40MTYgMTguNTgyIDMuNjIgNC42NjMtMi4yODcgMi45OS00Ljc0OCAzLjMxNkg5My41VjEwLjk3NXptMzkuNzA0IDI1LjkxOGMtMi44MTgtNi41NDctOC45NDYtMTAuNjYtMTMuNTY3LTE1Ljg1LTUuODM0LTUuNjgyLTExLjI5OC0xMS43OC0xNy4zODgtMTcuMTc2LTYuNTQyLTUuMTYtMTQuOTg0LTMuNjk0LTIyLjY3LTMuOS0yMC41NjguMDI2LTQxLjEzOC0uMDUtNjEuNzAzLjAzOC01LjQzMi4zODctNy42MiA2LjA5LTYuOTc3IDEwLjgyNS4wMjUgNDIuMzgtLjA1IDg0Ljc2LjAzNyAxMjcuMTQuMzg2IDUuNDQ4IDYuMDcgNy42NDMgMTAuNzkgNi45OTggMzUuNC0uMDI1IDcwLjguMDUgMTA2LjE5Ni0uMDM4IDUuNDMyLS4zODYgNy42Mi02LjA5IDYuOTc3LTEwLjgyNC0uMDM4LTMwLjMxMi4wNzUtNjAuNjMtLjA1Ny05MC45NC0uMTkyLTIuMTY0LS43OTQtNC4yNzYtMS42NC02LjI3M3oiIGZpbGw9IiNkZGQiLz48L3N2Zz4=\"\n\n\n/*****************\n ** WEBPACK FOOTER\n ** /Users/panu/shuup-dev/shuup-packages/shuup/shuup/admin/~/url-loader!./components/default-thumbnail.svg\n ** module id = 22\n ** module chunks = 0\n **/","/**\n * This file is part of Shuup.\n *\n * Copyright (c) 2012-2017, Shoop Commerce Ltd. All rights reserved.\n *\n * This source code is licensed under the OSL-3.0 license found in the\n * LICENSE file in the root directory of this source tree.\n */\nconst m = require(\"mithril\");\nconst _ = require(\"lodash\");\nconst offset = require(\"./offset\");\n\nvar currentMenuParent = null;\nvar currentMenuComponent = null;\nvar fallbackParentCoords = null;\nvar menuContainer = null;\nvar currentMenuOpenTs = 0;\nconst widthMargin = 20;\n\nexport function isMenuVisible() {\n    return (currentMenuParent !== null && menuContainer !== null);\n}\n\nfunction reattachNow() {\n    if (!isMenuVisible()) {\n        return;\n    }\n    const parentCoords = offset(currentMenuParent) || fallbackParentCoords;\n    if (parentCoords === null) {\n        return;\n    }\n    const viewWidth = window.innerWidth;\n    var x = parentCoords.left;\n    const y = parentCoords.top + parentCoords.height + 5;\n    const menuOffset = offset(menuContainer);\n    const menuWidth = menuOffset ? menuOffset.width : 0;  // ah well\n    if (viewWidth && x + menuWidth > viewWidth - widthMargin) {\n        x = x + parentCoords.width - menuWidth;\n    }\n\n    _.assign(menuContainer.style, {\n        \"display\": \"block\",\n        \"left\": `${x}px`,\n        \"top\": `${y}px`,\n        \"position\": \"absolute\",\n        \"zIndex\": 9000\n    });\n}\n\nconst reattachSoon = _.debounce(reattachNow, 20);\n\nfunction menuView(view) {\n    return function() {\n        var items = null;\n        if (_.isArray(view)) {  // It's already an array of items, fine\n            items = view;\n        }\n        if (_.isFunction(view)) {  // It's a function returning something..?\n            items = view();\n        }\n        if (_.isArray(items)) {  // If it was items, wrap them.\n            return m(\n                \"ul.dropdown-menu\",\n                {style: \"display: block; float: none; position: static; top: 0\"},\n                items\n            );\n        }\n        return items;\n    };\n}\n\nfunction initializeMenuContainer() {\n    if (menuContainer === null) {\n        menuContainer = document.createElement(\"div\");\n        document.body.appendChild(menuContainer);\n        window.addEventListener(\"resize\", reattachSoon, false);\n        window.addEventListener(\"scroll\", reattachSoon, false);\n        document.body.addEventListener(\"click\", function(event) {\n            if (!isMenuVisible()) {\n                return;\n            }\n            if ((+new Date() - currentMenuOpenTs) < 200) {\n                return;  // Ignore mis-taps within a short time of the opening click\n            }\n            var node = event.target;\n            do {\n                if (node === menuContainer) {\n                    return false;\n                }\n            } while ((node = node.parentElement));\n            close();\n        }, false);\n\n        //setInterval(reattachSoon, 100);\n    }\n    return menuContainer;\n}\n\nexport function open(parent, view) {\n    if (currentMenuParent === parent) {\n        close();\n        return;\n    }\n    if (parent) {\n        initializeMenuContainer();\n    }\n    currentMenuParent = parent;\n    currentMenuComponent = (view ? {view: menuView(view), controller: _.noop} : null);\n    currentMenuOpenTs = +new Date();\n    if (menuContainer) {\n        m.mount(menuContainer, currentMenuComponent);\n        fallbackParentCoords = parent ? offset(parent) : null;\n        if (view) {\n            reattachNow();\n            setTimeout(reattachSoon, 100);\n        }\n    }\n}\n\nexport function close() {\n    open(null, null);\n}\n\n\n\n/** WEBPACK FOOTER **\n ** ./util/menuManager.js\n **/","/**\n * This file is part of Shuup.\n *\n * Copyright (c) 2012-2017, Shoop Commerce Ltd. All rights reserved.\n *\n * This source code is licensed under the OSL-3.0 license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\n// adapted from\n// https://github.com/jquery/jquery/blob/250a1990baa571de60325ab2c52eabb399c4cf9e/src/offset.js#L76-L116\nexport default function(elem) {\n    if (!elem.getClientRects().length) {\n        return null;\n    }\n\n    const rect = elem.getBoundingClientRect();\n\n    if (!(rect.width || rect.height)) {\n        return null;\n    }\n    const doc = elem.ownerDocument;\n    const win = doc.defaultView || window;\n    const docElem = doc.documentElement;\n\n    return {\n        top: rect.top + win.pageYOffset - docElem.clientTop,\n        left: rect.left + win.pageXOffset - docElem.clientLeft,\n        width: rect.width,\n        height: rect.height\n    };\n}\n\n\n\n/** WEBPACK FOOTER **\n ** ./util/offset.js\n **/","/**\n * This file is part of Shuup.\n *\n * Copyright (c) 2012-2017, Shoop Commerce Ltd. All rights reserved.\n *\n * This source code is licensed under the OSL-3.0 license found in the\n * LICENSE file in the root directory of this source tree.\n */\nconst fileActions = require(\"../actions/fileActions\");\nconst menuItem = require(\"./menuItem\");\n\nexport default function(controller, file) {\n    return function() {\n        return [\n            menuItem(gettext(\"Rename file\"), () => {\n                fileActions.promptRenameFile(controller, file);\n            }, {disabled: controller.isMenuDisabled(\"rename\")}),\n            menuItem(gettext(\"Delete file\"), () => {\n                fileActions.promptDeleteFile(controller, file);\n            }, {disabled: controller.isMenuDisabled(\"delete\")})\n        ];\n    };\n}\n\n\n\n/** WEBPACK FOOTER **\n ** ./menus/fileContextMenu.js\n **/","/**\n * This file is part of Shuup.\n *\n * Copyright (c) 2012-2017, Shoop Commerce Ltd. All rights reserved.\n *\n * This source code is licensed under the OSL-3.0 license found in the\n * LICENSE file in the root directory of this source tree.\n */\nconst _ = require(\"lodash\");\nconst m = require(\"mithril\");\nconst menuManager = require(\"../util/menuManager\");\n\nexport default function item(label, action, attrs = {}) {\n    const tagBits = [\"li\"];\n    if (attrs.disabled) {\n        action = _.noop;\n        tagBits.push(\"disabled\");\n    }\n    return m(tagBits.join(\".\"), m(\"a\", {\n        href: \"#\", onclick: (event) => {\n            event.preventDefault();\n            action();\n            menuManager.close();\n        }\n    }, label));\n}\n\n\n\n/** WEBPACK FOOTER **\n ** ./menus/menuItem.js\n **/","/**\n * This file is part of Shuup.\n *\n * Copyright (c) 2012-2017, Shoop Commerce Ltd. All rights reserved.\n *\n * This source code is licensed under the OSL-3.0 license found in the\n * LICENSE file in the root directory of this source tree.\n */\nconst _ = require(\"lodash\");\nconst m = require(\"mithril\");\nconst moment = require(\"moment\");\nconst wrapFileLink = require(\"./wrapFileLink\");\nconst folderLink = require(\"./folderLink\");\nconst menuManager = require(\"../util/menuManager\");\nconst fileContextMenu = require(\"../menus/fileContextMenu\");\n\nexport default function(ctrl, folders, files) {\n    const folderItems = _.map(folders, function(folder) {\n        return m(\"tr\", {key: \"folder-\" + folder.id}, [\n            m(\"td\", {colspan: 4}, [m(\"i.fa.fa-folder.folder-icon\"), \" \", folderLink(ctrl, folder)]),\n        ]);\n    });\n    const fileItems = _.map(files, function(file) {\n        return m(\"tr\", {key: file.id}, [\n            m(\"td\", wrapFileLink(file)),\n            m(\"td.text-right\", file.size),\n            m(\"td.text-right\", moment(file.date).format()),\n            m(\"td\", {key: \"filecog\",\n                onclick: (event) => {\n                    menuManager.open(event.currentTarget, fileContextMenu(ctrl, file));\n                    event.preventDefault();\n                }\n            }, m(\"i.fa.fa-cog\"))\n        ]);\n    });\n    return m(\"div.table-responsive\", [\n        m(\"table.table.table-condensed.table-striped.table-bordered\", [\n            m(\"thead\", m(\"tr\", _.map([gettext(\"Name\"), gettext(\"Size\"), gettext(\"Date\"), gettext(\"Edit\")], function(title) {\n                return m(\"th\", title);\n            }))),\n            m(\"tbody\", folderItems.concat(fileItems))\n        ])\n    ]);\n}\n\n\n\n/** WEBPACK FOOTER **\n ** ./components/listFileView.js\n **/","module.exports = window.moment;\n\n\n/*****************\n ** WEBPACK FOOTER\n ** external \"window.moment\"\n ** module id = 28\n ** module chunks = 0\n **/","/**\n * This file is part of Shuup.\n *\n * Copyright (c) 2012-2017, Shoop Commerce Ltd. All rights reserved.\n *\n * This source code is licensed under the OSL-3.0 license found in the\n * LICENSE file in the root directory of this source tree.\n */\n/* eslint-disable no-shadow,eqeqeq */\nconst _ = require(\"lodash\");\n\nexport default function(rootFolder, folderId) {\n    var pathToFolder = null;\n\n    function walk(folder, folderPath) {\n        if (folder.id == folderId) {\n            pathToFolder = folderPath.concat([folder]);\n            return;\n        }\n        folderPath = [].concat(folderPath).concat([folder]);\n        _.each(folder.children, function(folder) {\n            if (!pathToFolder) {\n                walk(folder, folderPath);\n            }\n        });\n    }\n\n    walk(rootFolder, []);\n    return pathToFolder || [];\n}\n\n\n\n/** WEBPACK FOOTER **\n ** ./util/findPathToFolder.js\n **/","/**\n * This file is part of Shuup.\n *\n * Copyright (c) 2012-2017, Shoop Commerce Ltd. All rights reserved.\n *\n * This source code is licensed under the OSL-3.0 license found in the\n * LICENSE file in the root directory of this source tree.\n */\n/* eslint-disable no-bitwise */\nconst folderActions = require(\"../actions/folderActions\");\nconst menuItem = require(\"./menuItem\");\n\nexport default function(controller) {\n    return function() {\n        const isRoot = (0 | controller.currentFolderId()) === 0;\n        return [\n            menuItem(gettext(\"New folder\"), () => {\n                folderActions.promptCreateFolderHere(controller);\n            }, {disabled: controller.isMenuDisabled(\"new\")}),\n            menuItem(gettext(\"Rename folder\"), () => {\n                folderActions.promptRenameCurrentFolder(controller);\n            }, {disabled: isRoot || controller.isMenuDisabled(\"rename\")}),\n            menuItem(gettext(\"Delete folder\"), () => {\n                folderActions.promptDeleteCurrentFolder(controller);\n            }, {disabled: isRoot || controller.isMenuDisabled(\"delete\")})\n        ];\n    };\n}\n\n\n\n/** WEBPACK FOOTER **\n ** ./menus/folderContextMenu.js\n **/"],"sourceRoot":""}