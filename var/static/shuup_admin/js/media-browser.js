var MediaBrowser=function(e){function t(u){if(n[u])return n[u].exports;var r=n[u]={exports:{},id:u,loaded:!1};return e[u].call(r.exports,r,r.exports,t),r.loaded=!0,r.exports}var n={};return t.m=e,t.c=n,t.p="",t(0)}([function(e,t,n){"use strict";function u(){var e=arguments.length<=0||void 0===arguments[0]?{}:arguments[0];null===L&&(L=a.mount(document.getElementById("BrowserView"),{view:d.view,controller:i.partial(d.controller,e)}),L.navigateByHash(),L.reloadFolderTree(),l.disableIntraPageDragDrop())}function r(e){var t=e.target;s.open(t,c(L))}function o(e){var t=document.createElement("input");t.type="file",t.multiple=!0,t.style.display="none",t.addEventListener("change",function(e){M.enqueueMultiple(L.getUploadUrl(),e.target.files),M.addQueueCompletionCallback(function(){L.reloadFolderContentsSoon()}),M.processQueue()}),document.body.appendChild(t),e.addEventListener("click",function(e){t.click(),e.preventDefault()},!1)}t.__esModule=!0,t.init=u,t.openFolderContextMenu=r,t.setupUploadButton=o;var i=n(1),a=n(2),d=n(3),l=n(5),M=n(6),s=n(23),c=n(30),L=null},function(e,t){e.exports=window._},function(e,t){e.exports=window.m},function(e,t,n){"use strict";function u(e){return o("div.container-fluid",[o("div.row",[o("div.col-md-3.page-inner-navigation.folder-tree",a(e)),o("div.col-md-9.page-content",o("div.content-block",[o("div.title",d(e)),o("div.content",l(e))]))])])}function r(){var e=arguments.length<=0||void 0===arguments[0]?{}:arguments[0],t=this;t.currentFolderId=o.prop(null),t.currentFolderPath=o.prop([]),t.rootFolder=o.prop({}),t.folderData=o.prop({}),t.viewMode=o.prop("grid"),t.sortMode=o.prop("+name"),t.isMenuDisabled=function(t){return(e.disabledMenus||[]).indexOf(t)>=0},t.setFolder=function(e){e=0|e,t.currentFolderId()!==e&&(t.currentFolderId(0|e),t._refreshCurrentFolderPath(),t.reloadFolderContents(),location.hash="#!id="+e)},t._refreshCurrentFolderPath=function(){var e=t.currentFolderId();null!==e&&t.currentFolderPath(M(t.rootFolder(),e))},t.reloadFolderTree=function(){s.get({action:"folders"}).then(function(e){t.rootFolder(e.rootFolder),t._refreshCurrentFolderPath()})},t.reloadFolderContents=function(){var n=0|t.currentFolderId();s.get({action:"folder",id:n,filter:e.filter}).then(function(e){s.handleResponseMessages(e),t.folderData(e.folder||{})})},t.getUploadUrl=function(e){var n=window.location.pathname;return e=void 0===e?t.currentFolderId():e,n+"?action=upload&folder_id="+e},t.reloadFolderContentsSoon=i.debounce(t.reloadFolderContents,1e3),t.navigateByHash=function(){var e=/#!id=(\d+)/.exec(location.hash),n=e?e[1]:0;t.setFolder(n)},window.addEventListener("hashchange",function(){t.navigateByHash()},!1)}t.__esModule=!0,t.view=u,t.controller=r;var o=n(2),i=n(1),a=n(4),d=n(11),l=n(12),M=n(29),s=n(7)},function(e,t,n){"use strict";t.__esModule=!0;var u=n(2),r=n(1),o=n(5),i=o.dropzoneConfig,a=n(9),d=n(10);t["default"]=function(e){function t(o){if(void 0!==o.id){var M=l.indexOf(o.id)>-1,s=n===o.id,c=u("a",{href:"#",onclick:d(e,o)},[u(M?"i.caret-icon.fa.fa-caret-down":"i.caret-icon.fa.fa-caret-right"),u(s?"i.folder-icon.fa.fa-folder-open":"i.folder-icon.fa.fa-folder"),u("span.name",o.name)]),L=M?r.map(o.children,t):[];s&&L.push(u("li.new-folder-item",{key:"new-folder"},u("a",{href:"#",onclick:r.bind(a.promptCreateFolder,null,e,o.id)},u("i.fa.fa-plus")," "+gettext("New folder"))));var f=r({current:s,"in-path":M,"has-children":o.children.length>0,"fd-zone":!0}).pick(r.identity).keys().join(" ");return u("li",{key:o.id,className:f,"data-folder-id":o.id,config:i(e)},[c,L&&L.length?u("ul",L):null])}}var n=e.currentFolderId(),o=e.currentFolderPath(),l=r.pluck(o,"id");return u("ul",t(e.rootFolder()))},e.exports=t["default"]},function(e,t,n){"use strict";function u(e){e=e||event,e.stopPropagation(),e.preventDefault()}function r(e){if(!e)throw new Error("ctrl required");return function(t,n){n||(t.addEventListener("dragover",function(e){var n=t.dataset.folderId;n&&(u(e),e.dataTransfer.dropEffect="copy",t.classList.add("over"),i.redraw.strategy("none"))},!1),t.addEventListener("dragenter",function(e){u(e),i.redraw.strategy("none")},!1),t.addEventListener("dragleave",function(e){u(e),t.classList.remove("over")},!1),t.addEventListener("drop",function(n){var r=t.dataset.folderId;u(n),t.classList.remove("over");var o=null;try{o=JSON.parse(n.dataTransfer.getData("text"))}catch(i){}if(null!==o){if(o.fileId)return void d.moveFile(e,o.fileId,r)}else{var l=n.dataTransfer.files;if(l.length>0)return a.enqueueMultiple(e.getUploadUrl(r),l),a.addQueueCompletionCallback(function(){e.reloadFolderContentsSoon()}),void a.processQueue()}alert("Sorry! You can only drop files here (from your computer or within the file manager).")}))}}function o(){document.addEventListener("dragstart",u,!1),document.addEventListener("dragover",function(e){e.dataTransfer.dropEffect="none",u(e)},!1),document.addEventListener("drop",u,!1)}t.__esModule=!0,t.dropzoneConfig=r,t.disableIntraPageDragDrop=o;var i=n(2),a=n(6),d=n(8),l=window.File&&window.FileList&&window.FormData;t.supportsDnD=l},function(e,t,n){"use strict";function u(){var e="empty";return f.length>=0&&(e=c.all(f,function(e){return"done"===e.status||"error"===e.status})?"done":"busy"),s("div.queue-view."+e,c.map(f,function(e){return s("div.queue-file."+e.status,[s("div.qf-name",e.name),s("div.qf-progress",{style:"width: "+(e.progress||0)+"%"})])}))}function r(){if(null===j){if(0===f.length)return;j=document.createElement("div"),j.id="queue-status-ctr",document.body.appendChild(j),s.mount(j,{view:u,controller:c.noop})}s.redraw()}function o(e,t,n){e.status>=400&&(n=!0),n?t.status="error":(t.status="done",t.progress=100),setTimeout(M,50);var u=null;try{var r=JSON.parse(e.responseText);r&&r.message&&(u=r.message)}catch(o){console.log(o)}if(window.Messages){n&&!u&&(u=gettext("Unexpected error while uploading files."));var i={error:n?gettext("Error:")+" "+t.name+": "+u:null,message:n?null:u||gettext("Uploaded:")+" "+t.name};L.handleResponseMessages(i)}}function i(e){if("new"!==e.status)return!1;e.progress=0,e.status="uploading";var t=new FormData;t.append("file",e.nativeFile);var n=new XMLHttpRequest;n.open("POST",e.url),n.setRequestHeader("X-CSRFToken",window.ShuupAdminConfig.csrf),n.onreadystatechange=function(){4===n.readyState&&(o(n,e,!1),p())},n.onerror=function(){o(n,e,!0),p()},n.upload.onprogress=function(t){t.lengthComputable?e.progress=t.loaded/t.total:e.progress=e.progress+(100-e.progress)/2,p()},n.send(t)}function a(e,t){f.push({url:e,name:t.name,nativeFile:t,status:"new",progress:0})}function d(e,t){c.each(t,function(t){a(e,t)})}function l(e){g.push(e)}function M(){if(!c.any(f,function(e){return"uploading"===e.status})){var e=c.detect(f,function(e){return"new"===e.status});if(p(),e)i(e);else for(;g.length;){var t=g.shift();t()}}}t.__esModule=!0,t.enqueue=a,t.enqueueMultiple=d,t.addQueueCompletionCallback=l,t.processQueue=M;var s=n(2),c=n(1),L=n(7),f=[],g=[],j=null,p=c.debounce(r,50)},function(e,t,n){"use strict";function u(e){return i.request({method:"POST",url:location.pathname,data:e,config:function(e){e.setRequestHeader("X-CSRFToken",window.ShuupAdminConfig.csrf)}})}function r(e){return i.request({method:"GET",url:location.pathname,data:e})}function o(e){var t=window.Messages;if(t){var n=e.message,u=e.error;u&&t.enqueue({tags:"error",text:u}),n&&t.enqueue({tags:"info",text:n})}}t.__esModule=!0,t.post=u,t.get=r,t.handleResponseMessages=o;var i=n(2)},function(e,t,n){"use strict";function u(e,t){var n=t.id,u=t.name,r=i.trim(prompt(gettext("New file name?"),u)||"");r&&u!==r&&a.post({action:"rename_file",id:n,name:r}).then(function(t){a.handleResponseMessages(t),e.reloadFolderContents()})}function r(e,t){var n=t.id,u=t.name;confirm(interpolate(gettext("Are you sure you want to delete the file %s?"),[u]))&&a.post({action:"delete_file",id:n}).then(function(t){a.handleResponseMessages(t),e.reloadFolderContents()})}function o(e,t,n){a.post({action:"move_file",file_id:t,folder_id:n}).then(function(t){a.handleResponseMessages(t),e.reloadFolderContents()})}t.__esModule=!0,t.promptRenameFile=u,t.promptDeleteFile=r,t.moveFile=o;var i=n(1),a=n(7)},function(e,t,n){"use strict";function u(e,t){var n=prompt(gettext("New folder name?"));n&&d.post({action:"new_folder",parent:t,name:n}).then(function(t){d.handleResponseMessages(t);var n=0|t.folder.id;e.setFolder(n),e.reloadFolderTree(),e.reloadFolderContents()})}function r(e){return u(e,e.currentFolderId())}function o(e){var t=e.folderData(),n=t.id,u=t.name,r=a.trim(prompt(gettext("New folder name?"),u)||"");r&&u!==r&&d.post({action:"rename_folder",id:n,name:r}).then(function(t){d.handleResponseMessages(t),e.reloadFolderTree(),e.reloadFolderContents()})}function i(e){var t=e.folderData(),n=t.id,u=t.name;confirm(interpolate(gettext("Are you sure you want to delete the %s folder?"),[u]))&&d.post({action:"delete_folder",id:n}).then(function(t){d.handleResponseMessages(t);var n=0|t.newFolderId;e.setFolder(n),e.reloadFolderTree(),e.reloadFolderContents()})}t.__esModule=!0,t.promptCreateFolder=u,t.promptCreateFolderHere=r,t.promptRenameCurrentFolder=o,t.promptDeleteCurrentFolder=i;var a=n(1),d=n(7)},function(e,t){"use strict";t.__esModule=!0,t["default"]=function(e,t){return function(n){return e.setFolder(t.id),n.preventDefault(),!1}},e.exports=t["default"]},function(e,t,n){"use strict";t.__esModule=!0;var u=n(2),r=n(1),o=n(10);t["default"]=function(e){var t=[],n=e.currentFolderPath();return r.each(n,function(r,i){t.push(u("a.breadcrumb-link"+(i===n.length-1?".current":""),{href:"#",key:r.id,onclick:o(e,r)},r.name)),t.push(u("i.fa.fa-angle-right"))}),t.pop(),t.unshift(u("i.fa.fa-folder-open.folder-icon")),t},e.exports=t["default"]},function(e,t,n){"use strict";function u(e,t){return t=/^([+-])(.+)$/.exec(t||"+name"),e=a.sortBy(e||[],t[2]),"-"===t[1]&&(e=e.reverse()),e}function r(e){var t=e.folderData(),n=o("div.btn-group.btn-group-sm.icons",[i(e.viewMode,"grid",o("i.fa.fa-th"),"Grid"),i(e.viewMode,"list",o("i.fa.fa-th-list"),"List")]),r=o("div.btn-group.btn-group-sm",[i(e.sortMode,"+name","A-Z"),i(e.sortMode,"-name","Z-A"),i(e.sortMode,"+date",gettext("Oldest first")),i(e.sortMode,"-date",gettext("Newest first")),i(e.sortMode,"+size",gettext("Smallest first")),i(e.sortMode,"-size",gettext("Largest first"))]),a=o("div.btn-toolbar",[n,r]),c=u(t.files||[],e.sortMode()),g=u(t.folders||[],e.sortMode()),j=null,p=null;if(0===g.length&&0===c.length)j=d(e,t),a=null;else{switch(e.viewMode()){case"grid":j=l(e,g,c);break;case"list":j=M(e,g,c)}p=o("div.upload-hint",s)}var y=o("div.folder-contents.fd-zone",{"data-folder-id":t.id,config:L(e)},[j,p,o("div.upload-indicator",[o("div.image",o("img",{src:f.uploadIndicator})),o("div.text",[o.trust(gettext("Drop your files here"))])])]);return o("div.folder-view",[a,y])}t.__esModule=!0,t["default"]=r;var o=n(2),i=n(13),a=n(1),d=n(14),l=n(17),M=n(27),s=n(15),c=n(5),L=c.dropzoneConfig,f=n(21);e.exports=t["default"]},function(e,t,n){"use strict";t.__esModule=!0;var u=n(2),r=n(1);t["default"]=function(e,t,n,o){var i=e()==t;return u("button.btn.btn-default"+(i?".active":""),{type:"button",onclick:r.bind(e,null,t),title:o},n)},e.exports=t["default"]},function(e,t,n){"use strict";t.__esModule=!0;var u=n(2),r=n(15);t["default"]=function(e,t){return u("div.empty-folder",[u("div.empty-image",u("img",{src:n(16)})),u("div.empty-text",r)])},e.exports=t["default"]},function(e,t,n){"use strict";t.__esModule=!0;var u=n(2),r=n(5),o=r.supportsDnD,i=gettext("Click the <strong>Upload</strong> button to upload files."),a=o?gettext("<span>Drag and drop</span> files here<br> or click the <span>Upload</span> button."):i,d=[u("div.visible-sm.visible-xs",u.trust(i)),u("div.visible-md.visible-lg",u.trust(a))];t["default"]=d,e.exports=t["default"]},function(e,t){e.exports="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCA2MDAgNDAwIj48cGF0aCBmaWxsPSIjREREIiBkPSJNNTYxLjUgMTY2LjRjLTEuMS0yLjYtMi40LTQuNi0zLjktNi4xTDUzMi40IDEzNWMtMS41LTEuNS0zLjYtMi44LTYuMS0zLjktMi42LTEuMS01LTEuNi03LjEtMS42aC03Mi41Yy0yLjIgMC00IC44LTUuNSAyLjMtMS41IDEuNS0yLjMgMy4zLTIuMyA1LjV2MTI5LjNjMCAyLjIuOCA0IDIuMyA1LjUgMS41IDEuNSAzLjMgMi4zIDUuNSAyLjNoMTA4LjdjMi4yIDAgNC0uOCA1LjUtMi4zIDEuNS0xLjUgMi4zLTMuMyAyLjMtNS41di05My4xYy0uMS0yLjItLjYtNC41LTEuNy03LjF6bS0zOS44LTI1LjljMS42LjUgMi43IDEuMSAzLjMgMS44bDI1LjMgMjUuM2MuNi42IDEuMiAxLjggMS44IDMuM2gtMzAuNHYtMzAuNHpNNTUyLjggMjY0SDQ0OS4yVjEzOS45aDYyLjF2MzMuNmMwIDIuMi44IDQgMi4zIDUuNSAxLjUgMS41IDMuMyAyLjMgNS41IDIuM2gzMy43VjI2NHptLTgyLjEtNzEuN2MtLjUuNS0uNyAxLjEtLjcgMS45djUuMmMwIC44LjIgMS40LjcgMS45czEuMS43IDEuOS43aDU3Yy44IDAgMS40LS4yIDEuOS0uN3MuNy0xLjEuNy0xLjl2LTUuMmMwLS44LS4yLTEuNC0uNy0xLjlzLTEuMS0uNy0xLjktLjdoLTU3Yy0uOCAwLTEuNS4yLTEuOS43em01OC44IDQwLjdoLTU3Yy0uOCAwLTEuNC4yLTEuOS43LS41LjUtLjcgMS4xLS43IDEuOXY1LjJjMCAuOC4yIDEuNC43IDEuOXMxLjEuNyAxLjkuN2g1N2MuOCAwIDEuNC0uMiAxLjktLjdzLjctMS4xLjctMS45di01LjJjMC0uOC0uMi0xLjQtLjctMS45LS41LS41LTEuMi0uNy0xLjktLjd6bTAtMjAuN2gtNTdjLS44IDAtMS40LjItMS45LjdzLS43IDEuMS0uNyAxLjl2NS4yYzAgLjguMiAxLjQuNyAxLjlzMS4xLjcgMS45LjdoNTdjLjggMCAxLjQtLjIgMS45LS43cy43LTEuMS43LTEuOXYtNS4yYzAtLjgtLjItMS40LS43LTEuOXMtMS4yLS43LTEuOS0uN3pNMTA5LjMgMjE2LjFjLTQuOS00LTguOC0xMC40LTExLjgtMTkuMi42LTMuNyAxLTguOSAxLjEtMTUuNVYxNzljMC0uMyAwLS41LS4xLS42LjEtLjEuMi0uMy4zLS42LjUtMi41LjItNC40LS43LTUuNS0uNi0uOC0xLjYtMS4yLTIuOC0xLjJoLTEuOGMtMS43IDAtMi44IDEuMS0zLjQgMy4yLS43IDIuNy0uOSA2LjEtLjUgMTAuMy40IDQuMiAxLjIgOC41IDIuNSAxMi45LTEuOSA2LjgtNC43IDEzLjgtOC40IDIxLjItMyA2LTUuOSAxMS4zLTguNyAxNS45IDAtLjEtLjEtLjItLjItLjMtLjUtLjgtMS4xLTEtMS45LS41LTQuNiAyLjQtOC4xIDUtMTAuNyA3LjgtMi41IDIuOC00IDUuMi00LjUgNy40LS4yIDEuNC0uMSAyLjQuNSAyLjkuMy4yLjQuNC41LjRsMS45IDFjLjcuNCAxLjUuNiAyLjMuNiA0LjggMCAxMS4zLTcuMSAxOS42LTIxLjIgOS4yLTMuMiAxOS44LTUuNCAzMS43LTYuNyAzLjQgMS44IDYuOSAzLjIgMTAuNSA0LjMgMy42IDEuMSA2LjcgMS42IDkuMyAxLjYgMy41IDAgNS40LTEgNS43LTMuMXYtLjFsLjItLjJjLjEtLjEuMS0uMS4xLS4yLjgtMS42LjctMy0uMi00LjItMS42LTIuNi02LjQtNC0xNC4zLTQtMy4xIDAtNi4zLjItOS41LjYtMi42LTEuNy00LjktMy4yLTYuNy00LjZ6bS00Ni42IDMzLjJjLjctMS42IDItMy42IDQtNnM0LjMtNC42IDcuMS02LjhjLTQuNiA3LjItOC4zIDExLjUtMTEuMSAxMi44em0zMi4yLTc0LjR2LS4yYy4xLS4xLjEtLjEuMS0uMi42LjggMSAxLjcgMS4xIDIuOXYuMmMwIC4xIDAgLjEuMS4yLS4yLjItLjMuNC0uMy42LS40IDIuMi0uNiAzLjMtLjYgMy41LS4zIDItLjUgMy4yLS42IDMuNi0uNi00LjgtLjYtOC4zLjItMTAuNnptLTEwIDUzLjRjLjgtMS41IDItMy43IDMuNi02LjcgMy02IDUuMy0xMS4zIDYuNy0xNS45IDIuOCA1LjkgNi4yIDEwLjYgMTAuMyAxNC4yLjMuMy43LjYgMS4zIDEuMS42LjUuOS43IDEuMS44LTguMSAxLjUtMTUuNyAzLjYtMjMgNi41em01Mi4zLTEuMmwuMi4yYy0uMi4xLS43LjEtMS41LjEtMi42IDAtNS45LS44LTEwLTIuMyA2LjIgMCAxMCAuNyAxMS4zIDJ6bTIyLjQtNjAuN2MtMS4xLTIuNi0yLjQtNC42LTMuOS02LjFMMTMwLjUgMTM1Yy0xLjUtMS41LTMuNi0yLjgtNi4xLTMuOS0yLjYtMS4xLTUtMS42LTcuMS0xLjZINDQuOGMtMi4yIDAtNCAuOC01LjUgMi4zLTEuNSAxLjUtMi4zIDMuMy0yLjMgNS41djEyOS4zYzAgMi4yLjggNCAyLjMgNS41IDEuNSAxLjUgMy4zIDIuMyA1LjUgMi4zaDEwOC43YzIuMiAwIDQtLjggNS41LTIuMyAxLjUtMS41IDIuMy0zLjMgMi4zLTUuNXYtOTMuMWMwLTIuMi0uNi00LjUtMS43LTcuMXptLTM5LjgtMjUuOWMxLjYuNSAyLjcgMS4xIDMuMyAxLjhsMjUuMyAyNS4zYy42LjYgMS4yIDEuOCAxLjggMy4zaC0zMC40di0zMC40ek0xNTAuOSAyNjRINDcuNFYxMzkuOWg2Mi4xdjMzLjZjMCAyLjIuOCA0IDIuMyA1LjUgMS41IDEuNSAzLjMgMi4zIDUuNSAyLjNIMTUxVjI2NHpNMjUwLjcgMjIwLjdjOC4yIDAgMTUuMi0yLjkgMjEtOC42IDUuOC01LjcgOC42LTEyLjcgOC42LTIwLjlzLTIuOS0xNS4yLTguNi0yMC45Yy01LjgtNS43LTEyLjctOC42LTIxLTguNi04LjIgMC0xNS4yIDIuOS0yMSA4LjYtNS44IDUuOC04LjYgMTIuNy04LjYgMjAuOXMyLjkgMTUuMiA4LjYgMjAuOWM1LjggNS43IDEyLjggOC42IDIxIDguNnptMTkuOCAzOS40bC0xOS43LTE5LjctMjkuNyAyOS42djI5LjZIMzc5di00OS4zTDMyOS43IDIwMWwtNTkuMiA1OS4xem0xNDQuOS0xMjYuOWMtMi4xLTQuOS00LjUtOC44LTcuNC0xMS43bC00OC4xLTQ4LjFjLTIuOS0yLjktNi44LTUuMy0xMS43LTcuNC00LjktMi4xLTkuNS0zLjEtMTMuNi0zLjFIMTk2LjRjLTQuMSAwLTcuNiAxLjQtMTAuNSA0LjMtMi45IDIuOS00LjMgNi40LTQuMyAxMC41djI0Ni40YzAgNC4xIDEuNCA3LjYgNC4zIDEwLjUgMi45IDIuOSA2LjQgNC4zIDEwLjUgNC4zaDIwNy4yYzQuMSAwIDcuNi0xLjQgMTAuNS00LjMgMi45LTIuOSA0LjMtNi40IDQuMy0xMC41VjE0Ni44Yy4xLTQuMS0uOS04LjYtMy0xMy42em0tNzUuOS00OS4zYzMgMSA1LjEgMi4yIDYuMyAzLjRsNDguMyA0OC4yYzEuMiAxLjIgMi40IDMuMyAzLjQgNi4zaC01OFY4My45em01OS4yIDIzNS40SDIwMS40VjgyLjdoMTE4LjR2NjQuMWMwIDQuMSAxLjQgNy42IDQuMyAxMC41IDIuOSAyLjkgNi40IDQuMyAxMC41IDQuM2g2NC4xdjE1Ny43eiIvPjwvc3ZnPg=="},function(e,t,n){"use strict";t.__esModule=!0;var u=n(2),r=n(1),o=n(18),i=n(20),a=n(5),d=a.dropzoneConfig,l=n(21),M=n(23),s=n(25);t["default"]=function(e,t,n){var a=r.map(t,function(t){return u("div.col-xs-6.col-md-4.col-lg-3.grid-folder.fd-zone",{key:"folder-"+t.id,"data-folder-id":t.id,config:d(e)},[u("a.file-preview",{onclick:function(){return e.setFolder(t.id),!1},href:"#"},u("i.fa.fa-folder-open.folder-icon")),u("div.file-name",i(e,t))])}),c=r.map(n,function(t){return u("div.col-xs-6.col-md-4.col-lg-3.grid-file",{key:t.id,draggable:!0,ondragstart:function(e){e.stopPropagation(),e.dataTransfer.effectAllowed="copyMove",e.dataTransfer.setData("text",JSON.stringify({fileId:t.id}));try{var n=document.createElement("img");n.src=t.thumbnail||l.defaultThumbnail,n.width=100,e.dataTransfer.setDragImage(n,0,0)}catch(u){}}},u("button.file-cog-btn.btn.btn-xs.btn-default",{key:"filecog",onclick:function(n){M.open(n.currentTarget,s(e,t)),n.preventDefault()}},u("i.fa.fa-cog")),o(t,"a.file-preview",[u("img.img-responsive",{src:t.thumbnail||l.defaultThumbnail}),u("div.file-name",t.name)]))});return u("div.row",a.concat(c))},e.exports=t["default"]},function(e,t,n){"use strict";t.__esModule=!0;var u=n(2),r=n(19);t["default"]=function(e){var t=arguments.length<=1||void 0===arguments[1]?"a":arguments[1],n=arguments.length<=2||void 0===arguments[2]?e.name:arguments[2];return function(){var o={href:e.url,target:"_blank"},i=r();return i&&(o.onclick=function(t){return window.opener.postMessage({pick:{id:i,object:{id:e.id,text:e.name,url:e.url,thumbnail:e.thumbnail}}},"*"),t.preventDefault(),!1}),u(t,o,n)}()},e.exports=t["default"]},function(e,t){"use strict";t.__esModule=!0,t["default"]=function(){var e=/pick=([^&]+)/.exec(window.location.search);return e?e[1]:null},e.exports=t["default"]},function(e,t,n){"use strict";t.__esModule=!0;var u=n(2);t["default"]=function(e,t){return u("a",{href:"#",onclick:function(){return e.setFolder(t.id),!1}},t.name)},e.exports=t["default"]},function(e,t,n){"use strict";t.__esModule=!0;var u=n(16);t.uploadIndicator=u;var r=n(22);t.defaultThumbnail=r},function(e,t){e.exports="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCAxNDUgMTQ1IiBoZWlnaHQ9IjE0NSIgd2lkdGg9IjE0NSI+PHBhdGggZD0iTTEyNC41IDEzNC45NjhoLTEwNHYtMTI0aDYyYy4wOTUgMTEuMTM4LS4xOTIgMjIuODkyLjE0OCAzNC42MDggMS4xMzcgNS40MDcgNi43MjIgNi45MjMgMTEuMjg3IDYuMzkySDEyNC41djgyLjU5M3pNOTMuMSAxMC45NzVjNC40MzggMS42OCA3LjA0NyA2LjA3IDEwLjU2NCA5LjA5NiA2LjEyIDYuMjEyIDEyLjM5IDEyLjI4NyAxOC40MTYgMTguNTgyIDMuNjIgNC42NjMtMi4yODcgMi45OS00Ljc0OCAzLjMxNkg5My41VjEwLjk3NXptMzkuNzA0IDI1LjkxOGMtMi44MTgtNi41NDctOC45NDYtMTAuNjYtMTMuNTY3LTE1Ljg1LTUuODM0LTUuNjgyLTExLjI5OC0xMS43OC0xNy4zODgtMTcuMTc2LTYuNTQyLTUuMTYtMTQuOTg0LTMuNjk0LTIyLjY3LTMuOS0yMC41NjguMDI2LTQxLjEzOC0uMDUtNjEuNzAzLjAzOC01LjQzMi4zODctNy42MiA2LjA5LTYuOTc3IDEwLjgyNS4wMjUgNDIuMzgtLjA1IDg0Ljc2LjAzNyAxMjcuMTQuMzg2IDUuNDQ4IDYuMDcgNy42NDMgMTAuNzkgNi45OTggMzUuNC0uMDI1IDcwLjguMDUgMTA2LjE5Ni0uMDM4IDUuNDMyLS4zODYgNy42Mi02LjA5IDYuOTc3LTEwLjgyNC0uMDM4LTMwLjMxMi4wNzUtNjAuNjMtLjA1Ny05MC45NC0uMTkyLTIuMTY0LS43OTQtNC4yNzYtMS42NC02LjI3M3oiIGZpbGw9IiNkZGQiLz48L3N2Zz4="},function(e,t,n){"use strict";function u(){return null!==c&&null!==g}function r(){if(u()){var e=s(c)||f;if(null!==e){var t=window.innerWidth,n=e.left,r=e.top+e.height+5,o=s(g),i=o?o.width:0;t&&n+i>t-p&&(n=n+e.width-i),M.assign(g.style,{display:"block",left:n+"px",top:r+"px",position:"absolute",zIndex:9e3})}}}function o(e){return function(){var t=null;return M.isArray(e)&&(t=e),M.isFunction(e)&&(t=e()),M.isArray(t)?l("ul.dropdown-menu",{style:"display: block; float: none; position: static; top: 0"},t):t}}function i(){return null===g&&(g=document.createElement("div"),document.body.appendChild(g),window.addEventListener("resize",y,!1),window.addEventListener("scroll",y,!1),document.body.addEventListener("click",function(e){if(u()&&!(+new Date-j<200)){var t=e.target;do if(t===g)return!1;while(t=t.parentElement);d()}},!1)),g}function a(e,t){return c===e?void d():(e&&i(),c=e,L=t?{view:o(t),controller:M.noop}:null,j=+new Date,void(g&&(l.mount(g,L),f=e?s(e):null,t&&(r(),setTimeout(y,100)))))}function d(){a(null,null)}t.__esModule=!0,t.isMenuVisible=u,t.open=a,t.close=d;var l=n(2),M=n(1),s=n(24),c=null,L=null,f=null,g=null,j=0,p=20,y=M.debounce(r,20)},function(e,t){"use strict";t.__esModule=!0,t["default"]=function(e){if(!e.getClientRects().length)return null;var t=e.getBoundingClientRect();if(!t.width&&!t.height)return null;var n=e.ownerDocument,u=n.defaultView||window,r=n.documentElement;return{top:t.top+u.pageYOffset-r.clientTop,left:t.left+u.pageXOffset-r.clientLeft,width:t.width,height:t.height}},e.exports=t["default"]},function(e,t,n){"use strict";t.__esModule=!0;var u=n(8),r=n(26);t["default"]=function(e,t){return function(){return[r(gettext("Rename file"),function(){u.promptRenameFile(e,t)},{disabled:e.isMenuDisabled("rename")}),r(gettext("Delete file"),function(){u.promptDeleteFile(e,t)},{disabled:e.isMenuDisabled("delete")})]}},e.exports=t["default"]},function(e,t,n){"use strict";function u(e,t){var n=arguments.length<=2||void 0===arguments[2]?{}:arguments[2],u=["li"];return n.disabled&&(t=r.noop,u.push("disabled")),o(u.join("."),o("a",{href:"#",onclick:function(e){e.preventDefault(),t(),i.close()}},e))}t.__esModule=!0,t["default"]=u;var r=n(1),o=n(2),i=n(23);e.exports=t["default"]},function(e,t,n){"use strict";t.__esModule=!0;var u=n(1),r=n(2),o=n(28),i=n(18),a=n(20),d=n(23),l=n(25);t["default"]=function(e,t,n){var M=u.map(t,function(t){return r("tr",{key:"folder-"+t.id},[r("td",{colspan:4},[r("i.fa.fa-folder.folder-icon")," ",a(e,t)])])}),s=u.map(n,function(t){return r("tr",{key:t.id},[r("td",i(t)),r("td.text-right",t.size),r("td.text-right",o(t.date).format()),r("td",{key:"filecog",onclick:function(n){d.open(n.currentTarget,l(e,t)),n.preventDefault()}},r("i.fa.fa-cog"))])});return r("div.table-responsive",[r("table.table.table-condensed.table-striped.table-bordered",[r("thead",r("tr",u.map([gettext("Name"),gettext("Size"),gettext("Date"),gettext("Edit")],function(e){return r("th",e)}))),r("tbody",M.concat(s))])])},e.exports=t["default"]},function(e,t){e.exports=window.moment},function(e,t,n){"use strict";t.__esModule=!0;var u=n(1);t["default"]=function(e,t){function n(e,o){return e.id==t?void(r=o.concat([e])):(o=[].concat(o).concat([e]),void u.each(e.children,function(e){r||n(e,o)}))}var r=null;return n(e,[]),r||[]},e.exports=t["default"]},function(e,t,n){"use strict";t.__esModule=!0;var u=n(9),r=n(26);t["default"]=function(e){return function(){var t=0===(0|e.currentFolderId());return[r(gettext("New folder"),function(){u.promptCreateFolderHere(e)},{disabled:e.isMenuDisabled("new")}),r(gettext("Rename folder"),function(){u.promptRenameCurrentFolder(e)},{disabled:t||e.isMenuDisabled("rename")}),r(gettext("Delete folder"),function(){u.promptDeleteCurrentFolder(e)},{disabled:t||e.isMenuDisabled("delete")})]}},e.exports=t["default"]}]);
//# sourceMappingURL=media-browser.js.map